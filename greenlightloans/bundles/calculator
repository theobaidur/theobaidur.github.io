function scroll_to_results(){$("html,body").animate({scrollTop:$("#results").offset().top},"slow")}function draw_amortization_table(n,t,r,u){var e="$",o=",",s=".",h="%u%n",f;for(amortization_string='<table class="table table-striped table-hover"><tr>',i=0;i<t.length;i++)f="","hide_sm"in t[i]&&t[i].hide_sm&&(f=' class="hidden-xs"'),amortization_string=amortization_string+"<th"+f+">"+t[i].title+"<\/th>";if(amortization_string=amortization_string+"<\/tr>",$.each(r,function(n,r){for(amortization_string=amortization_string+"<tr>",i=0;i<t.length;i++){var u="";"hide_sm"in t[i]&&t[i].hide_sm&&(u=' class="hidden-xs"');amortization_string="format"in t[i]&&t[i].format?amortization_string+"<td"+u+">"+accounting.formatMoney(r[t[i].data_key],{symbol:e,format:h,thousand:o,decimal:s})+"<\/td>":amortization_string+"<td"+u+">"+r[t[i].data_key]+"<\/td>"}amortization_string=amortization_string+"<\/tr>"}),typeof u!="undefined"){for(amortization_string=amortization_string+'<tr class="totals">',i=0;i<t.length;i++)t[i].data_key in u?(f="","hide_sm"in t[i]&&t[i].hide_sm&&(f=' class="hidden-xs"'),amortization_string="format"in t[i]&&t[i].format?amortization_string+"<td"+f+">"+accounting.formatMoney(u[t[i].data_key],{symbol:e,format:h,thousand:o,decimal:s})+"<\/td>":amortization_string+"<td"+f+">"+u[t[i].data_key]+"<\/td>"):amortization_string=amortization_string+"<td><\/td>";amortization_string=amortization_string+"<\/tr>"}amortization_string=amortization_string+"<\/table>";$("#"+n).html(amortization_string)}function set_tool_tip_formatter(){Highcharts.Point.prototype.tooltipFormatter=function(n){var t=this,i=t.series;return['<span style="color:'+i.color+'">',t.name||i.name,"<\/span>: ",n?"":"<b>x = "+(t.name||t.x)+",<\/b> ","<b>",n?"":"y = ",accounting.formatMoney(t.y,{symbol:"$",format:"%u%n",thousand:",",decimal:"."}),"<\/b><br>"].join("")}}function draw_bar_chart(n){var r=[],u=[],f=[],e=[],o=[],t=0,i=0;n.length>1?(t=n[0].balance,i=Number(n[1].principal_paid)+Number(n[1].interest_paid)+Number(n[1].pmi_tax_insurance)):n.length>0&&(t=n[0].balance,i=Number(n[0].principal_paid)+Number(n[0].interest_paid)+Number(n[0].pmi_tax_insurance));$.each(n,function(n,t){r.push(t.period);u.push(Number(t.principal_paid));f.push(Number(t.interest_paid));e.push(Number(t.pmi_tax_insurance));o.push(Number(t.balance))});$("#mortgage-chart").highcharts({credits:{enabled:!1},chart:{zoomType:"xy",backgroundColor:"rgba(255, 255, 255, 0.1)",style:{color:chart_text_color}},title:{text:""},xAxis:[{categories:r,minTickInterval:5,labels:{style:{color:chart_text_color}}}],yAxis:[{min:0,max:t,title:{text:"Balance",style:{color:bar_balance_color}},labels:{style:{color:chart_text_color}}},{min:0,max:i,title:{text:"Payments",style:{color:bar_principal_color}},opposite:!0,labels:{style:{color:chart_text_color}}}],tooltip:{shared:!0},plotOptions:{column:{stacking:"normal"}},legend:{layout:"horizontal",x:0,verticalAlign:"top",y:0,backgroundColor:"rgba(255, 255, 255, 0.1)",borderColor:"rgba(255, 255, 255, 0.1)",itemStyle:{color:chart_text_color}},series:[{name:"Tax, Insurance & PMI",color:bar_pmi_color,type:"column",pointPadding:.02,groupPadding:.02,yAxis:1,data:e},{name:"Interest",color:bar_interest_color,type:"column",pointPadding:.02,groupPadding:.02,yAxis:1,data:f},{name:"Principal",color:bar_principal_color,type:"column",pointPadding:.02,groupPadding:.02,yAxis:1,data:u},{name:"Balance",color:bar_balance_color,type:"spline",data:o}]})}function draw_pie_chart(n){$("#breakdown-chart").highcharts({credits:{enabled:!1},chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,backgroundColor:"rgba(255, 255, 255, 0.1)"},title:null,plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,color:chart_text_color,connectorColor:chart_text_color,formatter:function(){return"<b>"+this.point.name+"<\/b>: "+accounting.formatMoney(this.point.y)}}}},series:[{type:"pie",name:"Cost Breakdown",data:n}]})}function calculate(){var d=Math.round(parseFloat($("#purchase_price").val())*100),ft,f,v,y,g,s,nt,h,r,tt,p,w,u,e,a,k,t,o;(isNaN(d)||d<0)&&(d=0);interest_rate=parseFloat($("#interest_rate").val())/100;(isNaN(interest_rate)||interest_rate<0)&&(interest_rate=0);ft=interest_rate/12;f=parseInt($("#term").val());(isNaN(f)||f<0)&&(f=0);v=f*12;y=Math.round(parseFloat($("#down_payment").val())*100);(isNaN(y)||y<0)&&(y=0);g=Math.round(parseFloat($("#yearly_tax_payment").val())*100);(isNaN(g)||g<0)&&(g=0);s=Math.ceil(g/12);nt=Math.round(parseFloat($("#yearly_insurance_payment").val())*100);(isNaN(nt)||nt<0)&&(nt=0);h=Math.ceil(nt/12);r=d-y;r<0&&(r=0);tt=parseFloat($("#pmi").val())/100;(isNaN(tt)||tt<0)&&(tt=0);p=0;r/d>.8&&(p=gaussian_round(r*tt/12));w=0;interest_rate>0&&f>0?w=gaussian_round(r*(ft/(1-Math.pow(1+ft,v-v*2)))):f>0&&(w=gaussian_round(r/f));u=r;e=Date.parse($("#start_date").val());e.add({months:1});var et=[],n=[],b=0,ot="",it=w,rt=0,c=0,l=0,ut=0;for(i=0;i<v;i++)a=gaussian_round(u*ft),i+1==v&&(it=u+a),k=it-a,u=u-k,u<0&&(u=0),b=Number(b)+Number(a),t={},(u+k)/(r+y)>=.8?(ot=e.toString("MMM. yyyy"),c=Number(c)+Number(s),l=Number(l)+Number(h),ut=Number(ut)+Number(p),t.pmi_tax_insurance=(Number(s)+Number(h)+Number(p))/100):(c=Number(c)+Number(s),l=Number(l)+Number(h),t.pmi_tax_insurance=(Number(s)+Number(h))/100),t.period=e.toString("MMM. yyyy"),t.payment=it/100+t.pmi_tax_insurance,t.principal_paid=k/100,t.interest_paid=a/100,t.balance=u/100,et.push(t),rt=rt+Number(it)+t.pmi_tax_insurance*100,n.length==0||n[n.length-1].period!=e.toString("yyyy")?(o={},o.period=e.toString("yyyy"),o.payment=it/100+Number(t.pmi_tax_insurance),o.principal_paid=k/100,o.interest_paid=a/100,o.balance=u/100,o.pmi_tax_insurance=Number(t.pmi_tax_insurance),n.push(o)):(n[n.length-1].payment=Number(n[n.length-1].payment)+Number(t.payment),n[n.length-1].principal_paid=Number(n[n.length-1].principal_paid)+k/100,n[n.length-1].interest_paid=Number(n[n.length-1].interest_paid)+a/100,n[n.length-1].balance=u/100,n[n.length-1].pmi_tax_insurance=Number(n[n.length-1].pmi_tax_insurance)+Number(t.pmi_tax_insurance)),e.add({months:1});$("#monthly_payment_display").html(accounting.formatMoney((Number(w)+Number(s)+Number(p)+Number(h))/100));p>0?$("#monthly_payment_extra_display").html("<br>("+accounting.formatMoney((Number(w)+Number(s)+Number(h))/100)+" After "+ot+")"):$("#monthly_payment_extra_display").html("");$("#loan_amount_display").html(accounting.formatMoney(r/100));$("#total_cost_display").html(accounting.formatMoney(rt/100));$("#number_of_payments_display").html(v);$("#total_interest_display").html(accounting.formatMoney(b/100));$("#payoff_date_display").html(e.add({months:-1}).toString("MMM. yyyy"));draw_amortization_table("monthly_amortization",[{title:"Month",data_key:"period"},{title:"Principal",data_key:"principal_paid",hide_sm:1,format:1},{title:"Interest",data_key:"interest_paid",hide_sm:1,format:1},{title:"Tax, Insurance &amp; PMI",data_key:"pmi_tax_insurance",hide_sm:1,format:1},{title:"Total Paid",data_key:"payment",format:1},{title:"Balance",data_key:"balance",format:1}],et,{period:"Totals",principal_paid:r/100,interest_paid:b/100,pmi_tax_insurance:(Number(c)+Number(l)+Number(ut))/100,payment:rt/100});draw_amortization_table("yearly_amortization",[{title:"Year",data_key:"period"},{title:"Principal",data_key:"principal_paid",hide_sm:1,format:1},{title:"Interest",data_key:"interest_paid",hide_sm:1,format:1},{title:"Tax, Insurance &amp; PMI",data_key:"pmi_tax_insurance",hide_sm:1,format:1},{title:"Total Paid",data_key:"payment",format:1},{title:"Balance",data_key:"balance",format:1}],n,{period:"Totals",principal_paid:r/100,interest_paid:b/100,pmi_tax_insurance:(Number(c)+Number(l)+Number(ut))/100,payment:rt/100});draw_bar_chart(n);draw_pie_chart([{name:"Principal",y:r/100,color:pie_principal_color},{name:"Interest",y:b/100,color:pie_interest_color,sliced:!0,selected:!0},{name:"Tax",y:c/100,color:pie_tax_color},{name:"Insurance",y:l/100,color:pie_insurance_color},{name:"PMI",y:ut/100,color:pie_pmi_color}])}function gaussian_round(n){var t=Math.abs(n),i=n==0?0:n<0?-1:1,r=Math.floor(t);return t-r!=.5?Math.round(t)*i:r%2==1?Math.ceil(t)*i:r*i}(function(n){function r(){return new Date(Date.UTC.apply(Date,arguments))}function c(t,i){var u=n(t).data(),f={},e,o=new RegExp("^"+i.toLowerCase()+"([A-Z])"),i=new RegExp("^"+i.toLowerCase());for(var r in u)i.test(r)&&(e=r.replace(o,function(n,t){return t.toLowerCase()}),f[e]=u[r]);return f}function l(t){var u={},r;if(i[t]||(t=t.split("-")[0],i[t]))return r=i[t],n.each(h,function(n,t){t in r&&(u[t]=r[t])}),u}var e=n(window),u=function(i,r){var u=this;this._process_options(r);this.element=n(i);this.isInline=!1;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1;this.hasInput=this.component&&this.element.find("input").length;this.component&&this.component.length===0&&(this.component=!1);this.picker=n(t.template);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right"));this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(n,t){return parseInt(t)+1});this._allow_update=!1;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()},o,s,f,h,i,t;u.prototype={constructor:u,_process_options:function(r){var u,o,h,e,s;this._o=n.extend({},this._o,r);u=this.o=n.extend({},this._o);o=u.language;i[o]||(o=o.split("-")[0],i[o]||(o=f.language));u.language=o;switch(u.startView){case 2:case"decade":u.startView=2;break;case 1:case"year":u.startView=1;break;default:u.startView=0}switch(u.minViewMode){case 1:case"months":u.minViewMode=1;break;case 2:case"years":u.minViewMode=2;break;default:u.minViewMode=0}if(u.startView=Math.max(u.startView,u.minViewMode),u.weekStart%=7,u.weekEnd=(u.weekStart+6)%7,h=t.parseFormat(u.format),u.startDate!==-Infinity&&(u.startDate=u.startDate?u.startDate instanceof Date?this._local_to_utc(this._zero_time(u.startDate)):t.parseDate(u.startDate,h,u.language):-Infinity),u.endDate!==Infinity&&(u.endDate=u.endDate?u.endDate instanceof Date?this._local_to_utc(this._zero_time(u.endDate)):t.parseDate(u.endDate,h,u.language):Infinity),u.daysOfWeekDisabled=u.daysOfWeekDisabled||[],n.isArray(u.daysOfWeekDisabled)||(u.daysOfWeekDisabled=u.daysOfWeekDisabled.split(/[,\s]*/)),u.daysOfWeekDisabled=n.map(u.daysOfWeekDisabled,function(n){return parseInt(n,10)}),e=String(u.orientation).toLowerCase().split(/\s+/g),s=u.orientation.toLowerCase(),e=n.grep(e,function(n){return/^auto|left|right|top|bottom$/.test(n)}),u.orientation={x:"auto",y:"auto"},s&&s!=="auto")if(e.length===1)switch(e[0]){case"top":case"bottom":u.orientation.y=e[0];break;case"left":case"right":u.orientation.x=e[0]}else s=n.grep(e,function(n){return/^left|right$/.test(n)}),u.orientation.x=s[0]||"auto",s=n.grep(e,function(n){return/^top|bottom$/.test(n)}),u.orientation.y=s[0]||"auto"},_events:[],_secondaryEvents:[],_applyEvents:function(n){for(var t=0,i,r;t<n.length;t++){i=n[t][0];r=n[t][1];i.on(r)}},_unapplyEvents:function(n){for(var t=0,i,r;t<n.length;t++)i=n[t][0],r=n[t][1],i.off(r)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:n.proxy(this.show,this),keyup:n.proxy(this.update,this),keydown:n.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:n.proxy(this.show,this),keyup:n.proxy(this.update,this),keydown:n.proxy(this.keydown,this)}],[this.component,{click:n.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:n.proxy(this.show,this)}]];this._secondaryEvents=[[this.picker,{click:n.proxy(this.click,this)}],[n(window),{resize:n.proxy(this.place,this)}],[n(document),{"mousedown touchstart":n.proxy(function(n){this.element.is(n.target)||this.element.find(n.target).length||this.picker.is(n.target)||this.picker.find(n.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(i,r){var u=r||this.date,f=this._utc_to_local(u);this.element.trigger({type:i,date:f,format:n.proxy(function(n){var i=n||this.o.format;return t.formatDate(u,i,this.o.language)},this)})},show:function(n){this.isInline||this.picker.appendTo("body");this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();n&&n.preventDefault();this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date},_utc_to_local:function(n){return new Date(n.getTime()+n.getTimezoneOffset()*6e4)},_local_to_utc:function(n){return new Date(n.getTime()-n.getTimezoneOffset()*6e4)},_zero_time:function(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())},_zero_utc_time:function(n){return new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()))},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return this.date},setDate:function(n){this.setUTCDate(this._local_to_utc(n))},setUTCDate:function(n){this.date=n;this.setValue()},setValue:function(){var n=this.getFormattedDate();this.isInput?this.element.val(n).change():this.component&&this.element.find("input").val(n).change()},getFormattedDate:function(n){return n===undefined&&(n=this.o.format),t.formatDate(this.date,n,this.o.language)},setStartDate:function(n){this._process_options({startDate:n});this.update();this.updateNavArrows()},setEndDate:function(n){this._process_options({endDate:n});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(n){this._process_options({daysOfWeekDisabled:n});this.update();this.updateNavArrows()},place:function(){var i,v,s;if(!this.isInline){var u=this.picker.outerWidth(),f=this.picker.outerHeight(),h=10,c=e.width(),y=e.height(),l=e.scrollTop(),p=parseInt(this.element.parents().filter(function(){return n(this).css("z-index")!="auto"}).first().css("z-index"))+10,t=this.component?this.component.parent().offset():this.element.offset(),a=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),w=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),r=t.left,o=t.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(r-=u-w)):(this.picker.addClass("datepicker-orient-left"),t.left<0?r-=t.left-h:t.left+u>c&&(r=c-u-h));i=this.o.orientation.y;i==="auto"&&(v=-l+t.top-f,s=l+y-(t.top+a+f),i=Math.max(v,s)===s?"top":"bottom");this.picker.addClass("datepicker-orient-"+i);i==="top"?o+=a:o-=f+parseInt(this.picker.css("padding-top"));this.picker.css({top:o,left:r,zIndex:p})}},_allow_update:!0,update:function(){if(this._allow_update){var r=new Date(this.date),n,i=!1;arguments&&arguments.length&&(typeof arguments[0]=="string"||arguments[0]instanceof Date)?(n=arguments[0],n instanceof Date&&(n=this._local_to_utc(n)),i=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date);this.date=t.parseDate(n,this.o.format,this.o.language);i?this.setValue():n?r.getTime()!==this.date.getTime()&&this._trigger("changeDate"):this._trigger("clearDate");this.date<this.o.startDate?(this.viewDate=new Date(this.o.startDate),this.date=new Date(this.o.startDate)):this.date>this.o.endDate?(this.viewDate=new Date(this.o.endDate),this.date=new Date(this.o.endDate)):(this.viewDate=new Date(this.date),this.date=new Date(this.date));this.fill()}},fillDow:function(){var r=this.o.weekStart,n="<tr>",t;for(this.o.calendarWeeks&&(t='<th class="cw">&nbsp;<\/th>',n+=t,this.picker.find(".datepicker-days thead tr:first-child").prepend(t));r<this.o.weekStart+7;)n+='<th class="dow">'+i[this.o.language].daysMin[r++%7]+"<\/th>";n+="<\/tr>";this.picker.find(".datepicker-days thead").append(n)},fillMonths:function(){for(var n="",t=0;t<12;)n+='<span class="month">'+i[this.o.language].monthsShort[t++]+"<\/span>";this.picker.find(".datepicker-months td").html(n)},setRange:function(t){t&&t.length?this.range=n.map(t,function(n){return n.valueOf()}):delete this.range;this.fill()},getClassNames:function(t){var i=[],r=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),e=this.date.valueOf(),u=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()==r&&t.getUTCMonth()<f?i.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()==r&&t.getUTCMonth()>f)&&i.push("new"),this.o.todayHighlight&&t.getUTCFullYear()==u.getFullYear()&&t.getUTCMonth()==u.getMonth()&&t.getUTCDate()==u.getDate()&&i.push("today"),t.valueOf()==e&&i.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||n.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&i.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),n.inArray(t.valueOf(),this.range)!=-1&&i.push("selected")),i},fill:function(){var k=new Date(this.viewDate),u=k.getUTCFullYear(),d=k.getUTCMonth(),v=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,it=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,y=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,rt=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,ft=this.date&&this.date.valueOf(),p,f,w,h,o,s,e,a,c,tt,l;for(this.picker.find(".datepicker-days thead th.datepicker-switch").text(i[this.o.language].months[d]+" "+u),this.picker.find("tfoot th.today").text(i[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(i[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths(),f=r(u,d-1,28,0,0,0,0),w=t.getDaysInMonth(f.getUTCFullYear(),f.getUTCMonth()),f.setUTCDate(w),f.setUTCDate(w-(f.getUTCDay()-this.o.weekStart+7)%7),h=new Date(f),h.setUTCDate(h.getUTCDate()+42),h=h.valueOf(),o=[];f.valueOf()<h;){if(f.getUTCDay()==this.o.weekStart&&(o.push("<tr>"),this.o.calendarWeeks)){var g=new Date(+f+(this.o.weekStart-f.getUTCDay()-7)%7*864e5),nt=new Date(+g+(11-g.getUTCDay())%7*864e5),b=new Date(+(b=r(nt.getUTCFullYear(),0,1))+(11-b.getUTCDay())%7*864e5),ut=(nt-b)/6048e5+1;o.push('<td class="cw">'+ut+"<\/td>")}s=this.getClassNames(f);s.push("day");this.o.beforeShowDay!==n.noop&&(e=this.o.beforeShowDay(this._utc_to_local(f)),e===undefined?e={}:typeof e=="boolean"?e={enabled:e}:typeof e=="string"&&(e={classes:e}),e.enabled===!1&&s.push("disabled"),e.classes&&(s=s.concat(e.classes.split(/\s+/))),e.tooltip&&(p=e.tooltip));s=n.unique(s);o.push('<td class="'+s.join(" ")+'"'+(p?' title="'+p+'"':"")+">"+f.getUTCDate()+"<\/td>");f.getUTCDay()==this.o.weekEnd&&o.push("<\/tr>");f.setUTCDate(f.getUTCDate()+1)}for(this.picker.find(".datepicker-days tbody").empty().append(o.join("")),a=this.date&&this.date.getUTCFullYear(),c=this.picker.find(".datepicker-months").find("th:eq(1)").text(u).end().find("span").removeClass("active"),a&&a==u&&c.eq(this.date.getUTCMonth()).addClass("active"),(u<v||u>y)&&c.addClass("disabled"),u==v&&c.slice(0,it).addClass("disabled"),u==y&&c.slice(rt+1).addClass("disabled"),o="",u=parseInt(u/10,10)*10,tt=this.picker.find(".datepicker-years").find("th:eq(1)").text(u+"-"+(u+9)).end().find("td"),u-=1,l=-1;l<11;l++)o+='<span class="year'+(l==-1?" old":l==10?" new":"")+(a==u?" active":"")+(u<v||u>y?" disabled":"")+'">'+u+"<\/span>",u+=1;tt.html(o)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),n=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(i){var u,h,e,l,s;if(i.preventDefault(),u=n(i.target).closest("span, td, th"),u.length==1)switch(u[0].nodeName.toLowerCase()){case"th":switch(u[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":h=t.modes[this.viewMode].navStep*(u[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,h);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,h);this.viewMode===1&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":e=new Date;e=r(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0);this.showMode(-2);l=this.o.todayBtn=="linked"?null:"view";this._setDate(e,l);break;case"clear":this.isInput?s=this.element:this.component&&(s=this.element.find("input"));s&&s.val("").change();this._trigger("changeDate");this.update();this.o.autoclose&&this.hide()}break;case"span":if(!u.is(".disabled")){if(this.viewDate.setUTCDate(1),u.is(".month")){var c=1,f=u.parent().find("span").index(u),o=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(f);this._trigger("changeMonth",this.viewDate);this.o.minViewMode===1&&this._setDate(r(o,f,c,0,0,0,0))}else{var o=parseInt(u.text(),10)||0,c=1,f=0;this.viewDate.setUTCFullYear(o);this._trigger("changeYear",this.viewDate);this.o.minViewMode===2&&this._setDate(r(o,f,c,0,0,0,0))}this.showMode(-1);this.fill()}break;case"td":if(u.is(".day")&&!u.is(".disabled")){var c=parseInt(u.text(),10)||1,o=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth();u.is(".old")?f===0?(f=11,o-=1):f-=1:u.is(".new")&&(f==11?(f=0,o+=1):f+=1);this._setDate(r(o,f,c,0,0,0,0))}}},_setDate:function(n,t){t&&t!="date"||(this.date=new Date(n));t&&t!="view"||(this.viewDate=new Date(n));this.fill();this.setValue();this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input"));i&&i.change();this.o.autoclose&&(!t||t=="date")&&this.hide()},moveMonth:function(n,t){var f;if(!t)return n;var i=new Date(n.valueOf()),e=i.getUTCDate(),o=i.getUTCMonth(),s=Math.abs(t),r,u;if(t=t>0?1:-1,s==1)u=t==-1?function(){return i.getUTCMonth()==o}:function(){return i.getUTCMonth()!=r},r=o+t,i.setUTCMonth(r),(r<0||r>11)&&(r=(r+12)%12);else{for(f=0;f<s;f++)i=this.moveMonth(i,t);r=i.getUTCMonth();i.setUTCDate(e);u=function(){return r!=i.getUTCMonth()}}while(u())i.setUTCDate(--e),i.setUTCMonth(r);return i},moveYear:function(n,t){return this.moveMonth(n,t*12)},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(n){var u,t,i,r,f;if(this.picker.is(":not(:visible)")){n.keyCode==27&&this.show();return}u=!1;switch(n.keyCode){case 27:this.hide();n.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=n.keyCode==37?-1:1;n.ctrlKey?(i=this.moveYear(this.date,t),r=this.moveYear(this.viewDate,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(i=this.moveMonth(this.date,t),r=this.moveMonth(this.viewDate,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+t),r=new Date(this.viewDate),r.setUTCDate(this.viewDate.getUTCDate()+t));this.dateWithinRange(i)&&(this.date=i,this.viewDate=r,this.setValue(),this.update(),n.preventDefault(),u=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=n.keyCode==38?-1:1;n.ctrlKey?(i=this.moveYear(this.date,t),r=this.moveYear(this.viewDate,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(i=this.moveMonth(this.date,t),r=this.moveMonth(this.viewDate,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+t*7),r=new Date(this.viewDate),r.setUTCDate(this.viewDate.getUTCDate()+t*7));this.dateWithinRange(i)&&(this.date=i,this.viewDate=r,this.setValue(),this.update(),n.preventDefault(),u=!0);break;case 13:this.hide();n.preventDefault();break;case 9:this.hide()}u&&(this._trigger("changeDate"),this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.change())},showMode:function(n){n&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+n)));this.picker.find(">div").hide().filter(".datepicker-"+t.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};o=function(t,i){this.element=n(t);this.inputs=n.map(i.inputs,function(n){return n.jquery?n[0]:n});delete i.inputs;n(this.inputs).datepicker(i).bind("changeDate",n.proxy(this.dateUpdated,this));this.pickers=n.map(this.inputs,function(t){return n(t).data("datepicker")});this.updateDates()};o.prototype={updateDates:function(){this.dates=n.map(this.pickers,function(n){return n.date});this.updateRanges()},updateRanges:function(){var t=n.map(this.dates,function(n){return n.valueOf()});n.each(this.pickers,function(n,i){i.setRange(t)})},dateUpdated:function(t){var u=n(t.target).data("datepicker"),r=u.getUTCDate(),i=n.inArray(t.target,this.inputs),f=this.inputs.length;if(i!=-1){if(r<this.dates[i])while(i>=0&&r<this.dates[i])this.pickers[i--].setUTCDate(r);else if(r>this.dates[i])while(i<f&&r>this.dates[i])this.pickers[i++].setUTCDate(r);this.updateDates()}},remove:function(){n.map(this.pickers,function(n){n.remove()});delete this.element.data().datepicker}};s=n.fn.datepicker;n.fn.datepicker=function(t){var r=Array.apply(null,arguments),i;return r.shift(),this.each(function(){var s=n(this),e=s.data("datepicker"),a=typeof t=="object"&&t,y;if(!e){var v=c(this,"date"),p=n.extend({},f,v,a),w=l(p.language),h=n.extend({},f,w,v,a);s.is(".input-daterange")||h.inputs?(y={inputs:h.inputs||s.find("input").toArray()},s.data("datepicker",e=new o(this,n.extend(h,y)))):s.data("datepicker",e=new u(this,h))}if(typeof t=="string"&&typeof e[t]=="function"&&(i=e[t].apply(e,r),i!==undefined))return!1}),i!==undefined?i:this};f=n.fn.datepicker.defaults={autoclose:!1,beforeShowDay:n.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0};h=n.fn.datepicker.locale_opts=["format","rtl","weekStart"];n.fn.datepicker.Constructor=u;i=n.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};t={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(n){return n%4==0&&n%100!=0||n%400==0},getDaysInMonth:function(n,i){return[31,t.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][i]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(n){var t=n.replace(this.validParts,'\0').split('\0'),i=n.match(this.validParts);if(!t||!t.length||!i||i.length===0)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(f,e,o){var g,h,a,v,l,nt,s,k,p;if(f instanceof Date)return f;if(typeof e=="string"&&(e=t.parseFormat(e)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(f)){for(g=/([\-+]\d+)([dmwy])/,h=f.match(/([\-+]\d+)([dmwy])/g),f=new Date,s=0;s<h.length;s++){a=g.exec(h[s]);v=parseInt(a[1]);switch(a[2]){case"d":f.setUTCDate(f.getUTCDate()+v);break;case"m":f=u.prototype.moveMonth.call(u.prototype,f,v);break;case"w":f.setUTCDate(f.getUTCDate()+v*7);break;case"y":f=u.prototype.moveYear.call(u.prototype,f,v)}}return r(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),0,0,0)}var h=f&&f.match(this.nonpunctuation)||[],f=new Date,w={},d=["yyyy","yy","M","MM","m","mm","d","dd"],c={yyyy:function(n,t){return n.setUTCFullYear(t)},yy:function(n,t){return n.setUTCFullYear(2e3+t)},m:function(n,t){if(isNaN(n))return n;for(t-=1;t<0;)t+=12;for(t%=12,n.setUTCMonth(t);n.getUTCMonth()!=t;)n.setUTCDate(n.getUTCDate()-1);return n},d:function(n,t){return n.setUTCDate(t)}},y,b,a;if(c.M=c.MM=c.mm=c.m,c.dd=c.d,f=r(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0),l=e.parts.slice(),h.length!=l.length&&(l=n(l).filter(function(t,i){return n.inArray(i,d)!==-1}).toArray()),h.length==l.length){for(s=0,nt=l.length;s<nt;s++){if(y=parseInt(h[s],10),a=l[s],isNaN(y))switch(a){case"MM":b=n(i[o].months).filter(function(){var n=this.slice(0,h[s].length),t=h[s].slice(0,n.length);return n==t});y=n.inArray(b[0],i[o].months)+1;break;case"M":b=n(i[o].monthsShort).filter(function(){var n=this.slice(0,h[s].length),t=h[s].slice(0,n.length);return n==t});y=n.inArray(b[0],i[o].monthsShort)+1}w[a]=y}for(s=0;s<d.length;s++)p=d[s],p in w&&!isNaN(w[p])&&(k=new Date(f),c[p](k,w[p]),isNaN(k)||(f=k))}return f},formatDate:function(r,u,f){var e,r,s,o,h;for(typeof u=="string"&&(u=t.parseFormat(u)),e={d:r.getUTCDate(),D:i[f].daysShort[r.getUTCDay()],DD:i[f].days[r.getUTCDay()],m:r.getUTCMonth()+1,M:i[f].monthsShort[r.getUTCMonth()],MM:i[f].months[r.getUTCMonth()],yy:r.getUTCFullYear().toString().substring(2),yyyy:r.getUTCFullYear()},e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,r=[],s=n.extend([],u.separators),o=0,h=u.parts.length;o<=h;o++)s.length&&r.push(s.shift()),r.push(e[u.parts[o]]);return r.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;<\/th><th colspan="5" class="datepicker-switch"><\/th><th class="next">&raquo;<\/th><\/tr><\/thead>',contTemplate:'<tbody><tr><td colspan="7"><\/td><\/tr><\/tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"><\/th><\/tr><tr><th colspan="7" class="clear"><\/th><\/tr><\/tfoot>'};t.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+t.headTemplate+"<tbody><\/tbody>"+t.footTemplate+'<\/table><\/div><div class="datepicker-months"><table class="table-condensed">'+t.headTemplate+t.contTemplate+t.footTemplate+'<\/table><\/div><div class="datepicker-years"><table class="table-condensed">'+t.headTemplate+t.contTemplate+t.footTemplate+"<\/table><\/div><\/div>";n.fn.datepicker.DPGlobal=t;n.fn.datepicker.noConflict=function(){return n.fn.datepicker=s,this};n(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=n(this);i.data("datepicker")||(t.preventDefault(),i.datepicker("show"))});n(function(){n('[data-provide="datepicker-inline"]').datepicker()})})(window.jQuery);typeof Date.today!="function"&&(Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}},Date.getMonthNumberFromName=function(n){for(var i=Date.CultureInfo.monthNames,u=Date.CultureInfo.abbreviatedMonthNames,r=n.toLowerCase(),t=0;t<i.length;t++)if(i[t].toLowerCase()==r||u[t].toLowerCase()==r)return t;return-1},Date.getDayNumberFromName=function(n){for(var i=Date.CultureInfo.dayNames,u=Date.CultureInfo.abbreviatedDayNames,f=Date.CultureInfo.shortestDayNames,r=n.toLowerCase(),t=0;t<i.length;t++)if(i[t].toLowerCase()==r||u[t].toLowerCase()==r)return t;return-1},Date.isLeapYear=function(n){return n%4==0&&n%100!=0||n%400==0},Date.getDaysInMonth=function(n,t){return[31,Date.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][t]},Date.getTimezoneOffset=function(n,t){return t||!1?Date.CultureInfo.abbreviatedTimeZoneDST[n.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[n.toUpperCase()]},Date.getTimezoneAbbreviation=function(n,t){var i=t||!1?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard;for(var r in i)if(i[r]===n)return r;return null},Date.prototype.clone=function(){return new Date(this.getTime())},Date.prototype.compareTo=function(n){if(isNaN(this))throw new Error(this);if(n instanceof Date&&!isNaN(n))return this>n?1:this<n?-1:0;throw new TypeError(n);},Date.prototype.equals=function(n){return this.compareTo(n)===0},Date.prototype.between=function(n,t){var i=this.getTime();return i>=n.getTime()&&i<=t.getTime()},Date.prototype.addMilliseconds=function(n){return this.setMilliseconds(this.getMilliseconds()+n),this},Date.prototype.addSeconds=function(n){return this.addMilliseconds(n*1e3)},Date.prototype.addMinutes=function(n){return this.addMilliseconds(n*6e4)},Date.prototype.addHours=function(n){return this.addMilliseconds(n*36e5)},Date.prototype.addDays=function(n){return this.addMilliseconds(n*864e5)},Date.prototype.addWeeks=function(n){return this.addMilliseconds(n*6048e5)},Date.prototype.addMonths=function(n){var t=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+n),this.setDate(Math.min(t,this.getDaysInMonth())),this},Date.prototype.addYears=function(n){return this.addMonths(n*12)},Date.prototype.add=function(n){if(typeof n=="number")return this._orient=n,this;var t=n;return(t.millisecond||t.milliseconds)&&this.addMilliseconds(t.millisecond||t.milliseconds),(t.second||t.seconds)&&this.addSeconds(t.second||t.seconds),(t.minute||t.minutes)&&this.addMinutes(t.minute||t.minutes),(t.hour||t.hours)&&this.addHours(t.hour||t.hours),(t.month||t.months)&&this.addMonths(t.month||t.months),(t.year||t.years)&&this.addYears(t.year||t.years),(t.day||t.days)&&this.addDays(t.day||t.days),this},Date._validate=function(n,t,i,r){if(typeof n!="number")throw new TypeError(n+" is not a Number.");else if(n<t||n>i)throw new RangeError(n+" is not a valid value for "+r+".");return!0},Date.validateMillisecond=function(n){return Date._validate(n,0,999,"milliseconds")},Date.validateSecond=function(n){return Date._validate(n,0,59,"seconds")},Date.validateMinute=function(n){return Date._validate(n,0,59,"minutes")},Date.validateHour=function(n){return Date._validate(n,0,23,"hours")},Date.validateDay=function(n,t,i){return Date._validate(n,1,Date.getDaysInMonth(t,i),"days")},Date.validateMonth=function(n){return Date._validate(n,0,11,"months")},Date.validateYear=function(n){return Date._validate(n,1,9999,"seconds")},Date.prototype.set=function(n){var t=n;return t.millisecond||t.millisecond===0||(t.millisecond=-1),t.second||t.second===0||(t.second=-1),t.minute||t.minute===0||(t.minute=-1),t.hour||t.hour===0||(t.hour=-1),t.day||t.day===0||(t.day=-1),t.month||t.month===0||(t.month=-1),t.year||t.year===0||(t.year=-1),t.millisecond!=-1&&Date.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds()),t.second!=-1&&Date.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds()),t.minute!=-1&&Date.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes()),t.hour!=-1&&Date.validateHour(t.hour)&&this.addHours(t.hour-this.getHours()),t.month!==-1&&Date.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth()),t.year!=-1&&Date.validateYear(t.year)&&this.addYears(t.year-this.getFullYear()),t.day!=-1&&Date.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate()),t.timezone&&this.setTimezone(t.timezone),t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset),this},Date.prototype.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},Date.prototype.isLeapYear=function(){var n=this.getFullYear();return n%4==0&&n%100!=0||n%400==0},Date.prototype.isWeekday=function(){return!(this.is().sat()||this.is().sun())},Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())},Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})},Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})},Date.prototype.moveToDayOfWeek=function(n,t){var i=(n-this.getDay()+7*(t||1))%7;return this.addDays(i===0?i+=7*(t||1):i)},Date.prototype.moveToMonth=function(n,t){var i=(n-this.getMonth()+12*(t||1))%12;return this.addMonths(i===0?i+=12*(t||1):i)},Date.prototype.getDayOfYear=function(){return Math.floor((this-new Date(this.getFullYear(),0,1))/864e5)},Date.prototype.getWeekOfYear=function(n){var t=this.getFullYear(),e=this.getMonth(),o=this.getDate(),s=n||Date.CultureInfo.firstDayOfWeek,r=8-new Date(t,0,1).getDay(),f,i,u;return r==8&&(r=1),f=(Date.UTC(t,e,o,0,0,0)-Date.UTC(t,0,1,0,0,0))/864e5+1,i=Math.floor((f-r+7)/7),i===s&&(t--,u=8-new Date(t,0,1).getDay(),i=u==2||u==8?53:52),i},Date.prototype.isDST=function(){return console.log("isDST"),this.toString().match(/(E|C|M|P)(S|D)T/)[2]=="D"},Date.prototype.getTimezone=function(){return Date.getTimezoneAbbreviation(this.getUTCOffset,this.isDST())},Date.prototype.setTimezoneOffset=function(n){var t=this.getTimezoneOffset(),i=Number(n)*-6/10;return this.addMinutes(i-t),this},Date.prototype.setTimezone=function(n){return this.setTimezoneOffset(Date.getTimezoneOffset(n))},Date.prototype.getUTCOffset=function(){var t=this.getTimezoneOffset()*-10/6,n;return t<0?(n=(t-1e4).toString(),n[0]+n.substr(2)):(n=(t+1e4).toString(),"+"+n.substr(1))},Date.prototype.getDayName=function(n){return n?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()]},Date.prototype.getMonthName=function(n){return n?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()]},Date.prototype._toString=Date.prototype.toString,Date.prototype.toString=function(n){var t=this,i=function(n){return n.toString().length==1?"0"+n:n};return n?n.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(n){switch(n){case"hh":return i(t.getHours()<13?t.getHours():t.getHours()-12);case"h":return t.getHours()<13?t.getHours():t.getHours()-12;case"HH":return i(t.getHours());case"H":return t.getHours();case"mm":return i(t.getMinutes());case"m":return t.getMinutes();case"ss":return i(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return t.getFullYear();case"yy":return t.getFullYear().toString().substring(2,4);case"dddd":return t.getDayName();case"ddd":return t.getDayName(!0);case"dd":return i(t.getDate());case"d":return t.getDate().toString();case"MMMM":return t.getMonthName();case"MMM":return t.getMonthName(!0);case"MM":return i(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return t.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString()},Date.now=function(){return new Date},Date.today=function(){return Date.now().clearTime()},Date.prototype._orient=1,Date.prototype.next=function(){return this._orient=1,this},Date.prototype.last=Date.prototype.prev=Date.prototype.previous=function(){return this._orient=-1,this},Date.prototype._is=!1,Date.prototype.is=function(){return this._is=!0,this},Number.prototype._dateElement="day",Number.prototype.fromNow=function(){var n={};return n[this._dateElement]=this,Date.now().add(n)},Number.prototype.ago=function(){var n={};return n[this._dateElement]=this*-1,Date.now().add(n)},function(){for(var h,i,c,l,u,n=Date.prototype,s=Number.prototype,f="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),e="january february march april may june july august september october november december".split(/\s/),o="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),t,a=function(n){return function(){return this._is?(this._is=!1,this.getDay()==n):this.moveToDayOfWeek(n,this._orient)}},r=0;r<f.length;r++)n[f[r]]=n[f[r].substring(0,3)]=a(r);for(h=function(n){return function(){return this._is?(this._is=!1,this.getMonth()===n):this.moveToMonth(n,this._orient)}},i=0;i<e.length;i++)n[e[i]]=n[e[i].substring(0,3)]=h(i);for(c=function(n){return function(){return n.substring(n.length-1)!="s"&&(n+="s"),this["add"+n](this._orient)}},l=function(n){return function(){return this._dateElement=n,this}},u=0;u<o.length;u++)t=o[u].toLowerCase(),n[t]=n[t+"s"]=c(o[u]),s[t]=s[t+"s"]=l(t)}(),Date.prototype.toJSONString=function(){return this.toString("yyyy-MM-ddThh:mm:ssZ")},Date.prototype.toShortDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern)},Date.prototype.toLongDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.longDatePattern)},Date.prototype.toShortTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern)},Date.prototype.toLongTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.longTimePattern)},Date.prototype.getOrdinal=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},function(){var i,o,f,u;Date.Parsing={Exception:function(n){this.message="Parse error at '"+n.substring(0,10)+" ...'"}};var t=Date.Parsing,n=t.Operators={rtoken:function(n){return function(i){var r=i.match(n);if(r)return[r[0],i.substring(r[0].length)];throw new t.Exception(i);}},token:function(){return function(t){return n.rtoken(new RegExp("^s*"+t+"s*"))(t)}},stoken:function(t){return n.rtoken(new RegExp("^"+t))},until:function(n){return function(t){for(var r=[],i=null;t.length;){try{i=n.call(this,t)}catch(u){r.push(i[0]);t=i[1];continue}break}return[r,t]}},many:function(n){return function(t){for(var i=[],r=null;t.length;){try{r=n.call(this,t)}catch(u){return[i,t]}i.push(r[0]);t=r[1]}return[i,t]}},optional:function(n){return function(t){var i=null;try{i=n.call(this,t)}catch(r){return[null,t]}return[i[0],i[1]]}},not:function(n){return function(i){try{n.call(this,i)}catch(r){return[null,i]}throw new t.Exception(i);}},ignore:function(n){return n?function(t){var i=null;return i=n.call(this,t),[null,i[1]]}:null},product:function(){for(var i=arguments[0],u=Array.prototype.slice.call(arguments,1),r=[],t=0;t<i.length;t++)r.push(n.each(i[t],u));return r},cache:function(n){var r={},i=null;return function(u){try{i=r[u]=r[u]||n.call(this,u)}catch(f){i=r[u]=f}if(i instanceof t.Exception)throw i;else return i}},any:function(){var n=arguments;return function(i){for(var r=null,u=0;u<n.length;u++)if(n[u]!=null){try{r=n[u].call(this,i)}catch(f){r=null}if(r)return r}throw new t.Exception(i);}},each:function(){var n=arguments;return function(i){for(var f=[],u=null,r=0;r<n.length;r++)if(n[r]!=null){try{u=n[r].call(this,i)}catch(e){throw new t.Exception(i);}f.push(u[0]);i=u[1]}return[f,i]}},all:function(){var t=arguments,n=n;return n.each(n.optional(t))},sequence:function(i,r,u){return(r=r||n.rtoken(/^\s*/),u=u||null,i.length==1)?i[0]:function(n){for(var f=null,e=null,s=[],o=0;o<i.length;o++){try{f=i[o].call(this,n)}catch(h){break}s.push(f[0]);try{e=r.call(this,f[1])}catch(c){e=null;break}n=e[1]}if(!f)throw new t.Exception(n);if(e)throw new t.Exception(e[1]);if(u)try{f=u.call(this,f[1])}catch(l){throw new t.Exception(f[1]);}return[s,f?f[1]:n]}},between:function(t,i,u){u=u||t;var f=n.each(n.ignore(t),i,n.ignore(u));return function(n){var t=f.call(this,n);return[[t[0][0],r[0][2]],t[1]]}},list:function(t,i,r){return i=i||n.rtoken(/^\s*/),r=r||null,t instanceof Array?n.each(n.product(t.slice(0,-1),n.ignore(i)),t.slice(-1),n.ignore(r)):n.each(n.many(n.each(t,n.ignore(i))),px,n.ignore(r))},set:function(i,r,u){return r=r||n.rtoken(/^\s*/),u=u||null,function(f){for(var y,a,s=null,l=null,h=null,c=null,e=[[],f],o=!1,v=0;v<i.length;v++){h=null;l=null;s=null;o=i.length==1;try{s=i[v].call(this,f)}catch(p){continue}if(c=[[s[0]],s[1]],s[1].length>0&&!o)try{h=r.call(this,s[1])}catch(w){o=!0}else o=!0;if(o||h[1].length!==0||(o=!0),!o){for(y=[],a=0;a<i.length;a++)v!=a&&y.push(i[a]);l=n.set(y,r).call(this,h[1]);l[0].length>0&&(c[0]=c[0].concat(l[0]),c[1]=l[1])}if(c[1].length<e[1].length&&(e=c),e[1].length===0)break}if(e[0].length===0)return e;if(u){try{h=u.call(this,e[1])}catch(b){throw new t.Exception(e[1]);}e[1]=h[1]}return e}},forward:function(n,t){return function(i){return n[t].call(this,i)}},replace:function(n,t){return function(i){var r=n.call(this,i);return[t,r[1]]}},process:function(n,t){return function(i){var r=n.call(this,i);return[t.call(this,r[0]),r[1]]}},min:function(n,i){return function(r){var u=i.call(this,r);if(u[0].length<n)throw new t.Exception(r);return u}}},s=function(n){return function(){var t=null,u=[],i,r;if(arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]),t)for(i=0,r=t.shift();i<r.length;i++)return t.unshift(r[i]),u.push(n.apply(null,t)),t.shift(),u;else return n.apply(null,arguments)}},e="optional not ignore cache".split(/\s/);for(i=0;i<e.length;i++)n[e[i]]=s(n[e[i]]);for(o=function(n){return function(){return arguments[0]instanceof Array?n.apply(null,arguments[0]):n.apply(null,arguments)}},f="each any all".split(/\s/),u=0;u<f.length;u++)n[f[u]]=o(n[f[u]])}(),function(){var o=function(n){for(var i=[],t=0;t<n.length;t++)n[t]instanceof Array?i=i.concat(o(n[t])):n[t]&&i.push(n[t]);return i},u,f,e;Date.Grammar={};Date.Translator={hour:function(n){return function(){this.hour=Number(n)}},minute:function(n){return function(){this.minute=Number(n)}},second:function(n){return function(){this.second=Number(n)}},meridian:function(n){return function(){this.meridian=n.slice(0,1).toLowerCase()}},timezone:function(n){return function(){var t=n.replace(/[^\d\+\-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=n.toLowerCase()}},day:function(n){var t=n[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(n){return function(){this.month=n.length==3?Date.getMonthNumberFromName(n):Number(n)-1}},year:function(n){return function(){var t=Number(n);this.year=n.length>2?t:t+(t+2e3<Date.CultureInfo.twoDigitYearMax?2e3:1900)}},rday:function(n){return function(){switch(n){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=!0}}},finishExact:function(n){var r,t,i;for(n=n instanceof Array?n:[n],r=new Date,this.year=r.getFullYear(),this.month=r.getMonth(),this.day=1,this.hour=0,this.minute=0,this.second=0,t=0;t<n.length;t++)n[t]&&n[t].call(this);if(this.hour=this.meridian=="p"&&this.hour<13?this.hour+12:this.hour,this.day>Date.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");return i=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second),this.timezone?i.set({timezone:this.timezone}):this.timezoneOffset&&i.set({timezoneOffset:this.timezoneOffset}),i},finish:function(n){var f,r,t,u;if(n=n instanceof Array?o(n):[n],n.length===0)return null;for(f=0;f<n.length;f++)typeof n[f]=="function"&&n[f].call(this);if(this.now)return new Date;var i=Date.today(),e=!!(this.days!=null||this.orient||this.operator);return e?(u=this.orient=="past"||this.operator=="subtract"?-1:1,this.weekday&&(this.unit="day",r=Date.getDayNumberFromName(this.weekday)-i.getDay(),t=7,this.days=r?(r+u*t)%t:u*t),this.month&&(this.unit="month",r=this.month-i.getMonth(),t=12,this.months=r?(r+u*t)%t:u*t,this.month=null),this.unit||(this.unit="day"),(this[this.unit+"s"]==null||this.operator!=null)&&(this.value||(this.value=1),this.unit=="week"&&(this.unit="day",this.value=this.value*7),this[this.unit+"s"]=this.value*u),i.add(this)):(this.meridian&&this.hour&&(this.hour=this.hour<13&&this.meridian=="p"?this.hour+12:this.hour),this.weekday&&!this.day&&(this.day=i.addDays(Date.getDayNumberFromName(this.weekday)-i.getDay()).getDate()),this.month&&!this.day&&(this.day=1),i.set(this))}};var t=Date.Parsing.Operators,n=Date.Grammar,i=Date.Translator,r;n.datePartDelimiter=t.rtoken(/^([\s\-\.\,\/\x27]+)/);n.timePartDelimiter=t.stoken(":");n.whiteSpace=t.rtoken(/^\s*/);n.generalDelimiter=t.rtoken(/^(([\s\,]|at|on)+)/);u={};n.ctoken=function(n){var r=u[n],i;if(!r){var o=Date.CultureInfo.regexPatterns,f=n.split(/\s+/),e=[];for(i=0;i<f.length;i++)e.push(t.replace(t.rtoken(o[f[i]]),f[i]));r=u[n]=t.any.apply(null,e)}return r};n.ctoken2=function(n){return t.rtoken(Date.CultureInfo.regexPatterns[n])};n.h=t.cache(t.process(t.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),i.hour));n.hh=t.cache(t.process(t.rtoken(/^(0[0-9]|1[0-2])/),i.hour));n.H=t.cache(t.process(t.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),i.hour));n.HH=t.cache(t.process(t.rtoken(/^([0-1][0-9]|2[0-3])/),i.hour));n.m=t.cache(t.process(t.rtoken(/^([0-5][0-9]|[0-9])/),i.minute));n.mm=t.cache(t.process(t.rtoken(/^[0-5][0-9]/),i.minute));n.s=t.cache(t.process(t.rtoken(/^([0-5][0-9]|[0-9])/),i.second));n.ss=t.cache(t.process(t.rtoken(/^[0-5][0-9]/),i.second));n.hms=t.cache(t.sequence([n.H,n.mm,n.ss],n.timePartDelimiter));n.t=t.cache(t.process(n.ctoken2("shortMeridian"),i.meridian));n.tt=t.cache(t.process(n.ctoken2("longMeridian"),i.meridian));n.z=t.cache(t.process(t.rtoken(/^(\+|\-)?\s*\d\d\d\d?/),i.timezone));n.zz=t.cache(t.process(t.rtoken(/^(\+|\-)\s*\d\d\d\d/),i.timezone));n.zzz=t.cache(t.process(n.ctoken2("timezone"),i.timezone));n.timeSuffix=t.each(t.ignore(n.whiteSpace),t.set([n.tt,n.zzz]));n.time=t.each(t.optional(t.ignore(t.stoken("T"))),n.hms,n.timeSuffix);n.d=t.cache(t.process(t.each(t.rtoken(/^([0-2]\d|3[0-1]|\d)/),t.optional(n.ctoken2("ordinalSuffix"))),i.day));n.dd=t.cache(t.process(t.each(t.rtoken(/^([0-2]\d|3[0-1])/),t.optional(n.ctoken2("ordinalSuffix"))),i.day));n.ddd=n.dddd=t.cache(t.process(n.ctoken("sun mon tue wed thu fri sat"),function(n){return function(){this.weekday=n}}));n.M=t.cache(t.process(t.rtoken(/^(1[0-2]|0\d|\d)/),i.month));n.MM=t.cache(t.process(t.rtoken(/^(1[0-2]|0\d)/),i.month));n.MMM=n.MMMM=t.cache(t.process(n.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),i.month));n.y=t.cache(t.process(t.rtoken(/^(\d\d?)/),i.year));n.yy=t.cache(t.process(t.rtoken(/^(\d\d)/),i.year));n.yyy=t.cache(t.process(t.rtoken(/^(\d\d?\d?\d?)/),i.year));n.yyyy=t.cache(t.process(t.rtoken(/^(\d\d\d\d)/),i.year));r=function(){return t.each(t.any.apply(null,arguments),t.not(n.ctoken2("timeContext")))};n.day=r(n.d,n.dd);n.month=r(n.M,n.MMM);n.year=r(n.yyyy,n.yy);n.orientation=t.process(n.ctoken("past future"),function(n){return function(){this.orient=n}});n.operator=t.process(n.ctoken("add subtract"),function(n){return function(){this.operator=n}});n.rday=t.process(n.ctoken("yesterday tomorrow today now"),i.rday);n.unit=t.process(n.ctoken("minute hour day week month year"),function(n){return function(){this.unit=n}});n.value=t.process(t.rtoken(/^\d\d?(st|nd|rd|th)?/),function(n){return function(){this.value=n.replace(/\D/g,"")}});n.expression=t.set([n.rday,n.operator,n.value,n.unit,n.orientation,n.ddd,n.MMM]);r=function(){return t.set(arguments,n.datePartDelimiter)};n.mdy=r(n.ddd,n.month,n.day,n.year);n.ymd=r(n.ddd,n.year,n.month,n.day);n.dmy=r(n.ddd,n.day,n.month,n.year);n.date=function(t){return(n[Date.CultureInfo.dateElementOrder]||n.mdy).call(this,t)};n.format=t.process(t.many(t.any(t.process(t.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(t){if(n[t])return n[t];throw Date.Parsing.Exception(t);}),t.process(t.rtoken(/^[^dMyhHmstz]+/),function(n){return t.ignore(t.stoken(n))}))),function(n){return t.process(t.each.apply(null,n),i.finishExact)});f={};e=function(t){return f[t]=f[t]||n.format(t)[0]};n.formats=function(n){var r,i;if(n instanceof Array){for(r=[],i=0;i<n.length;i++)r.push(e(n[i]));return t.any.apply(null,r)}return e(n)};n._formats=n.formats(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]);n._start=t.process(t.set([n.date,n.time,n.expression],n.generalDelimiter,n.whiteSpace),i.finish);n.start=function(t){try{var i=n._formats.call({},t);if(i[1].length===0)return i}catch(r){}return n._start.call({},t)}}(),Date._parse=Date.parse,Date.parse=function(n){var t=null;if(!n)return null;try{t=Date.Grammar.start.call({},n)}catch(i){return null}return t[1].length===0?t[0]:null},Date.getParseFunction=function(n){var t=Date.Grammar.formats(n);return function(n){var i=null;try{i=t.call({},n)}catch(r){return null}return i[1].length===0?i[0]:null}},Date.parseExact=function(n,t){return Date.getParseFunction(t)(n)}),function(n,t){function o(n){return!!(n===""||n&&n.charCodeAt&&n.substr)}function u(n){return a?a(n):v.call(n)==="[object Array]"}function s(n){return n&&v.call(n)==="[object Object]"}function h(n,t){var i;n=n||{};t=t||{};for(i in t)t.hasOwnProperty(i)&&n[i]==null&&(n[i]=t[i]);return n}function r(n,t,i){var u=[],r,f;if(!n)return u;if(l&&n.map===l)return n.map(t,i);for(r=0,f=n.length;r<f;r++)u[r]=t.call(i,n[r],r,n);return u}function f(n,t){return n=Math.round(Math.abs(n)),isNaN(n)?t:n}function y(n){var t=i.settings.currency.format;return(typeof n=="function"&&(n=n()),o(n)&&n.match("%n"))?{pos:n,neg:n.replace("-","").replace("%n","-%n"),zero:n}:!n||!n.pos||!n.pos.match("%n")?o(t)?i.settings.currency.format={pos:t,neg:t.replace("%n","-%n"),zero:t}:t:n}var i={};i.version="0.3.2";i.settings={currency:{symbol:"$",format:"%u%n",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var l=Array.prototype.map,a=Array.isArray,v=Object.prototype.toString;var e=i.unformat=i.parse=function(n,t){if(u(n))return r(n,function(n){return e(n,t)});if(n=n||0,typeof n=="number")return n;t=t||i.settings.number.decimal;var o=new RegExp("[^0-9-"+t+"]",["g"]),f=parseFloat((""+n).replace(/\((.*)\)/,"-$1").replace(o,"").replace(t,"."));return isNaN(f)?0:f},p=i.toFixed=function(n,t){t=f(t,i.settings.number.precision);var r=Math.pow(10,t);return(Math.round(i.unformat(n)*r)/r).toFixed(t)},c=i.formatNumber=function(n,t,o,l){if(u(n))return r(n,function(n){return c(n,t,o,l)});n=e(n);var a=h(s(t)?t:{precision:t,thousand:o,decimal:l},i.settings.number),y=f(a.precision),b=n<0?"-":"",v=parseInt(p(Math.abs(n||0),y),10)+"",w=v.length>3?v.length%3:0;return b+(w?v.substr(0,w)+a.thousand:"")+v.substr(w).replace(/(\d{3})(?=\d)/g,"$1"+a.thousand)+(y?a.decimal+p(Math.abs(n),y).split(".")[1]:"")},w=i.formatMoney=function(n,t,o,l,a,v){if(u(n))return r(n,function(n){return w(n,t,o,l,a,v)});n=e(n);var p=h(s(t)?t:{symbol:t,precision:o,thousand:l,decimal:a,format:v},i.settings.currency),b=y(p.format),k=n>0?b.pos:n<0?b.neg:b.zero;return k.replace("%u",p.symbol).replace("%n",c(Math.abs(n),f(p.precision),p.thousand,p.decimal))};i.formatColumn=function(n,t,l,a,v,p){if(!n)return[];var w=h(s(t)?t:{symbol:t,precision:l,thousand:a,decimal:v,format:p},i.settings.currency),b=y(w.format),d=b.pos.indexOf("%u")<b.pos.indexOf("%n")?!0:!1,k=0,g=r(n,function(n){if(u(n))return i.formatColumn(n,w);n=e(n);var r=n>0?b.pos:n<0?b.neg:b.zero,t=r.replace("%u",w.symbol).replace("%n",c(Math.abs(n),f(w.precision),w.thousand,w.decimal));return t.length>k&&(k=t.length),t});return r(g,function(n){return o(n)&&n.length<k?d?n.replace(w.symbol,w.symbol+new Array(k-n.length+1).join(" ")):new Array(k-n.length+1).join(" ")+n:n})};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=i),exports.accounting=i):typeof define=="function"&&define.amd?define([],function(){return i}):(i.noConflict=function(r){return function(){return n.accounting=r,i.noConflict=t,i}}(n.accounting),n.accounting=i)}(this),function(){function e(n,t){var i;n||(n={});for(i in t)n[i]=t[i];return n}function o(){for(var r=arguments.length,t={},i=function(n,t){var r;for(var u in t)t.hasOwnProperty(u)&&(r=t[u],typeof n!="object"&&(n={}),n[u]=r&&typeof r=="object"&&Object.prototype.toString.call(r)!=="[object Array]"&&typeof r.nodeType!="number"?i(n[u]||{},r):t[u]);return n},n=0;n<r;n++)t=i(t,arguments[n]);return t}function s(n,t){return parseInt(n,t||10)}function wt(n){return typeof n=="string"}function ot(n){return typeof n=="object"}function gi(n){return Object.prototype.toString.call(n)==="[object Array]"}function nr(n){return typeof n=="number"}function ii(n){return w.log(n)/w.LN10}function yt(n){return w.pow(10,n)}function bt(n,t){for(var i=n.length;i--;)if(n[i]===t){n.splice(i,1);break}}function r(n){return n!==f&&n!==null}function h(n,t,i){var u,f;if(wt(t))r(i)?n.setAttribute(t,i):n&&n.getAttribute&&(f=n.getAttribute(t));else if(r(t)&&ot(t))for(u in t)n.setAttribute(u,t[u]);return f}function kt(n){return gi(n)?n:[n]}function n(){for(var i=arguments,t,r=i.length,n=0;n<r;n++)if(t=i[n],typeof t!="undefined"&&t!==null)return t}function p(n,t){er&&t&&t.opacity!==f&&(t.filter="alpha(opacity="+t.opacity*100+")");e(n.style,t)}function ut(n,t,i,r,u){return n=c.createElement(n),t&&e(n,t),u&&p(n,{padding:0,border:rt,margin:0}),i&&p(n,i),r&&r.appendChild(n),n}function pt(n,t){var i=function(){};return i.prototype=new n,e(i.prototype,t),i}function li(n,t,i,r){var u=nt.lang,f=t===-1?((n||0).toString().split(".")[1]||"").length:isNaN(t=b(t))?2:t,t=i===void 0?u.decimalPoint:i,r=r===void 0?u.thousandsSep:r,u=n<0?"-":"",i=String(s(n=b(+n||0).toFixed(f))),e=i.length>3?i.length%3:0;return u+(e?i.substr(0,e)+r:"")+i.substr(e).replace(/(\d{3})(?=\d)/g,"$1"+r)+(f?t+b(n-i).toFixed(f).slice(2):"")}function ai(n,t){return Array((t||2)+1-String(n).length).join(0)+n}function tf(n,t,i){var r=n[t];n[t]=function(){var n=Array.prototype.slice.call(arguments);return n.unshift(r),i.apply(this,n)}}function vi(n,t){for(var e="{",s=!1,i,r,o,u,f,h=[];(e=n.indexOf(e))!==-1;){if(i=n.slice(0,e),s){for(r=i.split(":"),o=r.shift().split("."),f=o.length,i=t,u=0;u<f;u++)i=i[o[u]];r.length&&(r=r.join(":"),o=/\.([0-9])/,u=nt.lang,f=void 0,/f$/.test(r)?(f=(f=r.match(o))?f[1]:-1,i=li(i,f,u.decimalPoint,r.indexOf(",")>-1?u.thousandsSep:"")):i=nu(r,i))}h.push(i);n=n.slice(e+1);e=(s=!s)?"}":"{"}return h.push(n),h.join("")}function ou(t,i,r,u){var f,r=n(r,1);for(f=t/r,i||(i=[1,2,2.5,5,10],u&&u.allowDecimals===!1&&(r===1?i=[1,2,5,10]:r<=.1&&(i=[1/r]))),u=0;u<i.length;u++)if(t=i[u],f<=(i[u]+(i[u+1]||i[u]))/2)break;return t*r}function rf(n,t){for(var i=t||[[vf,[1,2,5,10,20,25,50,100,200,500]],[pu,[1,2,5,10,15,30]],[tu,[1,2,5,10,15,30]],[cr,[1,2,3,4,6,8,12]],[hi,[1,2]],[iu,[1,2]],[lr,[1,2,3,4,6]],[ki,null]],u=i[i.length-1],r=l[u[0]],f=u[1],e=0;e<i.length;e++)if(u=i[e],r=l[u[0]],f=u[1],i[e+1]&&n<=(r*f[f.length-1]+l[i[e+1][0]])/2)break;return r===l[ki]&&n<5*r&&(f=[1,2,5]),r===l[ki]&&n<5*r&&(f=[1,2,5]),i=ou(n/r,f),{unitRange:r,count:i,unitName:u[0]}}function uf(i,u,f,o){var v=[],y={},p=nt.global.useUTC,a,s=new Date(u),h=i.unitRange,c=i.count;if(r(u)){h>=l[pu]&&(s.setMilliseconds(0),s.setSeconds(h>=l[tu]?0:c*it(s.getSeconds()/c)));h>=l[tu]&&s[pf](h>=l[cr]?0:c*it(s[wu]()/c));h>=l[cr]&&s[wf](h>=l[hi]?0:c*it(s[bu]()/c));h>=l[hi]&&s[du](h>=l[lr]?1:c*it(s[ar]()/c));h>=l[lr]&&(s[bf](h>=l[ki]?0:c*it(s[uu]()/c)),a=s[fu]());h>=l[ki]&&(a-=a%c,s[kf](a));h===l[iu]&&s[du](s[ar]()-s[ku]()+n(o,1));u=1;a=s[fu]();for(var o=s.getTime(),w=s[uu](),b=s[ar](),k=p?0:(864e5+s.getTimezoneOffset()*6e4)%864e5;o<f;)v.push(o),h===l[ki]?o=ru(a+u*c,0):h===l[lr]?o=ru(a,w+u*c):!p&&(h===l[hi]||h===l[iu])?o=ru(a,w,b+u*c*(h===l[hi]?1:7)):o+=h*c,u++;v.push(o);t(gu(v,function(n){return h<=l[cr]&&n%l[hi]===k}),function(n){y[n]=hi})}return v.info=e(i,{higherRanks:y,totalRange:h*c}),v}function ff(){this.symbol=this.color=0}function ef(n,t){for(var u=n.length,r,i=0;i<u;i++)n[i].ss_i=i;for(n.sort(function(n,i){return r=t(n,i),r===0?n.ss_i-i.ss_i:r}),i=0;i<u;i++)delete n[i].ss_i}function tr(n){for(var t=n.length,i=n[0];t--;)n[t]<i&&(i=n[t]);return i}function ui(n){for(var t=n.length,i=n[0];t--;)n[t]>i&&(i=n[t]);return i}function ir(n,t){for(var i in n)n[i]&&n[i]!==t&&n[i].destroy&&n[i].destroy(),delete n[i]}function sr(n){gr||(gr=ut(bi));n&&gr.appendChild(n);gr.innerHTML=""}function fi(n,t){var i="Highcharts error #"+n+": www.highcharts.com/errors/"+n;if(t)throw i;else g.console&&console.log(i)}function dt(n){return parseFloat(n.toPrecision(14))}function rr(t,i){pi=n(t,i.animation)}function of(){var r=nt.global.useUTC,t=r?"getUTC":"get",i=r?"setUTC":"set";ru=r?Date.UTC:function(t,i,r,u,f,e){return new Date(t,i,n(r,1),n(u,0),n(f,0),n(e,0)).getTime()};wu=t+"Minutes";bu=t+"Hours";ku=t+"Day";ar=t+"Date";uu=t+"Month";fu=t+"FullYear";pf=i+"Minutes";wf=i+"Hours";du=i+"Date";bf=i+"Month";kf=i+"FullYear"}function ei(){}function ur(n,t,i,r){this.axis=n;this.pos=t;this.type=i||"";this.isNew=!0;i||r||this.addLabel()}function su(n,t){this.axis=n;t&&(this.options=t,this.id=t.id)}function sf(t,i,r,u,f,e){var o=t.chart.inverted;this.axis=t;this.isNegative=r;this.options=i;this.x=u;this.stack=f;this.percent=e==="percent";this.alignOptions={align:i.align||(o?r?"left":"right":"center"),verticalAlign:i.verticalAlign||(o?"middle":r?"bottom":"top"),y:n(i.y,o?4:r?14:-6),x:n(i.x,o?r?-6:6:0)};this.textAlign=i.textAlign||(o?r?"right":"left":"center")}function yr(){this.init.apply(this,arguments)}function hu(){this.init.apply(this,arguments)}function cu(n,t){this.init(n,t)}function lu(n,t){this.init(n,t)}function au(){this.init.apply(this,arguments)}var f,c=document,g=window,w=Math,u=w.round,it=w.floor,gt=w.ceil,i=w.max,v=w.min,b=w.abs,st=w.cos,vt=w.sin,fr=w.PI,pr=fr/180,yi=navigator.userAgent,hf=g.opera,er=/msie/i.test(yi)&&!hf,wr=c.documentMode===8,br=/AppleWebKit/.test(yi),kr=/Firefox/.test(yi),cf=/(Mobile|Android|Windows Phone)/.test(yi),oi="http://www.w3.org/2000/svg",ht=!!c.createElementNS&&!!c.createElementNS(oi,"svg").createSVGRect,ne=kr&&parseInt(yi.split("Firefox/")[1],10)<4,ct=!ht&&!er&&!!c.createElement("canvas").getContext,hr,dr=c.documentElement.ontouchstart!==f,lf={},vu=0,gr,nt,nu,pi,yu,l,si=function(){},wi=[],bi="div",rt="none",af="rgba(192,192,192,"+(ht?.0001:.002)+")",vf="millisecond",pu="second",tu="minute",cr="hour",hi="day",iu="week",lr="month",ki="year",yf="stroke-width",ru,wu,bu,ku,ar,uu,fu,pf,wf,du,bf,kf,lt={},y,et,ft,ni,ci,d,ti,gf,di,tt;g.Highcharts=g.Highcharts?fi(16,!0):{};nu=function(t,i,f){if(!r(i)||isNaN(i))return"Invalid date";var t=n(t,"%Y-%m-%d %H:%M:%S"),o=new Date(i),s,h=o[bu](),a=o[ku](),v=o[ar](),c=o[uu](),y=o[fu](),l=nt.lang,p=l.weekdays,o=e({a:p[a].substr(0,3),A:p[a],d:ai(v),e:v,b:l.shortMonths[c],B:l.months[c],m:ai(c+1),y:y.toString().substr(2,2),Y:y,H:ai(h),I:ai(h%12||12),l:h%12||12,M:ai(o[wu]()),p:h<12?"AM":"PM",P:h<12?"am":"pm",S:ai(o.getSeconds()),L:ai(u(i%1e3),3)},Highcharts.dateFormats);for(s in o)for(;t.indexOf("%"+s)!==-1;)t=t.replace("%"+s,typeof o[s]=="function"?o[s](i):o[s]);return f?t.substr(0,1).toUpperCase()+t.substr(1):t};ff.prototype={wrapColor:function(n){this.color>=n&&(this.color=0)},wrapSymbol:function(n){this.symbol>=n&&(this.symbol=0)}};l=function(){for(var n=0,t=arguments,r=t.length,i={};n<r;n++)i[t[n++]]=t[n];return i}(vf,1,pu,1e3,tu,6e4,cr,36e5,hi,864e5,iu,6048e5,lr,26784e5,ki,31556952e3);yu={init:function(n,t,i){var t=t||"",r=n.shift,e=t.indexOf("C")>-1,u=e?7:3,f,t=t.split(" "),i=[].concat(i),o,s,h=function(n){for(f=n.length;f--;)n[f]==="M"&&n.splice(f+1,0,n[f+1],n[f+2],n[f+1],n[f+2])};if(e&&(h(t),h(i)),n.isArea&&(o=t.splice(t.length-6,6),s=i.splice(i.length-6,6)),r<=i.length/u)for(;r--;)i=[].concat(i).splice(0,u).concat(i);if(n.shift=0,t.length)for(n=i.length;t.length<n;)r=[].concat(t).splice(t.length-u,u),e&&(r[u-6]=r[u-2],r[u-5]=r[u-1]),t=t.concat(r);return o&&(t=t.concat(o),i=i.concat(s)),[t,i]},step:function(n,t,i,r){var f=[],u=n.length;if(i===1)f=r;else if(u===t.length&&i<1)for(;u--;)r=parseFloat(n[u]),f[u]=isNaN(r)?n[u]:i*parseFloat(t[u]-r)+r;else f=t;return f}},function(n){g.HighchartsAdapter=g.HighchartsAdapter||n&&{init:function(t){var u=n.fx,e=u.step,i,r=n.Tween,o=r&&r.propHooks;i=n.cssHooks.opacity;n.extend(n.easing,{easeOutQuad:function(n,t,i,r,u){return-r*(t/=u)*(t-2)+i}});n.each(["cur","_default","width","height","opacity"],function(n,t){var i=e,h,s;t==="cur"?i=u.prototype:t==="_default"&&r&&(i=o[t],t="set");(h=i[t])&&(i[t]=function(i){return i=n?i:this,s=i.elem,s.attr?s.attr(i.prop,t==="cur"?f:i.now):h.apply(this,arguments)})});tf(i,"get",function(n,t,i){return t.attr?t.opacity||0:n.call(this,t,i)});i=function(n){var i=n.elem,r;n.started||(r=t.init(i,i.d,i.toD),n.start=r[0],n.end=r[1],n.started=!0);i.attr("d",t.step(n.start,n.end,n.pos,i.toD))};r?o.d={set:i}:e.d=i;this.each=Array.prototype.forEach?function(n,t){return Array.prototype.forEach.call(n,t)}:function(n,t){for(var i=0,r=n.length;i<r;i++)if(t.call(n[i],n[i],i,n)===!1)return i};n.fn.highcharts=function(){var r="Chart",t=arguments,n,i;return wt(t[0])&&(r=t[0],t=Array.prototype.slice.call(t,1)),n=t[0],n!==f&&(n.chart=n.chart||{},n.chart.renderTo=this[0],new Highcharts[r](n,t[1]),i=this),n===f&&(i=wi[h(this[0],"data-highcharts-chart")]),i}},getScript:n.getScript,inArray:n.inArray,adapterRun:function(t,i){return n(t)[i]()},grep:n.grep,map:function(n,t){for(var r=[],i=0,u=n.length;i<u;i++)r[i]=t.call(n[i],n[i],i,n);return r},offset:function(t){return n(t).offset()},addEvent:function(t,i,r){n(t).bind(i,r)},removeEvent:function(t,i,r){var u=c.removeEventListener?"removeEventListener":"detachEvent";c[u]&&t&&!t[u]&&(t[u]=function(){});n(t).unbind(i,r)},fireEvent:function(t,i,r,u){var f=n.Event(i),o="detached"+i,s;!er&&r&&(delete r.layerX,delete r.layerY);e(f,r);t[i]&&(t[o]=t[i],t[i]=null);n.each(["preventDefault","stopPropagation"],function(n,t){var i=f[t];f[t]=function(){try{i.call(f)}catch(n){t==="preventDefault"&&(s=!0)}}});n(t).trigger(f);t[o]&&(t[i]=t[o],t[o]=null);!u||f.isDefaultPrevented()||s||u(f)},washMouseEvent:function(n){var t=n.originalEvent||n;return t.pageX===f&&(t.pageX=n.pageX,t.pageY=n.pageY),t},animate:function(t,i,r){var u=n(t);t.style||(t.style={});i.d&&(t.toD=i.d,i.d=1);u.stop();u.animate(i,r)},stop:function(t){n(t).stop()}}}(g.jQuery);ft=g.HighchartsAdapter;y=ft||{};ft&&ft.init.call(ft,yu);var eu=y.adapterRun,te=y.getScript,ri=y.inArray,t=y.each,gu=y.grep,ie=y.offset,or=y.map,k=y.addEvent,at=y.removeEvent,a=y.fireEvent,df=y.washMouseEvent,nf=y.animate,vr=y.stop,y={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",cursor:"default",fontSize:"11px",lineHeight:"14px"}};nt={colors:"#2f7ed8,#0d233a,#8bbc21,#910000,#1aadce,#492970,#f28f43,#77a1e5,#c42525,#a6c96a".split(","),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",numericSymbols:"k,M,G,T,P,E".split(","),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/3.0.2/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/3.0.2/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#274b6d",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#4d759e"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:o(y,{enabled:!1,formatter:function(){return li(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#274b6d",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"1em"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:ht,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}<\/span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}<\/span>: <b>{point.y}<\/b><br/>',shadow:!0,snap:cf?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};et=nt.plotOptions;ft=et.line;of();ni=function(n){var i=[],r,u;return function(n){n&&n.stops?u=or(n.stops,function(n){return ni(n[1])}):(r=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(n))?i=[s(r[1]),s(r[2]),s(r[3]),parseFloat(r[4],10)]:(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n))?i=[s(r[1],16),s(r[2],16),s(r[3],16),1]:(r=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n))&&(i=[s(r[1]),s(r[2]),s(r[3]),1])}(n),{get:function(r){var f;return u?(f=o(n),f.stops=[].concat(f.stops),t(u,function(n,t){f.stops[t]=[f.stops[t][0],n.get(r)]})):f=i&&!isNaN(i[0])?r==="rgb"?"rgb("+i[0]+","+i[1]+","+i[2]+")":r==="a"?i[3]:"rgba("+i.join(",")+")":n,f},brighten:function(n){if(u)t(u,function(t){t.brighten(n)});else if(nr(n)&&n!==0)for(var r=0;r<3;r++)i[r]+=s(n*255),i[r]<0&&(i[r]=0),i[r]>255&&(i[r]=255);return this},rgba:i,setOpacity:function(n){return i[3]=n,this}}};ei.prototype={init:function(n,t){this.element=t==="span"?ut(t):c.createElementNS(oi,t);this.renderer=n;this.attrSetters={}},opacity:1,animate:function(t,i,r){i=n(i,pi,!0);vr(this);i?(i=o(i),r&&(i.complete=r),nf(this,t,i)):(this.attr(t),r&&r())},attr:function(n,t){var u,e,o,w,l=this.element,v=l.nodeName.toLowerCase(),b=this.renderer,a,d=this.attrSetters,y=this.shadows,g,k,p=this;if(wt(n)&&r(t)&&(u=n,n={},n[u]=t),wt(n))u=n,v==="circle"?u={x:"cx",y:"cy"}[u]||u:u==="strokeWidth"&&(u="stroke-width"),p=h(l,u)||this[u]||0,u!=="d"&&u!=="visibility"&&(p=parseFloat(p));else{for(u in n)if(a=!1,e=n[u],o=d[u]&&d[u].call(this,e,u),o!==!1){if(o!==f&&(e=o),u==="d")e&&e.join&&(e=e.join(" ")),/(NaN| {2}|^$)/.test(e)&&(e="M 0 0");else if(u==="x"&&v==="text")for(o=0;o<l.childNodes.length;o++)w=l.childNodes[o],h(w,"x")===h(l,"x")&&h(w,"x",e);else if(this.rotation&&(u==="x"||u==="y"))k=!0;else if(u==="fill")e=b.color(e,l,u);else if(v==="circle"&&(u==="x"||u==="y"))u={x:"cx",y:"cy"}[u]||u;else if(v==="rect"&&u==="r")h(l,{rx:e,ry:e}),a=!0;else if(u==="translateX"||u==="translateY"||u==="rotation"||u==="verticalAlign"||u==="scaleX"||u==="scaleY")a=k=!0;else if(u==="stroke")e=b.color(e,l,u);else if(u==="dashstyle"){if(u="stroke-dasharray",e=e&&e.toLowerCase(),e==="solid")e=rt;else if(e){for(e=e.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),o=e.length;o--;)e[o]=s(e[o])*n["stroke-width"];e=e.join(",")}}else u==="width"?e=s(e):u==="align"?(u="text-anchor",e={left:"start",center:"middle",right:"end"}[e]):u==="title"&&(o=l.getElementsByTagName("title")[0],o||(o=c.createElementNS(oi,"title"),l.appendChild(o)),o.textContent=e);if(u==="strokeWidth"&&(u="stroke-width"),(u==="stroke-width"||u==="stroke")&&(this[u]=e,this.stroke&&this["stroke-width"]?(h(l,"stroke",this.stroke),h(l,"stroke-width",this["stroke-width"]),this.hasStroke=!0):u==="stroke-width"&&e===0&&this.hasStroke&&(l.removeAttribute("stroke"),this.hasStroke=!1),a=!0),this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(u)&&(g||(this.symbolAttr(n),g=!0),a=!0),y&&/^(width|height|visibility|x|y|d|transform)$/.test(u))for(o=y.length;o--;)h(y[o],u,u==="height"?i(e-(y[o].cutHeight||0),0):e);(u==="width"||u==="height")&&v==="rect"&&e<0&&(e=0);this[u]=e;u==="text"?(e!==this.textStr&&delete this.bBox,this.textStr=e,this.added&&b.buildText(this)):a||h(l,u,e)}k&&this.updateTransform()}return p},addClass:function(n){return h(this.element,"class",h(this.element,"class")+" "+n),this},symbolAttr:function(i){var r=this;t("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(t){r[t]=n(i[t],r[t])});r.attr({d:r.renderer.symbols[r.symbolName](r.x,r.y,r.width,r.height,r)})},clip:function(n){return this.attr("clip-path",n?"url("+this.renderer.url+"#"+n.id+")":rt)},crisp:function(n,t,i,r,f){var o,h={},e={},s,n=n||this.strokeWidth||this.attr&&this.attr("stroke-width")||0;s=u(n)%2/2;e.x=it(t||this.x||0)+s;e.y=it(i||this.y||0)+s;e.width=it((r||this.width||0)-2*s);e.height=it((f||this.height||0)-2*s);e.strokeWidth=n;for(o in e)this[o]!==e[o]&&(this[o]=h[o]=e[o]);return h},css:function(n){var r=this.element,t=n&&n.width&&r.nodeName.toLowerCase()==="text",i,u="",f=function(n,t){return"-"+t.toLowerCase()};if(n&&n.color&&(n.fill=n.color),this.styles=n=e(this.styles,n),ct&&t&&delete n.width,er&&!ht)t&&delete n.width,p(this.element,n);else{for(i in n)u+=i.replace(/([A-Z])/g,f)+":"+n[i]+";";h(r,"style",u)}return t&&this.added&&this.renderer.buildText(this),this},on:function(n,t){return dr&&n==="click"&&(this.element.ontouchstart=function(n){n.preventDefault();t()}),this.element["on"+n]=t,this},setRadialReference:function(n){return this.element.radialReference=n,this},translate:function(n,t){return this.attr({translateX:n,translateY:t})},invert:function(){return this.inverted=!0,this.updateTransform(),this},htmlCss:function(n){var t=this.element;return(t=n&&t.tagName==="SPAN"&&n.width)&&(delete n.width,this.textWidth=t,this.updateTransform()),this.styles=e(this.styles,n),p(this.element,n),this},htmlGetBBox:function(){var n=this.element,t=this.bBox;return t||(n.nodeName==="text"&&(n.style.position="absolute"),t=this.bBox={x:n.offsetLeft,y:n.offsetTop,width:n.offsetWidth,height:n.offsetHeight}),t},htmlUpdateTransform:function(){if(this.added){var w=this.renderer,i=this.element,k=this.translateX||0,d=this.translateY||0,nt=this.x||0,tt=this.y||0,a=this.textAlign||"left",l={left:0,center:.5,right:1}[a],it=a&&a!=="left",e=this.shadows;if(p(i,{marginLeft:k,marginTop:d}),e&&t(e,function(n){p(n,{marginLeft:k+1,marginTop:d+1})}),this.inverted&&t(i.childNodes,function(n){w.invertChild(n,i)}),i.tagName==="SPAN"){var u,y,e=this.rotation,o,f=0,h=1,f=0,b;o=s(this.textWidth);var c=this.xCorr||0,v=this.yCorr||0,g=[e,a,i.innerHTML,this.textWidth].join(",");u={};g!==this.cTT&&(r(e)&&(w.isSVG?(c=er?"-ms-transform":br?"-webkit-transform":kr?"MozTransform":hf?"-o-transform":"",u[c]=u.transform="rotate("+e+"deg)"):(f=e*pr,h=st(f),f=vt(f),u.filter=e?["progid:DXImageTransform.Microsoft.Matrix(M11=",h,", M12=",-f,", M21=",f,", M22=",h,", sizingMethod='auto expand')"].join(""):rt),p(i,u)),u=n(this.elemWidth,i.offsetWidth),y=n(this.elemHeight,i.offsetHeight),u>o&&/[ \-]/.test(i.textContent||i.innerText)&&(p(i,{width:o+"px",display:"block",whiteSpace:"normal"}),u=o),o=w.fontMetrics(i.style.fontSize).b,c=h<0&&-u,v=f<0&&-y,b=h*f<0,c+=f*o*(b?1-l:l),v-=h*o*(e?b?l:1-l:1),it&&(c-=u*l*(h<0?-1:1),e&&(v-=y*l*(f<0?-1:1)),p(i,{textAlign:a})),this.xCorr=c,this.yCorr=v);p(i,{left:nt+c+"px",top:tt+v+"px"});br&&(y=i.offsetHeight);this.cTT=g}}else this.alignOnAdd=!0},updateTransform:function(){var t=this.translateX||0,i=this.translateY||0,u=this.scaleX,f=this.scaleY,e=this.inverted,o=this.rotation;e&&(t+=this.attr("width"),i+=this.attr("height"));t=["translate("+t+","+i+")"];e?t.push("rotate(90) scale(-1,1)"):o&&t.push("rotate("+o+" "+(this.x||0)+" "+(this.y||0)+")");(r(u)||r(f))&&t.push("scale("+n(u,1)+" "+n(f,1)+")");t.length&&h(this.element,"transform",t.join(" "))},toFront:function(){var n=this.element;return n.parentNode.appendChild(n),this},align:function(t,i,r){var e,f,o,h,s={};return f=this.renderer,o=f.alignedObjects,t?(this.alignOptions=t,this.alignByTranslate=i,!r||wt(r))&&(this.alignTo=e=r||"renderer",bt(o,this),o.push(this),r=null):(t=this.alignOptions,i=this.alignByTranslate,e=this.alignTo),r=n(r,f[e],f),e=t.align,f=t.verticalAlign,o=(r.x||0)+(t.x||0),h=(r.y||0)+(t.y||0),(e==="right"||e==="center")&&(o+=(r.width-(t.width||0))/{right:1,center:2}[e]),s[i?"translateX":"x"]=u(o),(f==="bottom"||f==="middle")&&(h+=(r.height-(t.height||0))/({bottom:1,middle:2}[f]||1)),s[i?"translateY":"y"]=u(h),this[this.placed?"animate":"attr"](s),this.placed=!0,this.alignAttr=s,this},getBBox:function(){var n=this.bBox,i=this.renderer,t,f=this.rotation,u,r;if(t=this.element,u=this.styles,r=f*pr,!n){if(t.namespaceURI===oi||i.forExport){try{n=t.getBBox?e({},t.getBBox()):{width:t.offsetWidth,height:t.offsetHeight}}catch(o){}(!n||n.width<0)&&(n={width:0,height:0})}else n=this.htmlGetBBox();i.isSVG&&(i=n.width,t=n.height,er&&u&&u.fontSize==="11px"&&t.toPrecision(3)==="22.7"&&(n.height=t=14),f&&(n.width=b(t*vt(r))+b(i*st(r)),n.height=b(t*st(r))+b(i*vt(r))));this.bBox=n}return n},show:function(){return this.attr({visibility:"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(n){var t=this;t.animate({opacity:0},{duration:n||150,complete:function(){t.hide()}})},add:function(n){var i=this.renderer,t=n||i,e=t.element||i.box,o=e.childNodes,f=this.element,u=h(f,"zIndex"),c;if(n&&(this.parentGroup=n),this.parentInverted=n&&n.inverted,this.textStr!==void 0&&i.buildText(this),u&&(t.handleZ=!0,u=s(u)),t.handleZ)for(t=0;t<o.length;t++)if(n=o[t],i=h(n,"zIndex"),n!==f&&(s(i)>u||!r(u)&&r(i))){e.insertBefore(f,n);c=!0;break}return c||e.appendChild(f),this.added=!0,a(this,"add"),this},safeRemoveChild:function(n){var t=n.parentNode;t&&t.removeChild(n)},destroy:function(){var n=this,i=n.element||{},u=n.shadows,f,r;if(i.onclick=i.onmouseout=i.onmouseover=i.onmousemove=i.point=null,vr(n),n.clipPath&&(n.clipPath=n.clipPath.destroy()),n.stops){for(r=0;r<n.stops.length;r++)n.stops[r]=n.stops[r].destroy();n.stops=null}n.safeRemoveChild(i);u&&t(u,function(t){n.safeRemoveChild(t)});n.alignTo&&bt(n.renderer.alignedObjects,n);for(f in n)delete n[f];return null},shadow:function(t,r,u){var l=[],e,f,c=this.element,o,s,a,v;if(t){for(s=n(t.width,3),a=(t.opacity||.15)/s,v=this.parentInverted?"(-1,-1)":"("+n(t.offsetX,1)+", "+n(t.offsetY,1)+")",e=1;e<=s;e++)f=c.cloneNode(0),o=s*2+1-2*e,h(f,{isShadow:"true",stroke:t.color||"black","stroke-opacity":a*e,"stroke-width":o,transform:"translate"+v,fill:rt}),u&&(h(f,"height",i(h(f,"height")-o,0)),f.cutHeight=o),r?r.element.appendChild(f):c.parentNode.insertBefore(f,c),l.push(f);this.shadows=l}return this}};ci=function(){this.init.apply(this,arguments)};ci.prototype={Element:ei,init:function(n,t,i,r){var e=location,f,u;f=this.createElement("svg").attr({xmlns:oi,version:"1.1"});n.appendChild(f.element);this.isSVG=!0;this.box=f.element;this.boxWrapper=f;this.alignedObjects=[];this.url=(kr||br)&&c.getElementsByTagName("base").length?e.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"";this.createElement("desc").add().element.appendChild(c.createTextNode("Created with Highcharts 3.0.2"));this.defs=this.createElement("defs").add();this.forExport=r;this.gradients={};this.setSize(t,i,!1);kr&&n.getBoundingClientRect&&(this.subPixelFix=t=function(){p(n,{left:0,top:0});u=n.getBoundingClientRect();p(n,{left:gt(u.left)-u.left+"px",top:gt(u.top)-u.top+"px"})},t(),k(g,"resize",t))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var n=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),ir(this.gradients||{}),this.gradients=null,n&&(this.defs=n.destroy()),this.subPixelFix&&at(g,"resize",this.subPixelFix),this.alignedObjects=null},createElement:function(n){var t=new this.Element;return t.init(this,n),t},draw:function(){},buildText:function(i){for(var r=i.element,o=this,l=o.forExport,e=n(i.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"<\/span>").split(/<br.*?>/g),a=r.childNodes,v=/style="([^"]+)"/,y=/href="([^"]+)"/,w=h(r,"x"),u=i.styles,f=u&&u.width&&s(u.width),b=u&&u.lineHeight,k=a.length;k--;)r.removeChild(a[k]);f&&!i.added&&this.box.appendChild(r);e[e.length-1]===""&&e.pop();t(e,function(n,e){var s,a=0,n=n.replace(/<span/g,"|||<span").replace(/<\/span>/g,"<\/span>|||");s=n.split("|||");t(s,function(n){var k,t,g,n,nt,d;if((n!==""||s.length===1)&&(k={},t=c.createElementNS(oi,"tspan"),v.test(n)&&(g=n.match(v)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),h(t,"style",g)),y.test(n)&&!l&&(h(t,"onclick",'location.href="'+n.match(y)[1]+'"'),p(t,{cursor:"pointer"})),n=(n.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">"),t.appendChild(c.createTextNode(n)),a?k.dx=0:k.x=w,h(t,k),!a&&e&&(!ht&&l&&p(t,{display:"block"}),h(t,"dy",b||o.fontMetrics(/px$/.test(t.style.fontSize)?t.style.fontSize:u.fontSize).h,br&&t.offsetHeight)),r.appendChild(t),a++,f))for(n=n.replace(/([^\^])-/g,"$1- ").split(" "),d=[];n.length||d.length;)delete i.bBox,nt=i.getBBox().width,k=nt>f,!k||n.length===1?(n=d,d=[],n.length&&(t=c.createElementNS(oi,"tspan"),h(t,{dy:b||16,x:w}),g&&h(t,"style",g),r.appendChild(t),nt>f&&(f=nt))):(t.removeChild(t.firstChild),d.unshift(n.pop())),n.length&&t.appendChild(c.createTextNode(n.join(" ").replace(/- /g,"-")))})})},button:function(n,t,i,r,u,f,s){var h=this.label(n,t,i,null,null,null,null,null,"button"),l=0,y,p,c,a,v,n={x1:0,y1:0,x2:0,y2:1},u=o({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:n,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},u);return c=u.style,delete u.style,f=o(u,{stroke:"#68A",fill:{linearGradient:n,stops:[[0,"#FFF"],[1,"#ACF"]]}},f),a=f.style,delete f.style,s=o(u,{stroke:"#68A",fill:{linearGradient:n,stops:[[0,"#9BD"],[1,"#CDF"]]}},s),v=s.style,delete s.style,k(h.element,"mouseenter",function(){h.attr(f).css(a)}),k(h.element,"mouseleave",function(){y=[u,f,s][l];p=[c,a,v][l];h.attr(y).css(p)}),h.setState=function(n){(l=n)?n===2&&h.attr(s).css(v):h.attr(u).css(c)},h.on("click",function(){r.call(h)}).attr(u).css(e({cursor:"default"},c))},crispLine:function(n,t){return n[1]===n[4]&&(n[1]=n[4]=u(n[1])-t%2/2),n[2]===n[5]&&(n[2]=n[5]=u(n[2])+t%2/2),n},path:function(n){var t={fill:rt};return gi(n)?t.d=n:ot(n)&&e(t,n),this.createElement("path").attr(t)},circle:function(n,t,i){return n=ot(n)?n:{x:n,y:t,r:i},this.createElement("circle").attr(n)},arc:function(n,t,i,r,u,f){return ot(n)&&(t=n.y,i=n.r,r=n.innerR,u=n.start,f=n.end,n=n.x),this.symbol("arc",n||0,t||0,i||0,i||0,{innerR:r||0,start:u||0,end:f||0})},rect:function(n,t,r,u,f,e){return f=ot(n)?n.r:f,f=this.createElement("rect").attr({rx:f,ry:f,fill:rt}),f.attr(ot(n)?n:f.crisp(e,n,t,i(r,0),i(u,0)))},setSize:function(t,i,r){var u=this.alignedObjects,f=u.length;for(this.width=t,this.height=i,this.boxWrapper[n(r,!0)?"animate":"attr"]({width:t,height:i});f--;)u[f].align()},g:function(n){var t=this.createElement("g");return r(n)?t.attr({"class":"highcharts-"+n}):t},image:function(n,t,i,r,u){var f={preserveAspectRatio:rt};return arguments.length>1&&e(f,{x:t,y:i,width:r,height:u}),f=this.createElement("image").attr(f),f.element.setAttributeNS?f.element.setAttributeNS("http://www.w3.org/1999/xlink","href",n):f.element.setAttribute("hc-svg-href",n),f},symbol:function(n,t,i,r,f,o){var s,c=this.symbols[n],c=c&&c(u(t),u(i),r,f,o),a=/^url\((.*?)\)$/,h,l;return c?(s=this.path(c),e(s,{symbolName:n,x:t,y:i,width:r,height:f}),o&&e(s,o)):a.test(n)&&(l=function(n,t){n.element&&(n.attr({width:t[0],height:t[1]}),n.alignByTranslate||n.translate(u((r-t[0])/2),u((f-t[1])/2)))},h=n.match(a)[1],n=lf[h],s=this.image(h).attr({x:t,y:i}),s.isImg=!0,n?l(s,n):(s.attr({width:0,height:0}),ut("img",{onload:function(){l(s,lf[h]=[this.width,this.height])},src:h}))),s},symbols:{circle:function(n,t,i,r){var u=.166*i;return["M",n+i/2,t,"C",n+i+u,t,n+i+u,t+r,n+i/2,t+r,"C",n-u,t+r,n-u,t,n+i/2,t,"Z"]},square:function(n,t,i,r){return["M",n,t,"L",n+i,t,n+i,t+r,n,t+r,"Z"]},triangle:function(n,t,i,r){return["M",n+i/2,t,"L",n+i,t+r,n,t+r,"Z"]},"triangle-down":function(n,t,i,r){return["M",n,t,"L",n+i,t,n+i/2,t+r,"Z"]},diamond:function(n,t,i,r){return["M",n+i/2,t,"L",n+i,t+r/2,n+i/2,t+r,n,t+r/2,"Z"]},arc:function(n,t,i,r,u){var e=u.start,i=u.r||i||r,f=u.end-.001,r=u.innerR,o=u.open,s=st(e),h=vt(e),c=st(f),f=vt(f),u=u.end-e<fr?0:1;return["M",n+i*s,t+i*h,"A",i,i,0,u,1,n+i*c,t+i*f,o?"M":"L",n+r*c,t+r*f,"A",r,r,0,u,0,n+r*s,t+r*h,o?"":"Z"]}},clipRect:function(n,t,i,r){var u="highcharts-"+vu++,f=this.createElement("clipPath").attr({id:u}).add(this.defs),n=this.rect(n,t,i,r,0).add(f);return n.id=u,n.clipPath=f,n},color:function(n,i,u){var l=this,s,b=/^rgba/,f,a,v,y,p,w,c,e=[];if(n&&n.linearGradient?f="linearGradient":n&&n.radialGradient&&(f="radialGradient"),f){u=n[f];a=l.gradients;y=n.stops;i=i.radialReference;gi(u)&&(n[f]=u={x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientUnits:"userSpaceOnUse"});f==="radialGradient"&&i&&!r(u.gradientUnits)&&(u=o(u,{cx:i[0]-i[2]/2+u.cx*i[2],cy:i[1]-i[2]/2+u.cy*i[2],r:u.r*i[2],gradientUnits:"userSpaceOnUse"}));for(c in u)c!=="id"&&e.push(c,u[c]);for(c in y)e.push(y[c]);return e=e.join(","),a[e]?n=a[e].id:(u.id=n="highcharts-"+vu++,a[e]=v=l.createElement(f).attr(u).add(l.defs),v.stops=[],t(y,function(n){b.test(n[1])?(s=ni(n[1]),p=s.get("rgb"),w=s.get("a")):(p=n[1],w=1);n=l.createElement("stop").attr({offset:n[0],"stop-color":p,"stop-opacity":w}).add(v);v.stops.push(n)})),"url("+l.url+"#"+n+")"}return b.test(n)?(s=ni(n),h(i,u+"-opacity",s.get("a")),s.get("rgb")):(i.removeAttribute(u+"-opacity"),n)},text:function(t,i,r,f){var e=nt.chart.style,o=ct||!ht&&this.forExport;return f&&!this.forExport?this.html(t,i,r):(i=u(n(i,0)),r=u(n(r,0)),t=this.createElement("text").attr({x:i,y:r,text:t}).css({fontFamily:e.fontFamily,fontSize:e.fontSize}),o&&t.css({position:"absolute"}),t.x=i,t.y=r,t)},html:function(n,i,r){var c=nt.chart.style,f=this.createElement("span"),o=f.attrSetters,s=f.element,l=f.renderer;return o.text=function(n){return n!==s.innerHTML&&delete this.bBox,s.innerHTML=n,!1},o.x=o.y=o.align=function(n,t){return t==="align"&&(t="textAlign"),f[t]=n,f.htmlUpdateTransform(),!1},f.attr({text:n,x:u(i),y:u(r)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:c.fontFamily,fontSize:c.fontSize}),f.css=f.htmlCss,l.isSVG&&(f.add=function(n){var i,r=l.box.parentNode,u=[];if(n){if(i=n.div,!i){for(;n;)u.push(n),n=n.parentGroup;t(u.reverse(),function(n){var t;i=n.div=n.div||ut(bi,{className:h(n.element,"class")},{position:"absolute",left:(n.translateX||0)+"px",top:(n.translateY||0)+"px"},i||r);t=i.style;e(n.attrSetters,{translateX:function(n){t.left=n+"px"},translateY:function(n){t.top=n+"px"},visibility:function(n,i){t[i]=n}})})}}else i=r;return i.appendChild(s),f.added=!0,f.alignOnAdd&&f.htmlUpdateTransform(),f}),f},fontMetrics:function(n){var n=s(n||11),n=n<24?n+4:u(n*1.2),t=u(n*.8);return{h:n,b:t}},label:function(n,i,s,h,c,l,a,v,y){function yt(){var n,t;n=w.element.style;g=(tt===void 0||st===void 0||p.styles.textAlign)&&w.getBBox();p.width=(tt||g.width||0)+2*d+ft;p.height=(st||g.height||0)+2*d;lt=d+nt.fontMetrics(n&&n.fontSize).b;vt&&(b||(n=u(-ut*d),t=v?-lt:0,p.box=b=h?nt.symbol(h,n,t,p.width,p.height):nt.rect(n,t,p.width,p.height,0,et[yf]),b.add(p)),b.isImg||b.attr(o({width:p.width,height:p.height},et)),et=null)}function rt(){var n=p.styles,n=n&&n.textAlign,t=ft+d*(1-ut),i;i=v?0:lt;r(tt)&&(n==="center"||n==="right")&&(t+={center:.5,right:1}[n]*(tt-g.width));(t!==w.x||i!==w.y)&&w.attr({x:t,y:i});w.x=t;w.y=i}function it(n,t){b?b.attr(n,t):et[n]=t}function ot(){w.add(p);p.attr({text:n,x:i,y:s});b&&r(c)&&p.attr({anchorX:c,anchorY:l})}var nt=this,p=nt.g(y),w=nt.text("",0,0,a).attr({zIndex:1}),b,g,ut=0,d=3,ft=0,tt,st,ht,ct,pt=0,et={},lt,a=p.attrSetters,vt,wt;return k(p,"add",ot),a.width=function(n){return tt=n,!1},a.height=function(n){return st=n,!1},a.padding=function(n){return r(n)&&n!==d&&(d=n,rt()),!1},a.paddingLeft=function(n){return r(n)&&n!==ft&&(ft=n,rt()),!1},a.align=function(n){return ut={left:0,center:.5,right:1}[n],!1},a.text=function(n,t){return w.attr(t,n),yt(),rt(),!1},a[yf]=function(n,t){return vt=!0,pt=n%2/2,it(t,n),!1},a.stroke=a.fill=a.r=function(n,t){return t==="fill"&&(vt=!0),it(t,n),!1},a.anchorX=function(n,t){return c=n,it(t,n+pt-ht),!1},a.anchorY=function(n,t){return l=n,it(t,n-ct),!1},a.x=function(n){return p.x=n,n-=ut*((tt||g.width)+d),ht=u(n),p.attr("translateX",ht),!1},a.y=function(n){return ct=p.y=u(n),p.attr("translateY",ct),!1},wt=p.css,e(p,{css:function(n){if(n){var i={},n=o(n);t("fontSize,fontWeight,fontFamily,color,lineHeight,width,textDecoration".split(","),function(t){n[t]!==f&&(i[t]=n[t],delete n[t])});w.css(i)}return wt.call(p,n)},getBBox:function(){return{width:g.width+2*d,height:g.height+2*d,x:g.x-d,y:g.y-d}},shadow:function(n){return b&&b.shadow(n),p},destroy:function(){at(p,"add",ot);at(p.element,"mouseenter");at(p.element,"mouseleave");w&&(w=w.destroy());b&&(b=b.destroy());ei.prototype.destroy.call(p);p=nt=yt=rt=it=ot=null}})}};hr=ci;ht||ct||(Highcharts.VMLElement=d={init:function(n,t){var i=["<",t,' filled="f" stroked="f"'],r=["position: ","absolute",";"],u=t===bi;(t==="shape"||u)&&r.push("left:0;top:0;width:1px;height:1px;");r.push("visibility: ",u?"hidden":"visible");i.push(' style="',r.join(""),'"/>');t&&(i=u||t==="span"||t==="img"?i.join(""):n.prepVML(i),this.element=ut(i));this.renderer=n;this.attrSetters={}},add:function(n){var i=this.renderer,r=this.element,t=i.box,t=n?n.element||n:t;return n&&n.inverted&&i.invertChild(r,t),t.appendChild(r),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),a(this,"add"),this},updateTransform:ei.prototype.htmlUpdateTransform,attr:function(n,t){var o,e,s,l=this.element||{},v=l.style,y=l.nodeName,p=this.renderer,g=this.symbolName,b,a=this.shadows,c,k=this.attrSetters,d=this,w;if(wt(n)&&r(t)&&(o=n,n={},n[o]=t),wt(n))o=n,d=o==="strokeWidth"||o==="stroke-width"?this.strokeweight:this[o];else for(o in n)if(e=n[o],c=!1,s=k[o]&&k[o].call(this,e,o),s!==!1&&e!==null){if(s!==f&&(e=s),g&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(o))b||(this.symbolAttr(n),b=!0),c=!0;else if(o==="d"){for(e=e||[],this.d=e.join(" "),s=e.length,c=[];s--;)nr(e[s])?c[s]=u(e[s]*10)-5:e[s]==="Z"?c[s]="x":(c[s]=e[s],e.isArc&&(e[s]==="wa"||e[s]==="at"))&&(w=e[s]==="wa"?1:-1,c[s+5]===c[s+7]&&(c[s+7]-=w),c[s+6]===c[s+8]&&(c[s+8]-=w));if(e=c.join(" ")||"x",l.path=e,a)for(s=a.length;s--;)a[s].path=a[s].cutOff?this.cutOffPath(e,a[s].cutOff):e;c=!0}else if(o==="visibility"){if(a)for(s=a.length;s--;)a[s].style[o]=e;y==="DIV"&&(e=e==="hidden"?"-999em":0,wr||(v[o]=e?"visible":"hidden"),o="top");v[o]=e;c=!0}else o==="zIndex"?(e&&(v[o]=e),c=!0):ri(o,["x","y","width","height"])!==-1?(this[o]=e,o==="x"||o==="y"?o={x:"left",y:"top"}[o]:e=i(0,e),this.updateClipping?(this[o]=e,this.updateClipping()):v[o]=e,c=!0):o==="class"&&y==="DIV"?l.className=e:o==="stroke"?(e=p.color(e,l,o),o="strokecolor"):o==="stroke-width"||o==="strokeWidth"?(l.stroked=e?!0:!1,o="strokeweight",this[o]=e,nr(e)&&(e+="px")):o==="dashstyle"?((l.getElementsByTagName("stroke")[0]||ut(p.prepVML(["<stroke/>"]),null,null,l))[o]=e||"solid",this.dashstyle=e,c=!0):o==="fill"?y==="SPAN"?v.color=e:y!=="IMG"&&(l.filled=e!==rt?!0:!1,e=p.color(e,l,o,this),o="fillcolor"):o==="opacity"?c=!0:y==="shape"&&o==="rotation"?(this[o]=e,l.style.left=-u(vt(e*pr)+1)+"px",l.style.top=u(st(e*pr))+"px"):o==="translateX"||o==="translateY"||o==="rotation"?(this[o]=e,this.updateTransform(),c=!0):o==="text"&&(this.bBox=null,l.innerHTML=e,c=!0);c||(wr?l[o]=e:h(l,o,e))}return d},clip:function(n){var t=this,i;return n?(i=n.members,bt(i,t),i.push(t),t.destroyClip=function(){bt(i,t)},n=n.getCSS(t)):(t.destroyClip&&t.destroyClip(),n={clip:wr?"inherit":"rect(auto)"}),t.css(n)},css:ei.prototype.htmlCss,safeRemoveChild:function(n){n.parentNode&&sr(n)},destroy:function(){return this.destroyClip&&this.destroyClip(),ei.prototype.destroy.apply(this)},on:function(n,t){return this.element["on"+n]=function(){var n=g.event;n.target=n.srcElement;t(n)},this},cutOffPath:function(n,t){var i,n=n.split(/[ ,]/);return i=n.length,(i===9||i===11)&&(n[i-4]=n[i-2]=s(n[i-2])-10*t),n.join(" ")},shadow:function(t,i,r){var v=[],f,e=this.element,y=this.renderer,u,p=e.style,h,o=e.path,c,l,a,w;if(o&&typeof o.value!="string"&&(o="x"),l=o,t){for(a=n(t.width,3),w=(t.opacity||.15)/a,f=1;f<=3;f++)c=a*2+1-2*f,r&&(l=this.cutOffPath(o.value,c+.5)),h=['<shape isShadow="true" strokeweight="',c,'" filled="false" path="',l,'" coordsize="10 10" style="',e.style.cssText,'" />'],u=ut(y.prepVML(h),null,{left:s(p.left)+n(t.offsetX,1),top:s(p.top)+n(t.offsetY,1)}),r&&(u.cutOff=c+1),h=['<stroke color="',t.color||"black",'" opacity="',w*f,'"/>'],ut(y.prepVML(h),null,null,u),i?i.element.appendChild(u):e.parentNode.insertBefore(u,e),v.push(u);this.shadows=v}return this}},d=pt(ei,d),ti={Element:d,isIE8:yi.indexOf("MSIE 8.0")>-1,init:function(n,t,i){var r,u;this.alignedObjects=[];r=this.createElement(bi);u=r.element;u.style.position="relative";n.appendChild(r.element);this.isVML=!0;this.box=u;this.boxWrapper=r;this.setSize(t,i,!1);c.namespaces.hcv||(c.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),c.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},isHidden:function(){return!this.box.offsetWidth},clipRect:function(n,i,r,f){var s=this.createElement(),o=ot(n);return e(s,{members:[],left:o?n.x:n,top:o?n.y:i,width:o?n.width:r,height:o?n.height:f,getCSS:function(n){var t=n.element,o=t.nodeName,n=n.inverted,i=this.top-(o==="shape"?t.offsetTop:0),r=this.left,t=r+this.width,f=i+this.height,i={clip:"rect("+u(n?r:i)+"px,"+u(n?f:t)+"px,"+u(n?t:f)+"px,"+u(n?i:r)+"px)"};return!n&&wr&&o==="DIV"&&e(i,{width:t+"px",height:f+"px"}),i},updateClipping:function(){t(s.members,function(n){n.css(s.getCSS(n))})}})},color:function(n,i,r,u){var at=this,s,d=/^rgba/,v,c,f=rt;if(n&&n.linearGradient?c="gradient":n&&n.radialGradient&&(c="pattern"),c){var h,y,e=n.linearGradient||n.radialGradient,l,g,tt,it,ft,p="",n=n.stops,b,et=[],ot=function(){v=['<fill colors="'+et.join(",")+'" opacity="',tt,'" o:opacity2="',g,'" type="',c,'" ',p,'focus="100%" method="any" />'];ut(at.prepVML(v),null,null,i)};if(l=n[0],b=n[n.length-1],l[0]>0&&n.unshift([0,l[1]]),b[0]<1&&n.push([1,b[1]]),t(n,function(n,t){d.test(n[1])?(s=ni(n[1]),h=s.get("rgb"),y=s.get("a")):(h=n[1],y=1);et.push(n[0]*100+"% "+h);t?(tt=y,it=h):(g=y,ft=h)}),r==="fill")if(c==="gradient")r=e.x1||e[0]||0,n=e.y1||e[1]||0,l=e.x2||e[2]||0,e=e.y2||e[3]||0,p='angle="'+(90-w.atan((e-n)/(l-r))*180/fr)+'"',ot();else{var f=e.r,st=f*2,ht=f*2,ct=e.cx,lt=e.cy,a=i.radialReference,o,f=function(){a&&(o=u.getBBox(),ct+=(a[0]-o.x)/o.width-.5,lt+=(a[1]-o.y)/o.height-.5,st*=a[2]/o.width,ht*=a[2]/o.height);p='src="'+nt.global.VMLRadialGradientURL+'" size="'+st+","+ht+'" origin="0.5,0.5" position="'+ct+","+lt+'" color2="'+ft+'" ';ot()};u.added?f():k(u,"add",f);f=it}else f=h}else d.test(n)&&i.tagName!=="IMG"?(s=ni(n),v=["<",r,' opacity="',s.get("a"),'"/>'],ut(this.prepVML(v),null,null,i),f=s.get("rgb")):(f=i.getElementsByTagName(r),f.length&&(f[0].opacity=1,f[0].type="solid"),f=n);return f},prepVML:function(n){var t=this.isIE8,n=n.join("");return t?(n=n.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),n=n.indexOf('style="')===-1?n.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):n.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):n=n.replace("<","<hcv:"),n},text:ci.prototype.html,path:function(n){var t={coordsize:"10 10"};return gi(n)?t.d=n:ot(n)&&e(t,n),this.createElement("shape").attr(t)},circle:function(n,t,i){var r=this.symbol("circle");return ot(n)&&(i=n.r,t=n.y,n=n.x),r.isCircle=!0,r.attr({x:n,y:t,width:2*i,height:2*i})},g:function(n){var t;return n&&(t={className:"highcharts-"+n,"class":"highcharts-"+n}),this.createElement(bi).attr(t)},image:function(n,t,i,r,u){var f=this.createElement("img").attr({src:n});return arguments.length>1&&f.attr({x:t,y:i,width:r,height:u}),f},rect:function(n,t,r,u,f,e){ot(n)&&(t=n.y,r=n.width,u=n.height,e=n.strokeWidth,n=n.x);var o=this.symbol("rect");return o.r=f,o.attr(o.crisp(e,n,t,i(r,0),i(u,0)))},invertChild:function(n,t){var i=t.style;p(n,{flip:"x",left:s(i.width)-1,top:s(i.height)-1,rotation:-90})},symbols:{arc:function(n,t,i,r,u){var f=u.start,o=u.end,e=u.r||i||r,i=u.innerR,r=st(f),s=vt(f),h=st(o),c=vt(o);return o-f==0?["x"]:(f=["wa",n-e,t-e,n+e,t+e,n+e*r,t+e*s,n+e*h,t+e*c],u.open&&!i&&f.push("e","M",n,t),f.push("at",n-i,t-i,n+i,t+i,n+i*h,t+i*c,n+i*r,t+i*s,"x","e"),f.isArc=!0,f)},circle:function(n,t,i,r,u){return u&&u.isCircle&&(n-=i/2,t-=r/2),["wa",n,t,n+i,t+r,n+i,t+r/2,n+i,t+r/2,"e"]},rect:function(n,t,i,u,f){var o=n+i,s=t+u,e;return!r(f)||!f.r?o=ci.prototype.symbols.square.apply(0,arguments):(e=v(f.r,i,u),o=["M",n+e,t,"L",o-e,t,"wa",o-2*e,t,o,t+2*e,o-e,t,o,t+e,"L",o,s-e,"wa",o-2*e,s-2*e,o,s,o,s-e,o-e,s,"L",n+e,s,"wa",n,s-2*e,n+2*e,s,n+e,s,n,s-e,"L",n,t+e,"wa",n,t,n+2*e,t+2*e,n,t+e,n+e,t,"x","e"]),o}}},Highcharts.VMLRenderer=d=function(){this.init.apply(this,arguments)},d.prototype=o(ci.prototype,ti),hr=d);ct&&(Highcharts.CanVGRenderer=d=function(){oi="http://www.w3.org/1999/xhtml"},d.prototype.symbols={},gf=function(){function t(){for(var i=n.length,t=0;t<i;t++)n[t]();n=[]}var n=[];return{push:function(i,r){n.length===0&&te(r,t);n.push(i)}}}(),hr=d);ur.prototype={addLabel:function(){var t=this.axis,c=t.options,a=t.chart,h=t.horiz,l=t.categories,v=t.series[0]&&t.series[0].names,f=this.pos,o=c.labels,s=t.tickPositions,h=h&&l&&!o.step&&!o.staggerLines&&!o.rotation&&a.plotWidth/s.length||!h&&(a.optionsMarginLeft||a.plotWidth/2),y=f===s[0],p=f===s[s.length-1],v=l?n(l[f],v&&v[f],f):f,l=this.label,s=s.info,w;t.isDatetimeAxis&&s&&(w=c.dateTimeLabelFormats[s.higherRanks[f]||s.unitName]);this.isFirst=y;this.isLast=p;c=t.labelFormatter.call({axis:t,chart:a,isFirst:y,isLast:p,dateTimeLabelFormat:w,value:t.isLog?dt(yt(v)):v});f=h&&{width:i(1,u(h-2*(o.padding||10)))+"px"};f=e(f,o.style);r(l)?l&&l.attr({text:c}).css(f):(h={align:o.align},nr(o.rotation)&&(h.rotation=o.rotation),this.label=r(c)&&o.enabled?a.renderer.text(c,0,0,o.useHTML).attr(h).css(f).add(t.labelGroup):null)},getLabelSize:function(){var n=this.label,t=this.axis;return n?(this.labelBBox=n.getBBox())[t.horiz?"height":"width"]:0},getLabelSides:function(){var n=this.axis.options.labels,t=this.labelBBox.width,n=t*{left:0,center:.5,right:1}[n.align]-n.x;return[-n,t-n]},handleOverflow:function(n,t){var o=!0,i=this.axis,f=i.chart,e=this.isFirst,c=this.isLast,r=t.x,l=i.reversed,s=i.tickPositions;if(e||c){var u=this.getLabelSides(),h=u[0],u=u[1],f=f.plotLeft,a=f+i.len,s=(i=i.ticks[s[n+(e?1:-1)]])&&i.label.xy&&i.label.xy.x+i.getLabelSides()[e?0:1];e&&!l||c&&l?r+h<f&&(r=f-h,i&&r+u>s&&(o=!1)):r+u>a&&(r=a-u,i&&r+h<s&&(o=!1));t.x=r}return o},getPosition:function(n,t,i,r){var u=this.axis,f=u.chart,e=r&&f.oldChartHeight||f.chartHeight;return{x:n?u.translate(t+i,null,null,r)+u.transB:u.left+u.offset+(u.opposite?(r&&f.oldChartWidth||f.chartWidth)-u.right-u.left:0),y:n?e-u.bottom+u.offset-(u.opposite?u.height:0):e-u.translate(t+i,null,null,r)-u.transB}},getLabelPosition:function(n,t,i,u,f,e,o,h){var c=this.axis,l=c.transA,a=c.reversed,c=c.staggerLines,n=n+f.x-(e&&u?e*l*(a?-1:1):0),t=t+f.y-(e&&!u?e*l*(a?1:-1):0);return r(f.y)||(t+=s(i.styles.lineHeight)*.9-i.getBBox().height/2),c&&(t+=o/(h||1)%c*16),{x:n,y:t}},getMarkPath:function(n,t,i,r,u,f){return f.crispLine(["M",n,t,"L",n+(u?0:-i),t+(u?i:0)],r)},render:function(t,i,r){var u=this.axis,e=u.options,d=u.chart.renderer,h=u.horiz,y=this.type,p=this.label,c=this.pos,g=e.labels,s=this.gridLine,l=y?y+"Grid":"grid",a=y?y+"Tick":"tick",w=e[l+"LineWidth"],ut=e[l+"LineColor"],it=e[l+"LineDashStyle"],v=e[a+"Length"],l=e[a+"Width"]||0,ft=e[a+"Color"],et=e[a+"Position"],a=this.mark,nt=g.step,b=!0,tt=u.tickmarkOffset,o=this.getPosition(h,c,tt,i),k=o.x,o=o.y,rt=h&&k===u.pos||!h&&o===u.pos+u.len?-1:1,ot=u.staggerLines;this.isActive=!0;w&&(c=u.getPlotLinePath(c+tt,w*rt,i,!0),s===f&&(s={stroke:ut,"stroke-width":w},it&&(s.dashstyle=it),y||(s.zIndex=1),i&&(s.opacity=0),this.gridLine=s=w?d.path(c).attr(s).add(u.gridGroup):null),!i&&s&&c&&s[this.isNew?"attr":"animate"]({d:c,opacity:r}));l&&v&&(et==="inside"&&(v=-v),u.opposite&&(v=-v),i=this.getMarkPath(k,o,v,l*rt,h,d),a?a.animate({d:i,opacity:r}):this.mark=d.path(i).attr({stroke:ft,"stroke-width":l,opacity:r}).add(u.axisGroup));p&&!isNaN(k)&&(p.xy=o=this.getLabelPosition(k,o,p,h,g,tt,t,nt),this.isFirst&&!n(e.showFirstLabel,1)||this.isLast&&!n(e.showLastLabel,1)?b=!1:!ot&&h&&g.overflow==="justify"&&!this.handleOverflow(t,o)&&(b=!1),nt&&t%nt&&(b=!1),b&&!isNaN(o.y)?(o.opacity=r,p[this.isNew?"attr":"animate"](o),this.isNew=!1):p.attr("y",-9999))},destroy:function(){ir(this,this.axis)}};su.prototype={render:function(){var c=this,f=c.axis,l=f.horiz,h=(f.pointRange||0)/2,u=c.options,e=u.label,y=c.label,b=u.width,p=u.to,w=u.from,s=r(w)&&r(p),k=u.value,nt=u.dashStyle,a=c.svgElem,t=[],tt,it=u.color,d=u.zIndex,g=u.events,rt=f.chart.renderer;if(f.isLog&&(w=ii(w),p=ii(p),k=ii(k)),b)(t=f.getPlotLinePath(k,b),h={stroke:it,"stroke-width":b},nt)&&(h.dashstyle=nt);else if(s)(w=i(w,f.min-h),p=v(p,f.max+h),t=f.getPlotBandPath(w,p,u),h={fill:it},u.borderWidth)&&(h.stroke=u.borderColor,h["stroke-width"]=u.borderWidth);else return;if(r(d)&&(h.zIndex=d),a)t?a.animate({d:t},null,a.onGetPath):(a.hide(),a.onGetPath=function(){a.show()});else if(t&&t.length&&(c.svgElem=a=rt.path(t).attr(h).add(),g))for(tt in u=function(n){a.on(n,function(t){g[n].apply(c,[t])})},g)u(tt);return e&&r(e.text)&&t&&t.length&&f.width>0&&f.height>0?(e=o({align:l&&s&&"center",x:l?!s&&4:10,verticalAlign:!l&&s&&"middle",y:l?s?16:10:s?6:-4,rotation:l&&!s&&90},e),y||(c.label=y=rt.text(e.text,0,0).attr({align:e.textAlign||e.align,rotation:e.rotation,zIndex:d}).css(e.style).add()),f=[t[1],t[4],n(t[6],t[1])],t=[t[2],t[5],n(t[7],t[2])],l=tr(f),s=tr(t),y.align(e,!1,{x:l,y:s,width:ui(f)-l,height:ui(t)-s}),y.show()):y&&y.hide(),c},destroy:function(){bt(this.axis.plotLinesAndBands,this);ir(this,this.axis)}};sf.prototype={destroy:function(){ir(this,this.axis)},setTotal:function(n){this.cum=this.total=n},render:function(n){var t=this.options,i=t.format,i=i?vi(i,this):t.formatter.call(this);this.label?this.label.attr({text:i,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(i,0,0,t.useHTML).css(t.style).attr({align:this.textAlign,rotation:t.rotation,visibility:"hidden"}).add(n)},setOffset:function(n,t){var i=this.axis,e=i.chart,r=e.inverted,u=this.isNegative,f=i.translate(this.percent?100:this.total,0,0,0,1),i=i.translate(0),i=b(f-i),s=e.xAxis[0].translate(this.x)+n,o=e.plotHeight,u={x:r?u?f:f-i:s,y:r?o-s-t:u?o-f-i:o-f,width:r?i:t,height:r?t:i};(r=this.label)&&(r.align(this.alignOptions,null,u),u=r.alignAttr,r.attr({visibility:this.options.crop===!1||e.isInsidePlot(u.x,u.y)?ht?"inherit":"visible":"hidden"}))}};yr.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:y,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#4d759e",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return li(this.total,-1)},style:y.style}},defaultLeftAxisOptions:{labels:{align:"right",x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{align:"left",x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{align:"center",x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{align:"center",x:0,y:-5},title:{rotation:0}},init:function(n,t){var u=t.isX,e,o,i;this.horiz=n.inverted?!u:u;this.xOrY=(this.isXAxis=u)?"x":"y";this.opposite=t.opposite;this.side=this.horiz?this.opposite?0:2:this.opposite?1:3;this.setOptions(t);i=this.options;e=i.type;this.labelFormatter=i.labels.formatter||this.defaultLabelFormatter;this.staggerLines=this.horiz&&i.labels.staggerLines;this.userOptions=t;this.minPixelPadding=0;this.chart=n;this.reversed=i.reversed;this.zoomEnabled=i.zoomEnabled!==!1;this.categories=i.categories||e==="category";this.isLog=e==="logarithmic";this.isDatetimeAxis=e==="datetime";this.isLinked=r(i.linkedTo);this.tickmarkOffset=this.categories&&i.tickmarkPlacement==="between"?.5:0;this.ticks={};this.minorTicks={};this.plotLinesAndBands=[];this.alternateBands={};this.len=0;this.minRange=this.userMinRange=i.minRange||i.maxZoom;this.range=i.range;this.offset=i.offset||0;this.stacks={};this._stacksTouched=0;this.min=this.max=null;i=this.options.events;ri(this,n.axes)===-1&&(n.axes.push(this),n[u?"xAxis":"yAxis"].push(this));this.series=this.series||[];n.inverted&&u&&this.reversed===f&&(this.reversed=!0);this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(o in i)k(this,o,i[o]);this.isLog&&(this.val2lin=ii,this.lin2val=yt)},setOptions:function(n){this.options=o(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],o(nt[this.isXAxis?"xAxis":"yAxis"],n))},update:function(t,i){var r=this.chart,t=r.options[this.xOrY+"Axis"][this.options.index]=o(this.userOptions,t);this.destroy();this._addedPlotLB=!1;this.init(r,t);r.isDirtyBox=!0;n(i,!0)&&r.redraw()},remove:function(i){var r=this.chart,u=this.xOrY+"Axis";t(this.series,function(n){n.remove(!1)});bt(r.axes,this);bt(r[u],this);r.options[u].splice(this.options.index,1);t(r[u],function(n,t){n.options.index=t});this.destroy();r.isDirtyBox=!0;n(i,!0)&&r.redraw()},defaultLabelFormatter:function(){var i=this.axis,t=this.value,u=i.categories,o=this.dateTimeLabelFormat,e=nt.lang.numericSymbols,r=e&&e.length,n,s=i.options.labels.format,i=i.isLog?t:i.tickInterval;if(s)n=vi(s,this);else if(u)n=t;else if(o)n=nu(o,t);else if(r&&i>=1e3)for(;r--&&n===f;)u=Math.pow(1e3,r+1),i>=u&&e[r]!==null&&(n=li(t/u,-1)+e[r]);return n===f&&(n=t>=1e3?li(t,0):li(t,-1)),n},getSeriesExtremes:function(){var u=this,a=u.chart,e=u.stacks,h=[],c=[],l=u._stacksTouched+=1,s,o;u.hasVisibleSeries=!1;u.dataMin=u.dataMax=null;t(u.series,function(t){if(t.visible||!a.options.chart.ignoreHiddenSeries){var p=t.options,w,it,rt,g,ut,tt,ft,s,y,b=p.threshold,ot,nt=[],st=0;if(u.hasVisibleSeries=!0,u.isLog&&b<=0&&(b=p.threshold=null),u.isXAxis)(p=t.xData,p.length)&&(u.dataMin=v(n(u.dataMin,p[0]),tr(p)),u.dataMax=i(n(u.dataMax,p[0]),ui(p)));else{var et,k,d,ct=t.cropped,ht=t.xAxis.getExtremes(),lt=!!t.modifyValue;for(w=p.stacking,u.usePercentage=w==="percent",w&&(ut=p.stack,g=t.type+n(ut,""),tt="-"+g,t.stackKey=g,it=h[g]||[],h[g]=it,rt=c[tt]||[],c[tt]=rt),u.usePercentage&&(u.dataMin=0,u.dataMax=99),p=t.processedXData,ft=t.processedYData,ot=ft.length,o=0;o<ot;o++)if(s=p[o],y=ft[o],w&&(k=(et=y<b)?rt:it,d=et?tt:g,r(k[s])?(k[s]=dt(k[s]+y),y=[y,k[s]]):k[s]=y,e[d]||(e[d]={}),e[d][s]||(e[d][s]=new sf(u,u.options.stackLabels,et,s,ut,w)),e[d][s].setTotal(k[s]),e[d][s].touched=l),y!==null&&y!==f&&(!u.isLog||y.length||y>0)&&(lt&&(y=t.modifyValue(y)),t.getExtremesFromAll||ct||(p[o+1]||s)>=ht.min&&(p[o-1]||s)<=ht.max))if(s=y.length)for(;s--;)y[s]!==null&&(nt[st++]=y[s]);else nt[st++]=y;!u.usePercentage&&nt.length&&(t.dataMin=w=tr(nt),t.dataMax=t=ui(nt),u.dataMin=v(n(u.dataMin,w),w),u.dataMax=i(n(u.dataMax,t),t));r(b)&&(u.dataMin>=b?(u.dataMin=b,u.ignoreMinPadding=!0):u.dataMax<b&&(u.dataMax=b,u.ignoreMaxPadding=!0))}}});for(s in e)for(o in e[s])e[s][o].touched<l&&(e[s][o].destroy(),delete e[s][o])},translate:function(n,t,i,r,u,f){var h=this.len,e=1,s=0,o=r?this.oldTransA:this.transA,r=r?this.oldMin:this.min,c=this.minPixelPadding,u=(this.options.ordinal||this.isLog&&u)&&this.lin2val;return o||(o=this.transA),i&&(e*=-1,s=h),this.reversed&&(e*=-1,s-=e*h),t?(n=n*e+s,n-=c,n=n/o+r,u&&(n=this.lin2val(n))):(u&&(n=this.val2lin(n)),n=e*(n-r)*o+s+e*c+(f?o*this.pointRange/2:0)),n},toPixels:function(n,t){return this.translate(n,!1,!this.horiz,null,!0)+(t?0:this.pos)},toValue:function(n,t){return this.translate(n-(t?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(n,t,i,r){var e=this.chart,s=this.left,h=this.top,f,c,l,n=this.translate(n,null,null,i),a=i&&e.oldChartHeight||e.chartHeight,v=i&&e.oldChartWidth||e.chartWidth,o;return f=this.transB,i=c=u(n+f),f=l=u(a-n-f),isNaN(n)?o=!0:this.horiz?(f=h,l=a-this.bottom,i<s||i>s+this.width)&&(o=!0):(i=s,c=v-this.right,f<h||f>h+this.height)&&(o=!0),o&&!r?null:e.renderer.crispLine(["M",i,f,"L",c,l],t||0)},getPlotBandPath:function(n,t){var i=this.getPlotLinePath(t),r=this.getPlotLinePath(n);return r&&i?r.push(i[4],i[5],i[1],i[2]):r=null,r},getLinearTickPositions:function(n,t,i){for(var r,t=dt(it(t/n)*n),i=dt(gt(i/n)*n),u=[];t<=i;){if(u.push(t),t=dt(t+n),t===r)break;r=t}return u},getLogTickPositions:function(t,i,r,f){var o=this.options,e=this.len,s=[],h,v,l,c,a;if(f||(this._minorAutoInterval=null),t>=.5)t=u(t),s=this.getLinearTickPositions(t,i,r);else if(t>=.08)for(e=it(i),o=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];e<r+1&&!a;e++)for(v=o.length,h=0;h<v&&!a;h++)l=ii(yt(e)*o[h]),l>i&&(!f||c<=r)&&s.push(c),c>r&&(a=!0),c=l;else(i=yt(i),r=yt(r),t=o[f?"minorTickInterval":"tickInterval"],t=n(t==="auto"?null:t,this._minorAutoInterval,(r-i)*(o.tickPixelInterval/(f?5:1))/((f?e/this.tickPositions.length:e)||1)),t=ou(t,null,w.pow(10,it(w.log(t)/w.LN10))),s=or(this.getLinearTickPositions(t,i,r),ii),f)||(this._minorAutoInterval=t/5);return f||(this.tickInterval=t),s},getMinorTickPositions:function(){var i=this.options,n=this.tickPositions,r=this.minorTickInterval,t=[],u;if(this.isLog)for(u=n.length,i=1;i<u;i++)t=t.concat(this.getLogTickPositions(r,n[i-1],n[i],!0));else if(this.isDatetimeAxis&&i.minorTickInterval==="auto")t=t.concat(uf(rf(r),this.min,this.max,i.startOfWeek)),t[0]<this.min&&t.shift();else for(n=this.min+(n[0]-this.min)%r;n<=this.max;n+=r)t.push(n);return t},adjustForMinRange:function(){var s=this.options,i=this.min,u=this.max,e,y=this.dataMax-this.dataMin>=this.minRange,c,h,a,l,p,o;this.isXAxis&&this.minRange===f&&!this.isLog&&(r(s.min)||r(s.max)?this.minRange=null:(t(this.series,function(n){for(l=n.xData,h=p=n.xIncrement?1:l.length-1;h>0;h--)(a=l[h]-l[h-1],c===f||a<c)&&(c=a)}),this.minRange=v(c*5,this.dataMax-this.dataMin)));u-i<this.minRange&&(o=this.minRange,e=(o-u+i)/2,e=[i-e,n(s.min,i-e)],y&&(e[2]=this.dataMin),i=ui(e),u=[i+o,n(s.max,i+o)],y&&(u[2]=this.dataMax),u=tr(u),u-i<o&&(e[0]=u-o,e[1]=n(s.min,u-o),i=ui(e)));this.min=i;this.max=u},setAxisTranslation:function(n){var s=this.max-this.min,h=0,u,e=0,o=0,f=this.linkedParent,c=this.transA;this.isXAxis&&(f?(e=f.minPointOffset,o=f.pointRangePadding):t(this.series,function(n){var t=n.pointRange,c=n.options.pointPlacement,f=n.closestPointRange;t>s&&(t=0);h=i(h,t);e=i(e,c?0:t/2);o=i(o,c==="on"?0:t);!n.noSharedTooltip&&r(f)&&(u=r(u)?v(u,f):f)}),f=this.ordinalSlope&&u?this.ordinalSlope/u:1,this.minPointOffset=e*=f,this.pointRangePadding=o*=f,this.pointRange=v(h,s),this.closestPointRange=u);n&&(this.oldTransA=c);this.translationSlope=this.transA=c=this.len/(s+o||1);this.transB=this.horiz?this.left:this.bottom;this.minPixelPadding=c*e},setTickPositions:function(u){var f=this,s=f.chart,e=f.options,c=f.isLog,l=f.isDatetimeAxis,y=f.isXAxis,h=f.isLinked,o=f.options.tickPositioner,p=e.maxPadding,b=e.minPadding,a=e.tickInterval,k=e.minTickInterval,d=e.tickPixelInterval,g=f.categories;h?(f.linkedParent=s[y?"xAxis":"yAxis"][e.linkedTo],s=f.linkedParent.getExtremes(),f.min=n(s.min,s.dataMin),f.max=n(s.max,s.dataMax),e.type!==f.linkedParent.options.type&&fi(11,1)):(f.min=n(f.userMin,e.min,f.dataMin),f.max=n(f.userMax,e.max,f.dataMax));c&&(!u&&v(f.min,n(f.dataMin,f.min))<=0&&fi(10,1),f.min=dt(ii(f.min)),f.max=dt(ii(f.max)));f.range&&(f.userMin=f.min=i(f.min,f.max-f.range),f.userMax=f.max,u)&&(f.range=null);f.beforePadding&&f.beforePadding();f.adjustForMinRange();!g&&!f.usePercentage&&!h&&r(f.min)&&r(f.max)&&(s=f.max-f.min)&&(!r(e.min)&&!r(f.userMin)&&b&&(f.dataMin<0||!f.ignoreMinPadding)&&(f.min-=s*b),!r(e.max)&&!r(f.userMax)&&p&&(f.dataMax>0||!f.ignoreMaxPadding)&&(f.max+=s*p));f.tickInterval=f.min===f.max||f.min===void 0||f.max===void 0?1:h&&!a&&d===f.linkedParent.options.tickPixelInterval?f.linkedParent.tickInterval:n(a,g?1:(f.max-f.min)*d/(f.len||1));y&&!u&&t(f.series,function(n){n.processData(f.min!==f.oldMin||f.max!==f.oldMax)});f.setAxisTranslation(!0);f.beforeSetTickPositions&&f.beforeSetTickPositions();f.postProcessTickInterval&&(f.tickInterval=f.postProcessTickInterval(f.tickInterval));!a&&f.tickInterval<k&&(f.tickInterval=k);l||c||(u=w.pow(10,it(w.log(f.tickInterval)/w.LN10)),a)||(f.tickInterval=ou(f.tickInterval,null,u,e));f.minorTickInterval=e.minorTickInterval==="auto"&&f.tickInterval?f.tickInterval/5:e.minorTickInterval;f.tickPositions=o=e.tickPositions?[].concat(e.tickPositions):o&&o.apply(f,[f.min,f.max]);o||(o=l?(f.getNonLinearTimeTicks||uf)(rf(f.tickInterval,e.units),f.min,f.max,e.startOfWeek,f.ordinalPositions,f.closestPointRange,!0):c?f.getLogTickPositions(f.tickInterval,f.min,f.max):f.getLinearTickPositions(f.tickInterval,f.min,f.max),f.tickPositions=o);h||(c=o[0],l=o[o.length-1],h=f.minPointOffset||0,e.startOnTick?f.min=c:f.min-h>c&&o.shift(),e.endOnTick?f.max=l:f.max+h<l&&o.pop(),o.length===1&&(f.min-=.001,f.max+=.001))},setMaxTicks:function(){var i=this.chart,n=i.maxTicks||{},t=this.tickPositions,r=this._maxTicksKey=[this.xOrY,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&t&&t.length>(n[r]||0)&&this.options.alignTicks!==!1&&(n[r]=t.length);i.maxTicks=n},adjustTickAmount:function(){var n=this._maxTicksKey,t=this.tickPositions,i=this.chart.maxTicks,u,f;if(i&&i[n]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&this.options.alignTicks!==!1){if(u=this.tickAmount,f=t.length,this.tickAmount=n=i[n],f<n){for(;t.length<n;)t.push(dt(t[t.length-1]+this.tickInterval));this.transA*=(f-1)/(n-1);this.max=t[t.length-1]}r(u)&&n!==u&&(this.isDirty=!0)}},setScale:function(){var n=this.stacks,i,r,f,u;if(this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),u=this.len!==this.oldAxisLength,t(this.series,function(n){(n.isDirtyData||n.isDirty||n.xAxis.isDirty)&&(f=!0)}),(u||f||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax)&&((this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickPositions(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty)||(this.isDirty=u||this.min!==this.oldMin||this.max!==this.oldMax)),!this.isXAxis)for(i in n)for(r in n[i])n[i][r].cum=n[i][r].total;this.setMaxTicks()},setExtremes:function(t,i,r,u,f){var o=this,s=o.chart,r=n(r,!0),f=e(f,{min:t,max:i});a(o,"setExtremes",f,function(){o.userMin=t;o.userMax=i;o.isDirtyExtremes=!0;r&&s.redraw(u)})},zoom:function(n,t){return this.allowZoomOutside||(n<=this.dataMin&&(n=f),t>=this.dataMax&&(t=f)),this.displayBtn=n!==f||t!==f,this.setExtremes(n,t,!1,f,{trigger:"zoom"}),!0},setAxisSize:function(){var r=this.chart,t=this.options,u=t.offsetLeft||0,s=t.offsetRight||0,o=this.horiz,f,e;this.left=e=n(t.left,r.plotLeft+u);this.top=f=n(t.top,r.plotTop);this.width=u=n(t.width,r.plotWidth-u+s);this.height=t=n(t.height,r.plotHeight);this.bottom=r.chartHeight-t-f;this.right=r.chartWidth-u-e;this.len=i(o?u:t,0);this.pos=o?e:f},getExtremes:function(){var n=this.isLog;return{min:n?dt(yt(this.min)):this.min,max:n?dt(yt(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(n){var t=this.isLog,i=t?yt(this.min):this.min,t=t?yt(this.max):this.max;return i>n||n===null?n=i:t<n&&(n=t),this.translate(n,0,1,0,1)},addPlotBand:function(n){this.addPlotBandOrLine(n,"plotBands")},addPlotLine:function(n){this.addPlotBandOrLine(n,"plotLines")},addPlotBandOrLine:function(n,t){var r=new su(this,n).render(),i=this.userOptions;return t&&(i[t]=i[t]||[],i[t].push(n)),this.plotLinesAndBands.push(r),r},getOffset:function(){var u=this,s=u.chart,l=s.renderer,o=u.options,a=u.tickPositions,h=u.ticks,v=u.horiz,e=u.side,k=s.inverted?[1,0,3,2][e]:e,y,d=0,g,nt=0,f=o.title,tt=o.labels,c=0,p=s.axisOffset,it=s.clipOffset,w=[-1,1,1,-1][e],b;if(u.hasData=s=u.hasVisibleSeries||r(u.min)&&r(u.max)&&!!a,u.showAxis=y=s||n(o.showEmpty,!0),u.axisGroup||(u.gridGroup=l.g("grid").attr({zIndex:o.gridZIndex||1}).add(),u.axisGroup=l.g("axis").attr({zIndex:o.zIndex||2}).add(),u.labelGroup=l.g("axis-labels").attr({zIndex:tt.zIndex||7}).add()),s||u.isLinked)t(a,function(n){h[n]?h[n].addLabel():h[n]=new ur(u,n)}),t(a,function(n){(e===0||e===2||{1:"left",3:"right"}[e]===tt.align)&&(c=i(h[n].getLabelSize(),c))}),u.staggerLines&&(c+=(u.staggerLines-1)*16);else for(b in h)h[b].destroy(),delete h[b];f&&f.text&&f.enabled!==!1&&(u.axisTitle||(u.axisTitle=l.text(f.text,0,0,f.useHTML).attr({zIndex:7,rotation:f.rotation||0,align:f.textAlign||{low:"left",middle:"center",high:"right"}[f.align]}).css(f.style).add(u.axisGroup),u.axisTitle.isNew=!0),y&&(d=u.axisTitle.getBBox()[v?"height":"width"],nt=n(f.margin,v?5:10),g=f.offset),u.axisTitle[y?"show":"hide"]());u.offset=w*n(o.offset,p[e]);u.axisTitleMargin=n(g,c+nt+(e!==2&&c&&w*o.labels[v?"y":"x"]));p[e]=i(p[e],u.axisTitleMargin+d+w*u.offset);it[k]=i(it[k],o.lineWidth)},getLinePath:function(n){var i=this.chart,u=this.opposite,t=this.offset,r=this.horiz,f=this.left+(u?this.width:0)+t;return this.lineTop=t=i.chartHeight-this.bottom-(u?this.height:0)+t,u||(n*=-1),i.renderer.crispLine(["M",r?this.left:f,r?t:this.top,"L",r?i.chartWidth-this.right:f,r?t:i.chartHeight-this.bottom],n)},getTitlePosition:function(){var n=this.horiz,i=this.left,e=this.top,t=this.len,r=this.options.title,u=n?i:e,f=this.opposite,o=this.offset,h=s(r.style.fontSize||12),t={low:u+(n?0:t),middle:u+t/2,high:u+(n?t:0)}[r.align],i=(n?e+this.height:i)+(n?1:-1)*(f?-1:1)*this.axisTitleMargin+(this.side===2?h:0);return{x:n?t:i+(f?this.width:0)+o+(r.x||0),y:n?i-(f?this.height:0)+o:t+(r.y||0)}},render:function(){var n=this,h=n.chart,c=h.renderer,i=n.options,k=n.isLog,d=n.isLinked,o=n.tickPositions,a=n.axisTitle,g=n.stacks,u=n.ticks,s=n.minorTicks,e=n.alternateBands,nt=i.stackLabels,tt=i.alternateGridColor,v=n.tickmarkOffset,y=i.lineWidth,l,it=h.hasRendered&&r(n.oldMin)&&!isNaN(n.oldMin),p,w,b,rt,ut;if(l=n.hasData,p=n.showAxis,t([u,s,e],function(n){for(var t in n)n[t].isActive=!1}),(l||d)&&((n.minorTickInterval&&!n.categories&&t(n.getMinorTickPositions(),function(t){s[t]||(s[t]=new ur(n,t,"minor"));it&&s[t].isNew&&s[t].render(null,!0);s[t].render(null,!1,1)}),o.length&&(t(o.slice(1).concat([o[0]]),function(t,i){i=i===o.length-1?0:i+1;(!d||t>=n.min&&t<=n.max)&&(u[t]||(u[t]=new ur(n,t)),it&&u[t].isNew&&u[t].render(i,!0),u[t].render(i,!1,1))}),v&&n.min===0&&(u[-1]||(u[-1]=new ur(n,-1,null,!0)),u[-1].render(-1))),tt&&t(o,function(t,i){i%2==0&&t<n.max&&(e[t]||(e[t]=new su(n)),w=t+v,b=o[i+1]!==f?o[i+1]+v:n.max,e[t].options={from:k?yt(w):w,to:k?yt(b):b,color:tt},e[t].render(),e[t].isActive=!0)}),n._addedPlotLB)||(t((i.plotLines||[]).concat(i.plotBands||[]),function(t){n.addPlotBandOrLine(t)}),n._addedPlotLB=!0)),t([u,s,e],function(n){var t,i,r=[],u=pi?pi.duration||500:0,f=function(){for(i=r.length;i--;)n[r[i]]&&!n[r[i]].isActive&&(n[r[i]].destroy(),delete n[r[i]])};for(t in n)n[t].isActive||(n[t].render(t,!1,0),n[t].isActive=!1,r.push(t));n===e||!h.hasRendered||!u?f():u&&setTimeout(f,u)}),y&&(l=n.getLinePath(y),n.axisLine?n.axisLine.animate({d:l}):n.axisLine=c.path(l).attr({stroke:i.lineColor,"stroke-width":y,zIndex:7}).add(n.axisGroup),n.axisLine[p?"show":"hide"]()),a&&p&&(a[a.isNew?"attr":"animate"](n.getTitlePosition()),a.isNew=!1),nt&&nt.enabled){i=n.stackTotalGroup;i||(n.stackTotalGroup=i=c.g("stack-labels").attr({visibility:"visible",zIndex:6}).add());i.translate(h.plotLeft,h.plotTop);for(rt in g)for(ut in c=g[rt],c)c[ut].render(i)}n.isDirty=!1},removePlotBandOrLine:function(n){for(var t=this.plotLinesAndBands,i=t.length;i--;)t[i].id===n&&t[i].destroy()},setTitle:function(n,t){this.update({title:n},t)},redraw:function(){var n=this.chart.pointer;n.reset&&n.reset(!0);this.render();t(this.plotLinesAndBands,function(n){n.render()});t(this.series,function(n){n.isDirty=!0})},setCategories:function(n,t){this.update({categories:n},t)},destroy:function(){var n=this,i=n.stacks,r;at(n);for(r in i)ir(i[r]),i[r]=null;t([n.ticks,n.minorTicks,n.alternateBands,n.plotLinesAndBands],function(n){ir(n)});t("stackTotalGroup,axisLine,axisGroup,gridGroup,labelGroup,axisTitle".split(","),function(t){n[t]&&(n[t]=n[t].destroy())})}};hu.prototype={init:function(n,t){var r=t.borderWidth,i=t.style,u=s(i.padding);this.chart=n;this.options=t;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=!0;this.label=n.renderer.label("",0,0,t.shape,null,null,t.useHTML,null,"tooltip").attr({padding:u,fill:t.backgroundColor,"stroke-width":r,r:t.borderRadius,zIndex:8}).css(i).css({padding:0}).hide().add();ct||this.label.shadow(t.shadow);this.shared=t.shared},destroy:function(){t(this.crosshairs,function(n){n&&n.destroy()});this.label&&(this.label=this.label.destroy());clearTimeout(this.hideTimer);clearTimeout(this.tooltipTimeout)},move:function(n,t,i,r){var f=this,u=f.now,o=f.options.animation!==!1&&!f.isHidden;e(u,{x:o?(2*u.x+n)/3:n,y:o?(u.y+t)/2:t,anchorX:o?(2*u.anchorX+i)/3:i,anchorY:o?(u.anchorY+r)/2:r});f.label.attr(u);o&&(b(n-u.x)>1||b(t-u.y)>1)&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){f&&f.move(n,t,i,r)},32))},hide:function(){var r=this,i;clearTimeout(this.hideTimer);this.isHidden||(i=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){r.label.fadeOut();r.isHidden=!0},n(this.options.hideDelay,500)),i&&t(i,function(n){n.setState()}),this.chart.hoverPoints=null)},hideCrosshairs:function(){t(this.crosshairs,function(n){n&&n.hide()})},getAnchor:function(n,i){var e,r=this.chart,o=r.inverted,c=r.plotTop,s=0,h=0,l,n=kt(n);return e=n[0].tooltipPos,this.followPointer&&i&&(i.chartX===f&&(i=r.pointer.normalize(i)),e=[i.chartX-r.plotLeft,i.chartY-c]),e||(t(n,function(n){l=n.series.yAxis;s+=n.plotX;h+=(n.plotLow?(n.plotLow+n.plotHigh)/2:n.plotY)+(!o&&l?l.top-c:0)}),s/=n.length,h/=n.length,e=[o?r.plotWidth-h:s,this.shared&&!o&&n.length>1&&i?i.chartY-c:o?r.plotHeight-s:h]),or(e,u)},getPosition:function(t,r,u){var f=this.chart,h=f.plotLeft,o=f.plotTop,c=f.plotWidth,l=f.plotHeight,s=n(this.options.distance,12),a=u.plotX,u=u.plotY,f=a+h+(f.inverted?s:-t-s),e=u-r+o+15,v;return f<7&&(f=h+i(a,0)+s),f+t>h+c&&(f-=f+t-(h+c),e=u-r+o-s,v=!0),e<o+5&&(e=o+5,v&&u>=e&&u<=e+r&&(e=u+o+s)),e+r>o+l&&(e=i(o,o+l-r-s)),{x:f,y:e}},defaultFormatter:function(n){var u=this.points||kt(this),i=u[0].series,r;return r=[i.tooltipHeaderFormatter(u[0])],t(u,function(n){i=n.series;r.push(i.tooltipFormatter&&i.tooltipFormatter(n)||n.point.tooltipFormatter(i.tooltipOptions.pointFormat))}),r.push(n.options.footerFormat||""),r.join("")},refresh:function(i,r){var h=this.chart,u=this.label,s=this.options,v,c,f,e={},l,p=[],y,o;if(l=s.formatter||this.defaultFormatter,e=h.hoverPoints,o=s.crosshairs,f=this.shared,clearTimeout(this.hideTimer),this.followPointer=kt(i)[0].series.tooltipOptions.followPointer,c=this.getAnchor(i,r),v=c[0],c=c[1],f&&(!i.series||!i.series.noSharedTooltip)?(h.hoverPoints=i,e&&t(e,function(n){n.setState()}),t(i,function(n){n.setState("hover");p.push(n.getLabelConfig())}),e={x:i[0].category,y:i[0].y},e.points=p,i=i[0]):e=i.getLabelConfig(),l=l.call(e,this),e=i.series,f=f||!e.isCartesian||e.tooltipOutsidePlot||h.isInsidePlot(v,c),l===!1||!f?this.hide():(this.isHidden&&(vr(u),u.attr("opacity",1).show()),u.attr({text:l}),y=s.borderColor||i.color||e.color||"#606060",u.attr({stroke:y}),this.updatePosition({plotX:v,plotY:c}),this.isHidden=!1),o)for(o=kt(o),u=o.length;u--;)(s=i.series[u?"yAxis":"xAxis"],o[u]&&s)&&((f=u?n(i.stackY,i.y):i.x,s.isLog&&(f=ii(f)),s=s.getPlotLinePath(f,1),this.crosshairs[u])?this.crosshairs[u].attr({d:s,visibility:"visible"}):(f={"stroke-width":o[u].width||1,stroke:o[u].color||"#C0C0C0",zIndex:o[u].zIndex||2},o[u].dashStyle&&(f.dashstyle=o[u].dashStyle),this.crosshairs[u]=h.renderer.path(s).attr(f).add()));a(h,"tooltipRefresh",{text:l,x:v+h.plotLeft,y:c+h.plotTop,borderColor:y})},updatePosition:function(n){var i=this.chart,t=this.label,t=(this.options.positioner||this.getPosition).call(this,t.width,t.height,n);this.move(u(t.x),u(t.y),n.plotX+i.plotLeft,n.plotY+i.plotTop)}};cu.prototype={init:function(n,t){var i=ct?"":t.chart.zoomType,r=n.inverted,u;this.options=t;this.chart=n;this.zoomX=u=/x/.test(i);this.zoomY=i=/y/.test(i);this.zoomHor=u&&!r||i&&r;this.zoomVert=i&&!r||u&&r;this.pinchDown=[];this.lastValidTouch={};t.tooltip.enabled&&(n.tooltip=new hu(n,t.tooltip));this.setDOMEvents()},normalize:function(n){var t,r,i,n=n||g.event;return n.target||(n.target=n.srcElement),n=df(n),i=n.touches?n.touches.item(0):n,this.chartPosition=t=ie(this.chart.container),i.pageX===f?(r=n.x,t=n.y):(r=i.pageX-t.left,t=i.pageY-t.top),e(n,{chartX:u(r),chartY:u(t)})},getCoordinates:function(n){var i={xAxis:[],yAxis:[]};return t(this.chart.axes,function(t){i[t.isXAxis?"xAxis":"yAxis"].push({axis:t,value:t.toValue(n[t.horiz?"chartX":"chartY"])})}),i},getIndex:function(n){var t=this.chart;return t.inverted?t.plotHeight+t.plotTop-n.chartY:n.chartX-t.plotLeft},runPointActions:function(n){var t=this.chart,f=t.series,u=t.tooltip,i,c=t.hoverPoint,o=t.hoverSeries,e,r,s=t.chartWidth,h=this.getIndex(n);if(u&&this.options.tooltip.shared&&(!o||!o.noSharedTooltip)){for(i=[],e=f.length,r=0;r<e;r++)f[r].visible&&f[r].options.enableMouseTracking!==!1&&!f[r].noSharedTooltip&&f[r].tooltipPoints.length&&(t=f[r].tooltipPoints[h],t.series)&&(t._dist=b(h-t.clientX),s=v(s,t._dist),i.push(t));for(e=i.length;e--;)i[e]._dist>s&&i.splice(e,1);i.length&&i[0].clientX!==this.hoverX&&(u.refresh(i,n),this.hoverX=i[0].clientX)}if(o&&o.tracker){if((t=o.tooltipPoints[h])&&t!==c)t.onMouseOver(n)}else u&&u.followPointer&&!u.isHidden&&(n=u.getAnchor([{}],n),u.updatePosition({plotX:n[0],plotY:n[1]}))},reset:function(n){var t=this.chart,u=t.hoverSeries,r=t.hoverPoint,i=t.tooltip,t=i&&i.shared?t.hoverPoints:r;(n=n&&i&&t)&&kt(t)[0].plotX===f&&(n=!1);n?i.refresh(t):(r&&r.onMouseOut(),u&&u.onMouseOut(),i&&(i.hide(),i.hideCrosshairs()),this.hoverX=null)},scaleGroups:function(n,i){var r=this.chart;t(r.series,function(t){t.xAxis&&t.xAxis.zoomEnabled&&(t.group.attr(n),t.markerGroup&&(t.markerGroup.attr(n),t.markerGroup.clip(i?r.clipRect:null)),t.dataLabelsGroup&&t.dataLabelsGroup.attr(n))});r.clipRect.attr(i||r.clipBox)},pinchTranslateDirection:function(n,t,i,r,u,f,e){var l=this.chart,h=n?"x":"y",k=n?"X":"Y",a="chart"+k,it=n?"width":"height",d=l["plot"+(n?"Left":"Top")],c,g,o=1,nt=l.inverted,v=l.bounds[n?"h":"v"],y=t.length===1,p=t[0][a],s=i[0][a],rt=!y&&t[1][a],w=!y&&i[1][a],tt,i=function(){!y&&b(p-rt)>20&&(o=b(s-w)/b(p-rt));g=(d-s)/o+p;c=l["plot"+(n?"Width":"Height")]/o};i();t=g;t<v.min?(t=v.min,tt=!0):t+c>v.max&&(t=v.max-c,tt=!0);tt?(s-=.8*(s-e[h][0]),y||(w-=.8*(w-e[h][1])),i()):e[h]=[s,w];nt||(f[h]=g-d,f[it]=c);f=nt?1/o:o;u[it]=c;u[h]=t;r[nt?n?"scaleY":"scaleX":"scale"+k]=o;r["translate"+k]=f*d+(s-f*p)},pinch:function(n){var r=this,f=r.chart,u=r.pinchDown,y=f.tooltip&&f.tooltip.options.followTouchMove,o=n.touches,b=o.length,s=r.lastValidTouch,p=r.zoomHor||r.pinchHor,w=r.zoomVert||r.pinchVert,c=p||w,h=r.selectionMarker,l={},a={};n.type==="touchstart"&&(y||c)&&n.preventDefault();or(o,function(n){return r.normalize(n)});n.type==="touchstart"?(t(o,function(n,t){u[t]={chartX:n.chartX,chartY:n.chartY}}),s.x=[u[0].chartX,u[1]&&u[1].chartX],s.y=[u[0].chartY,u[1]&&u[1].chartY],t(f.axes,function(n){if(n.zoomEnabled){var r=f.bounds[n.horiz?"h":"v"],u=n.minPixelPadding,t=n.toPixels(n.dataMin),e=n.toPixels(n.dataMax),o=v(t,e),t=i(t,e);r.min=v(n.pos,o-u);r.max=i(n.pos+n.len,t+u)}})):u.length&&(h||(r.selectionMarker=h=e({destroy:si},f.plotBox)),p&&r.pinchTranslateDirection(!0,u,o,l,h,a,s),w&&r.pinchTranslateDirection(!1,u,o,l,h,a,s),r.hasPinched=c,r.scaleGroups(l,a),!c&&y&&b===1&&this.runPointActions(r.normalize(n)))},dragStart:function(n){var t=this.chart;t.mouseIsDown=n.type;t.cancelClick=!1;t.mouseDownX=this.mouseDownX=n.chartX;this.mouseDownY=n.chartY},drag:function(n){var i=this.chart,l=i.options.chart,r=n.chartX,n=n.chartY,t=this.zoomHor,a=this.zoomVert,u=i.plotLeft,f=i.plotTop,s=i.plotWidth,h=i.plotHeight,c,e=this.mouseDownX,o=this.mouseDownY;r<u?r=u:r>u+s&&(r=u+s);n<f?n=f:n>f+h&&(n=f+h);this.hasDragged=Math.sqrt(Math.pow(e-r,2)+Math.pow(o-n,2));this.hasDragged>10&&(c=i.isInsidePlot(e-u,o-f),i.hasCartesianSeries&&(this.zoomX||this.zoomY)&&c&&!this.selectionMarker&&(this.selectionMarker=i.renderer.rect(u,f,t?1:s,a?1:h,0).attr({fill:l.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()),this.selectionMarker&&t&&(t=r-e,this.selectionMarker.attr({width:b(t),x:(t>0?0:t)+e})),this.selectionMarker&&a&&(t=n-o,this.selectionMarker.attr({height:b(t),y:(t>0?0:t)+o})),c&&!this.selectionMarker&&l.panning&&i.pan(r))},drop:function(n){var r=this.chart,f=this.hasPinched;if(this.selectionMarker){var o={xAxis:[],yAxis:[],originalEvent:n.originalEvent||n},u=this.selectionMarker,s=u.x,h=u.y,c;(this.hasDragged||f)&&(t(r.axes,function(n){if(n.zoomEnabled){var t=n.horiz,r=n.toValue(t?s:h),t=n.toValue(t?s+u.width:h+u.height);isNaN(r)||isNaN(t)||(o[n.xOrY+"Axis"].push({axis:n,min:v(r,t),max:i(r,t)}),c=!0)}}),c&&a(r,"selection",o,function(n){r.zoom(e(n,f?{animation:!1}:null))}));this.selectionMarker=this.selectionMarker.destroy();f&&this.scaleGroups({translateX:r.plotLeft,translateY:r.plotTop,scaleX:1,scaleY:1})}r&&(p(r.container,{cursor:r._cursor}),r.cancelClick=this.hasDragged>10,r.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(n){n=this.normalize(n);n.preventDefault&&n.preventDefault();this.dragStart(n)},onDocumentMouseUp:function(n){this.drop(n)},onDocumentMouseMove:function(n){var t=this.chart,i=this.chartPosition,r=t.hoverSeries,n=df(n);i&&r&&r.isCartesian&&!t.isInsidePlot(n.pageX-i.left-t.plotLeft,n.pageY-i.top-t.plotTop)&&this.reset()},onContainerMouseLeave:function(){this.reset();this.chartPosition=null},onContainerMouseMove:function(n){var t=this.chart,n=this.normalize(n);n.returnValue=!1;t.mouseIsDown==="mousedown"&&this.drag(n);t.isInsidePlot(n.chartX-t.plotLeft,n.chartY-t.plotTop)&&!t.openMenu&&this.runPointActions(n)},inClass:function(n,t){for(var i;n;){if(i=h(n,"class")){if(i.indexOf(t)!==-1)return!0;if(i.indexOf("highcharts-container")!==-1)return!1}n=n.parentNode}},onTrackerMouseOut:function(n){var t=this.chart.hoverSeries;!t||t.options.stickyTracking||this.inClass(n.toElement||n.relatedTarget,"highcharts-tooltip")||t.onMouseOut()},onContainerClick:function(n){var t=this.chart,i=t.hoverPoint,o=t.plotLeft,s=t.plotTop,h=t.inverted,r,u,f,n=this.normalize(n);n.cancelBubble=!0;t.cancelClick||(i&&this.inClass(n.target,"highcharts-tracker")?(r=this.chartPosition,u=i.plotX,f=i.plotY,e(i,{pageX:r.left+o+(h?t.plotWidth-f:u),pageY:r.top+s+(h?t.plotHeight-u:f)}),a(i.series,"click",e(n,{point:i})),t.hoverPoint&&i.firePointEvent("click",n)):(e(n,this.getCoordinates(n)),t.isInsidePlot(n.chartX-o,n.chartY-s)&&a(t,"click",n)))},onContainerTouchStart:function(n){var t=this.chart;n.touches.length===1?(n=this.normalize(n),t.isInsidePlot(n.chartX-t.plotLeft,n.chartY-t.plotTop)&&(this.runPointActions(n),this.pinch(n))):n.touches.length===2&&this.pinch(n)},onContainerTouchMove:function(n){(n.touches.length===1||n.touches.length===2)&&this.pinch(n)},onDocumentTouchEnd:function(n){this.drop(n)},setDOMEvents:function(){var i=this,n=i.chart.container,r;this._events=r=[[n,"onmousedown","onContainerMouseDown"],[n,"onmousemove","onContainerMouseMove"],[n,"onclick","onContainerClick"],[n,"mouseleave","onContainerMouseLeave"],[c,"mousemove","onDocumentMouseMove"],[c,"mouseup","onDocumentMouseUp"]];dr&&r.push([n,"ontouchstart","onContainerTouchStart"],[n,"ontouchmove","onContainerTouchMove"],[c,"touchend","onDocumentTouchEnd"]);t(r,function(n){i["_"+n[2]]=function(t){i[n[2]](t)};n[1].indexOf("on")===0?n[0][n[1]]=i["_"+n[2]]:k(n[0],n[1],i["_"+n[2]])})},destroy:function(){var n=this;t(n._events,function(t){t[1].indexOf("on")===0?t[0][t[1]]=null:at(t[0],t[1],n["_"+t[2]])});delete n._events;clearInterval(n.tooltipTimeout)}};lu.prototype={init:function(t,i){var r=this,u=i.itemStyle,f=n(i.padding,8),e=i.itemMarginTop||0;this.options=i;i.enabled&&(r.baseline=s(u.fontSize)+3+e,r.itemStyle=u,r.itemHiddenStyle=o(u,i.itemHiddenStyle),r.itemMarginTop=e,r.padding=f,r.initialItemX=f,r.initialItemY=f-5,r.maxItemWidth=0,r.chart=t,r.itemHeight=0,r.lastLineHeight=0,r.render(),k(r.chart,"endResize",function(){r.positionCheckboxes()}))},colorizeItem:function(n,t){var u=this.options,r=n.legendItem,s=n.legendLine,h=n.legendSymbol,i=this.itemHiddenStyle.color,u=t?u.itemStyle.color:i,e=t?n.color:i,i=n.options&&n.options.marker,c={stroke:e,fill:e},o;if(r&&r.css({fill:u,color:u}),s&&s.attr({stroke:e}),h){if(i)for(o in i=n.convertAttribs(i),i)r=i[o],r!==f&&(c[o]=r);h.attr(c)}},positionItem:function(n){var i=this.options,f=i.symbolPadding,i=!i.rtl,t=n._legendItemPos,r=t[0],t=t[1],u=n.checkbox;n.legendGroup&&n.legendGroup.translate(i?r:this.legendWidth-r-2*f-4,t);u&&(u.x=r,u.y=t)},destroyItem:function(n){var i=n.checkbox;t(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){n[t]&&n[t].destroy()});i&&sr(n.checkbox)},destroy:function(){var n=this.group,t=this.box;t&&(this.box=t.destroy());n&&(this.group=n.destroy())},positionCheckboxes:function(n){var r=this.group.alignAttr,i,u=this.clipHeight||this.legendHeight;r&&(i=r.translateY,t(this.allItems,function(t){var f=t.checkbox,e;f&&(e=i+f.y+(n||0)+3,p(f,{left:r.translateX+t.legendItemWidth+f.x-20+"px",top:e+"px",display:e>i-6&&e<i+u-6?"":rt}))}))},renderTitle:function(){var i=this.padding,n=this.options.title,t=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,i-3,i-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(n.style).add(this.group)),t=this.title.getBBox().height,this.contentGroup.attr({translateY:t}));this.titleHeight=t},renderItem:function(n){var p,t=this,h=t.chart,e=h.renderer,r=t.options,c=r.layout==="horizontal",u=r.symbolWidth,l=r.symbolPadding,w=t.itemStyle,b=t.itemHiddenStyle,d=t.padding,g=!r.rtl,nt=r.width,v=r.itemMarginBottom||0,y=t.itemMarginTop,s=t.initialItemX,f=n.legendItem,tt=n.series||n,it=tt.options,rt=it.showCheckbox,ft=r.useHTML;!f&&(n.legendGroup=e.g("legend-item").attr({zIndex:1}).add(t.scrollGroup),tt.drawLegendSymbol(t,n),n.legendItem=f=e.text(r.labelFormat?vi(r.labelFormat,n):r.labelFormatter.call(n),g?u+l:-l,t.baseline,ft).css(o(n.visible?w:b)).attr({align:g?"left":"right",zIndex:2}).add(n.legendGroup),(ft?f:n.legendGroup).on("mouseover",function(){n.setState("hover");f.css(t.options.itemHoverStyle)}).on("mouseout",function(){f.css(n.visible?w:b);n.setState()}).on("click",function(t){var i=function(){n.setVisible()},t={browserEvent:t};n.firePointEvent?n.firePointEvent("legendItemClick",t,i):a(n,"legendItemClick",t,i)}),t.colorizeItem(n,n.visible),it&&rt)&&(n.checkbox=ut("input",{type:"checkbox",checked:n.selected,defaultChecked:n.selected},r.itemCheckboxStyle,h.container),k(n.checkbox,"click",function(t){a(n,"checkboxClick",{checked:t.target.checked},function(){n.select()})}));e=f.getBBox();p=n.legendItemWidth=r.itemWidth||u+l+e.width+d+(rt?20:0);r=p;t.itemHeight=u=e.height;c&&t.itemX-s+r>(nt||h.chartWidth-2*d-s)&&(t.itemX=s,t.itemY+=y+t.lastLineHeight+v,t.lastLineHeight=0);t.maxItemWidth=i(t.maxItemWidth,r);t.lastItemY=y+t.itemY+v;t.lastLineHeight=i(u,t.lastLineHeight);n._legendItemPos=[t.itemX,t.itemY];c?t.itemX+=r:(t.itemY+=y+u+v,t.lastLineHeight=u);t.offsetWidth=nt||i(c?t.itemX-s:r,t.offsetWidth)},render:function(){var n=this,l=n.chart,c=l.renderer,h=n.group,i,a,s,u,f=n.box,o=n.options,y=n.padding,v=o.borderWidth,p=o.backgroundColor;n.itemX=n.initialItemX;n.itemY=n.initialItemY;n.offsetWidth=0;n.lastItemY=0;h||(n.group=h=c.g("legend").attr({zIndex:7}).add(),n.contentGroup=c.g().attr({zIndex:1}).add(h),n.scrollGroup=c.g().add(n.contentGroup));n.renderTitle();i=[];t(l.series,function(n){var t=n.options;t.showInLegend&&!r(t.linkedTo)&&(i=i.concat(n.legendItems||(t.legendType==="point"?n.data:n)))});ef(i,function(n,t){return(n.options&&n.options.legendIndex||0)-(t.options&&t.options.legendIndex||0)});o.reversed&&i.reverse();n.allItems=i;n.display=a=!!i.length;t(i,function(t){n.renderItem(t)});s=o.width||n.offsetWidth;u=n.lastItemY+n.lastLineHeight+n.titleHeight;u=n.handleOverflow(u);(v||p)&&(s+=y,u+=y,f?s>0&&u>0&&(f[f.isNew?"attr":"animate"](f.crisp(null,null,null,s,u)),f.isNew=!1):(n.box=f=c.rect(0,0,s,u,o.borderRadius,v||0).attr({stroke:o.borderColor,"stroke-width":v||0,fill:p||rt}).add(h).shadow(o.shadow),f.isNew=!0),f[a?"show":"hide"]());n.legendWidth=s;n.legendHeight=u;t(i,function(t){n.positionItem(t)});a&&h.align(e({width:s,height:u},o),!0,"spacingBox");l.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e=this,u=this.chart,o=u.renderer,f=this.options,i=f.y,i=u.spacingBox.height+(f.verticalAlign==="top"?-i:i)-this.padding,l=f.maxHeight,s=this.clipRect,c=f.navigation,a=n(c.animation,!0),h=c.arrowSize||12,r=this.nav;return f.layout==="horizontal"&&(i/=2),l&&(i=v(i,l)),t>i&&!f.useHTML?(this.clipHeight=u=i-20-this.titleHeight,this.pageCount=gt(t/u),this.currentPage=n(this.currentPage,1),this.fullHeight=t,s||(s=e.clipRect=o.clipRect(0,0,9999,0),e.contentGroup.clip(s)),s.attr({height:u}),r||(this.nav=r=o.g().attr({zIndex:1}).add(this.group),this.up=o.symbol("triangle",0,0,h,h).on("click",function(){e.scroll(-1,a)}).add(r),this.pager=o.text("",15,10).css(c.style).add(r),this.down=o.symbol("triangle-down",0,0,h,h).on("click",function(){e.scroll(1,a)}).add(r)),e.scroll(0),t=i):r&&(s.attr({height:u.chartHeight}),r.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(n,t){var u=this.pageCount,i=this.currentPage+n,r=this.clipHeight,e=this.options.navigation,o=e.activeColor,s=e.inactiveColor,e=this.pager,h=this.padding;i>u&&(i=u);i>0&&(t!==f&&rr(t,this.chart),this.nav.attr({translateX:h,translateY:r+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:i===1?s:o}).css({cursor:i===1?"default":"pointer"}),e.attr({text:i+"/"+this.pageCount}),this.down.attr({x:18+this.pager.getBBox().width,fill:i===u?s:o}).css({cursor:i===u?"default":"pointer"}),r=-v(r*(i-1),this.fullHeight-r+h)+1,this.scrollGroup.animate({translateY:r}),e.attr({text:i+"/"+u}),this.currentPage=i,this.positionCheckboxes(r))}};au.prototype={init:function(t,i){var e,f=t.series,u,s;t.series=null;e=o(nt,t);e.series=t.series=f;var f=e.chart,r=f.margin,r=ot(r)?r:[r,r,r,r];if(this.optionsMarginTop=n(f.marginTop,r[0]),this.optionsMarginRight=n(f.marginRight,r[1]),this.optionsMarginBottom=n(f.marginBottom,r[2]),this.optionsMarginLeft=n(f.marginLeft,r[3]),this.runChartClick=(r=f.events)&&!!r.click,this.bounds={h:{},v:{}},this.callback=i,this.isResizing=0,this.options=e,this.axes=[],this.series=[],this.hasCartesianSeries=f.showAxes,u=this,u.index=wi.length,wi.push(u),f.reflow!==!1&&k(u,"load",function(){u.initReflow()}),r)for(s in r)k(u,s,r[s]);u.xAxis=[];u.yAxis=[];u.animation=ct?!1:n(f.animation,!0);u.pointCount=0;u.counters=new ff;u.firstRender()},initSeries:function(n){var t=this.options.chart;return(t=lt[n.type||t.type||t.defaultSeriesType])||fi(17,!0),t=new t,t.init(this,n),t},addSeries:function(t,i,r){var f,u=this;return t&&(i=n(i,!0),a(u,"addSeries",{options:t},function(){f=u.initSeries(t);u.isDirtyLegend=!0;i&&u.redraw(r)})),f},addAxis:function(t,i,r,u){var i=i?"xAxis":"yAxis",f=this.options;new yr(this,o(t,{index:this[i].length}));f[i]=kt(f[i]||{});f[i].push(t);n(r,!0)&&this.redraw(u)},isInsidePlot:function(n,t,i){var r=i?t:n,n=i?n:t;return r>=0&&r<=this.plotWidth&&n>=0&&n<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&t(this.axes,function(n){n.adjustTickAmount()});this.maxTicks=null},redraw:function(n){var o=this.axes,i=this.series,u=this.pointer,s=this.legend,h=this.isDirtyLegend,f,e=this.isDirtyBox,c=i.length,r=c,l=this.renderer,v=l.isHidden(),y=[];for(rr(n,this),v&&this.cloneRenderTo();r--;)if(n=i[r],n.isDirty&&n.options.stacking){f=!0;break}if(f)for(r=c;r--;)(n=i[r],n.options.stacking)&&(n.isDirty=!0);t(i,function(n){n.isDirty&&n.options.legendType==="point"&&(h=!0)});h&&s.options.enabled&&(s.render(),this.isDirtyLegend=!1);this.hasCartesianSeries&&(this.isResizing||(this.maxTicks=null,t(o,function(n){n.setScale()})),this.adjustTickAmounts(),this.getMargins(),t(o,function(n){n.isDirtyExtremes&&(n.isDirtyExtremes=!1,y.push(function(){a(n,"afterSetExtremes",n.getExtremes())}));(n.isDirty||e||f)&&(n.redraw(),e=!0)}));e&&this.drawChartBox();t(i,function(n){n.isDirty&&n.visible&&(!n.isCartesian||n.xAxis)&&n.redraw()});u&&u.reset&&u.reset(!0);l.draw();a(this,"redraw");v&&this.cloneRenderTo(!0);t(y,function(n){n.call()})},showLoading:function(n){var r=this.options,t=this.loadingDiv,i=r.loading;t||(this.loadingDiv=t=ut(bi,{className:"highcharts-loading"},e(i.style,{zIndex:10,display:rt}),this.container),this.loadingSpan=ut("span",null,i.labelStyle,t));this.loadingSpan.innerHTML=n||r.lang.loading;this.loadingShown||(p(t,{opacity:0,display:"",left:this.plotLeft+"px",top:this.plotTop+"px",width:this.plotWidth+"px",height:this.plotHeight+"px"}),nf(t,{opacity:i.style.opacity},{duration:i.showDuration||0}),this.loadingShown=!0)},hideLoading:function(){var t=this.options,n=this.loadingDiv;n&&nf(n,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){p(n,{display:rt})}});this.loadingShown=!1},get:function(n){for(var i=this.axes,r=this.series,u,t=0;t<i.length;t++)if(i[t].options.id===n)return i[t];for(t=0;t<r.length;t++)if(r[t].options.id===n)return r[t];for(t=0;t<r.length;t++)for(u=r[t].points||[],i=0;i<u.length;i++)if(u[i].id===n)return u[i];return null},getAxes:function(){var r=this,n=this.options,i=n.xAxis=kt(n.xAxis||{}),n=n.yAxis=kt(n.yAxis||{});t(i,function(n,t){n.index=t;n.isX=!0});t(n,function(n,t){n.index=t});i=i.concat(n);t(i,function(n){new yr(r,n)});r.adjustTickAmounts()},getSelectedPoints:function(){var n=[];return t(this.series,function(t){n=n.concat(gu(t.points||[],function(n){return n.selected}))}),n},getSelectedSeries:function(){return gu(this.series,function(n){return n.selected})},showResetZoom:function(){var t=this,i=nt.lang,n=t.options.chart.resetZoomButton,r=n.theme,u=r.states,f=n.relativeTo==="chart"?null:"plotBox";this.resetZoomButton=t.renderer.button(i.resetZoom,null,null,function(){t.zoomOut()},r,u&&u.hover).attr({align:n.position.align,title:i.resetZoomTitle}).add().align(n.position,!1,f)},zoomOut:function(){var n=this;a(n,"selection",{resetSelection:!0},function(){n.zoom()})},zoom:function(i){var u,e=this.pointer,f=!1,r;!i||i.resetSelection?t(this.axes,function(n){u=n.zoom()}):t(i.xAxis.concat(i.yAxis),function(n){var t=n.axis,i=t.isXAxis;(e[i?"zoomX":"zoomY"]||e[i?"pinchX":"pinchY"])&&(u=t.zoom(n.min,n.max),t.displayBtn&&(f=!0))});r=this.resetZoomButton;f&&!r?this.showResetZoom():!f&&ot(r)&&(this.resetZoomButton=r.destroy());u&&this.redraw(n(this.options.chart.animation,i&&i.animation,this.pointCount<100))},pan:function(n){var r=this.xAxis[0],u=this.mouseDownX,f=r.pointRange/2,e=r.getExtremes(),o=r.translate(u-n,!0)+f,u=r.translate(u+this.plotWidth-n,!0)-f;(f=this.hoverPoints)&&t(f,function(n){n.setState()});r.series.length&&o>v(e.dataMin,e.min)&&u<i(e.dataMax,e.max)&&r.setExtremes(o,u,!0,!1,{trigger:"pan"});this.mouseDownX=n;p(this.container,{cursor:"move"})},setTitle:function(n,i){var f,u=this,r=u.options,e;e=r.title=o(r.title,n);f=r.subtitle=o(r.subtitle,i);r=f;t([["title",n,e],["subtitle",i,r]],function(n){var t=n[0],i=u[t],r=n[1],n=n[2];i&&r&&(u[t]=i=i.destroy());n&&n.text&&!i&&(u[t]=u.renderer.text(n.text,0,0,n.useHTML).attr({align:n.align,"class":"highcharts-"+t,zIndex:n.zIndex||4}).css(n.style).add().align(n,!1,"spacingBox"))})},getChartSize:function(){var t=this.options.chart,r=this.renderToClone||this.renderTo;this.containerWidth=eu(r,"width");this.containerHeight=eu(r,"height");this.chartWidth=i(0,t.width||this.containerWidth||600);this.chartHeight=i(0,n(t.height,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(n){var t=this.renderToClone,i=this.container;n?t&&(this.renderTo.appendChild(i),sr(t),delete this.renderToClone):(i&&this.renderTo.removeChild(i),this.renderToClone=t=this.renderTo.cloneNode(0),p(t,{position:"absolute",top:"-9999px",display:"block"}),c.body.appendChild(t),i&&t.appendChild(i))},getContainer:function(){var n,i=this.options.chart,t,r,u;this.renderTo=n=i.renderTo;u="highcharts-"+vu++;wt(n)&&(this.renderTo=n=c.getElementById(n));n||fi(13,!0);t=s(h(n,"data-highcharts-chart"));!isNaN(t)&&wi[t]&&wi[t].destroy();h(n,"data-highcharts-chart",this.index);n.innerHTML="";n.offsetWidth||this.cloneRenderTo();this.getChartSize();t=this.chartWidth;r=this.chartHeight;this.container=n=ut(bi,{className:"highcharts-container"+(i.className?" "+i.className:""),id:u},e({position:"relative",overflow:"hidden",width:t+"px",height:r+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},i.style),this.renderToClone||n);this._cursor=n.style.cursor;this.renderer=i.forExport?new ci(n,t,r,!0):new hr(n,t,r);ct&&this.renderer.create(this,n,t,r)},getMargins:function(){var f=this.options.chart,l=f.spacingTop,g=f.spacingRight,nt=f.spacingBottom,f=f.spacingLeft,e,o=this.legend,a=this.optionsMarginTop,v=this.optionsMarginLeft,y=this.optionsMarginRight,p=this.optionsMarginBottom,h=this.options.title,s=this.options.subtitle,u=this.options.legend,c=n(u.margin,10),w=u.x,b=u.y,k=u.align,d=u.verticalAlign;this.resetMargins();e=this.axisOffset;(this.title||this.subtitle)&&!r(this.optionsMarginTop)&&(s=i(this.title&&!h.floating&&!h.verticalAlign&&h.y||0,this.subtitle&&!s.floating&&!s.verticalAlign&&s.y||0))&&(this.plotTop=i(this.plotTop,s+n(h.margin,15)+l));o.display&&!u.floating&&(k==="right"?r(y)||(this.marginRight=i(this.marginRight,o.legendWidth-w+c+g)):k==="left"?r(v)||(this.plotLeft=i(this.plotLeft,o.legendWidth+w+c+f)):d==="top"?r(a)||(this.plotTop=i(this.plotTop,o.legendHeight+b+c+l)):d!=="bottom"||r(p)||(this.marginBottom=i(this.marginBottom,o.legendHeight-b+c+nt)));this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin);this.extraTopMargin&&(this.plotTop+=this.extraTopMargin);this.hasCartesianSeries&&t(this.axes,function(n){n.getOffset()});r(v)||(this.plotLeft+=e[3]);r(a)||(this.plotTop+=e[0]);r(p)||(this.marginBottom+=e[2]);r(y)||(this.marginRight+=e[1]);this.setChartSize()},initReflow:function(){function t(t){var f=i.width||eu(r,"width"),e=i.height||eu(r,"height"),t=t?t.target:g;!n.hasUserSize&&f&&e&&(t===g||t===c)&&((f!==n.containerWidth||e!==n.containerHeight)&&(clearTimeout(u),n.reflowTimeout=u=setTimeout(function(){n.container&&(n.setSize(f,e,!1),n.hasUserSize=null)},100)),n.containerWidth=f,n.containerHeight=e)}var n=this,i=n.options.chart,r=n.renderTo,u;k(g,"resize",t);k(n,"destroy",function(){at(g,"resize",t)})},setSize:function(n,f,e){var o=this,s,h,c;o.isResizing+=1;c=function(){o&&a(o,"endResize",null,function(){o.isResizing-=1})};rr(e,o);o.oldChartHeight=o.chartHeight;o.oldChartWidth=o.chartWidth;r(n)&&(o.chartWidth=s=i(0,u(n)),o.hasUserSize=!!s);r(f)&&(o.chartHeight=h=i(0,u(f)));p(o.container,{width:s+"px",height:h+"px"});o.setChartSize(!0);o.renderer.setSize(s,h,e);o.maxTicks=null;t(o.axes,function(n){n.isDirty=!0;n.setScale()});t(o.series,function(n){n.isDirty=!0});o.isDirtyLegend=!0;o.isDirtyBox=!0;o.getMargins();o.redraw(e);o.oldChartHeight=null;a(o,"resize");pi===!1?c():setTimeout(c,pi&&pi.duration||500)},setChartSize:function(n){var r=this.inverted,f=this.renderer,e=this.chartWidth,v=this.chartHeight,o=this.options.chart,y=o.spacingTop,w=o.spacingRight,b=o.spacingBottom,p=o.spacingLeft,s=this.clipOffset,l,a,h,c;this.plotLeft=l=u(this.plotLeft);this.plotTop=a=u(this.plotTop);this.plotWidth=h=i(0,u(e-l-this.marginRight));this.plotHeight=c=i(0,u(v-a-this.marginBottom));this.plotSizeX=r?c:h;this.plotSizeY=r?h:c;this.plotBorderWidth=r=o.plotBorderWidth||0;this.spacingBox=f.spacingBox={x:p,y:y,width:e-p-w,height:v-y-b};this.plotBox=f.plotBox={x:l,y:a,width:h,height:c};f=gt(i(r,s[3])/2);e=gt(i(r,s[0])/2);this.clipBox={x:f,y:e,width:it(this.plotSizeX-i(r,s[1])/2-f),height:it(this.plotSizeY-i(r,s[2])/2-e)};n||t(this.axes,function(n){n.setAxisSize();n.setAxisTranslation()})},resetMargins:function(){var t=this.options.chart,i=t.spacingRight,r=t.spacingBottom,u=t.spacingLeft;this.plotTop=n(this.optionsMarginTop,t.spacingTop);this.marginRight=n(this.optionsMarginRight,i);this.marginBottom=n(this.optionsMarginBottom,r);this.plotLeft=n(this.optionsMarginLeft,u);this.axisOffset=[0,0,0,0];this.clipOffset=[0,0,0,0]},drawChartBox:function(){var n=this.options.chart,r=this.renderer,a=this.chartWidth,v=this.chartHeight,t=this.chartBackground,y=this.plotBackground,h=this.plotBorder,p=this.plotBGImage,u=n.borderWidth||0,w=n.backgroundColor,b=n.plotBackgroundColor,k=n.plotBackgroundImage,c=n.plotBorderWidth||0,i,f=this.plotLeft,e=this.plotTop,o=this.plotWidth,s=this.plotHeight,d=this.plotBox,g=this.clipRect,l=this.clipBox;i=u+(n.shadow?8:0);(u||w)&&(t?t.animate(t.crisp(null,null,null,a-i,v-i)):(t={fill:w||rt},u&&(t.stroke=n.borderColor,t["stroke-width"]=u),this.chartBackground=r.rect(i/2,i/2,a-i,v-i,n.borderRadius,u).attr(t).add().shadow(n.shadow)));b&&(y?y.animate(d):this.plotBackground=r.rect(f,e,o,s,0).attr({fill:b}).add().shadow(n.plotShadow));k&&(p?p.animate(d):this.plotBGImage=r.image(k,f,e,o,s).add());g?g.animate({width:l.width,height:l.height}):this.clipRect=r.clipRect(l);c&&(h?h.animate(h.crisp(null,f,e,o,s)):this.plotBorder=r.rect(f,e,o,s,0,c).attr({stroke:n.plotBorderColor,"stroke-width":c,zIndex:1}).add());this.isDirtyBox=!1},propFromSeries:function(){var i=this,u=i.options.chart,n,f=i.options.series,e,r;t(["inverted","angular","polar"],function(t){for(n=lt[u.type||u.defaultSeriesType],r=i[t]||u[t]||n&&n.prototype[t],e=f&&f.length;!r&&e--;)(n=lt[f[e].type])&&n.prototype[t]&&(r=!0);i[t]=r})},render:function(){var n=this,r=n.axes,u=n.renderer,f=n.options,o=f.labels,i=f.credits,h;n.setTitle();n.legend=new lu(n,f.legend);t(r,function(n){n.setScale()});n.getMargins();n.maxTicks=null;t(r,function(n){n.setTickPositions(!0);n.setMaxTicks()});n.adjustTickAmounts();n.getMargins();n.drawChartBox();n.hasCartesianSeries&&t(r,function(n){n.render()});n.seriesGroup||(n.seriesGroup=u.g("series-group").attr({zIndex:3}).add());t(n.series,function(n){n.translate();n.setTooltipPoints();n.render()});o.items&&t(o.items,function(t){var i=e(o.style,t.style),r=s(i.left)+n.plotLeft,f=s(i.top)+n.plotTop+12;delete i.left;delete i.top;u.text(t.html,r,f).attr({zIndex:2}).css(i).add()});i.enabled&&!n.credits&&(h=i.href,n.credits=u.text(i.text,0,0).on("click",function(){h&&(location.href=h)}).attr({align:i.position.align,zIndex:8}).css(i.style).add().align(i.position));n.hasRendered=!0},destroy:function(){var n=this,u=n.axes,e=n.series,r=n.container,i,o=r&&r.parentNode;for(a(n,"destroy"),wi[n.index]=f,n.renderTo.removeAttribute("data-highcharts-chart"),at(n),i=u.length;i--;)u[i]=u[i].destroy();for(i=e.length;i--;)e[i]=e[i].destroy();t("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,pointer,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(t){var i=n[t];i&&i.destroy&&(n[t]=i.destroy())});r&&(r.innerHTML="",at(r),o&&sr(r));for(i in n)delete n[i]},isReadyToRender:function(){var n=this;return!ht&&g==g.top&&c.readyState!=="complete"||ct&&!g.canvg?(ct?gf.push(function(){n.firstRender()},n.options.global.canvasToolsURL):c.attachEvent("onreadystatechange",function(){c.detachEvent("onreadystatechange",n.firstRender);c.readyState==="complete"&&n.firstRender()}),!1):!0},firstRender:function(){var n=this,i=n.options,r=n.callback;n.isReadyToRender()&&(n.getContainer(),a(n,"init"),n.resetMargins(),n.setChartSize(),n.propFromSeries(),n.getAxes(),t(i.series||[],function(t){n.initSeries(t)}),a(n,"beforeRender"),n.pointer=new cu(n,i),n.render(),n.renderer.draw(),r&&r.apply(n,[n]),t(n.callbacks,function(t){t.apply(n,[n])}),n.cloneRenderTo(!0),a(n,"load"))}};au.prototype.callbacks=[];di=function(){};di.prototype={init:function(n,t,i){return this.series=n,this.applyOptions(t,i),this.pointAttr={},n.options.colorByPoint&&(t=n.options.colors||n.chart.options.colors,this.color=this.color||t[n.colorCounter++],n.colorCounter===t.length)&&(n.colorCounter=0),n.chart.pointCount++,this},applyOptions:function(n,t){var i=this.series,r=i.pointValKey,n=di.prototype.optionsToObject.call(this,n);return e(this,n),this.options=this.options?e(this.options,n):n,r&&(this.y=this[r]),this.x===f&&i&&(this.x=t===f?i.autoIncrement():t),this},optionsToObject:function(n){var t,i=this.series,r=i.pointArrayMap||["y"],u=r.length,f=0,e=0;if(typeof n=="number"||n===null)t={y:n};else if(gi(n))for(t={},n.length>u&&(i=typeof n[0],i==="string"?t.name=n[0]:i==="number"&&(t.x=n[0]),f++);e<u;)t[r[e++]]=n[f++];else typeof n=="object"&&(t=n,n.dataLabels&&(i._hasPointLabels=!0),n.marker&&(i._hasPointMarkers=!0));return t},destroy:function(){var n=this.series.chart,t=n.hoverPoints,i;n.pointCount--;t&&(this.setState(),bt(t,this),!t.length)&&(n.hoverPoints=null);this===n.hoverPoint&&this.onMouseOut();(this.graphic||this.dataLabel)&&(at(this),this.destroyElements());this.legendItem&&n.legend.destroyItem(this);for(i in this)this[i]=null},destroyElements:function(){for(var i="graphic,dataLabel,dataLabelUpper,group,connector,shadowGroup".split(","),n,t=6;t--;)n=i[t],this[n]&&(this[n]=this[n].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},select:function(i,r){var u=this,f=u.series,e=f.chart,i=n(i,!u.selected);u.firePointEvent(i?"select":"unselect",{accumulate:r},function(){u.selected=u.options.selected=i;f.options.data[ri(u,f.data)]=u.options;u.setState(i&&"select");r||t(e.getSelectedPoints(),function(n){n.selected&&n!==u&&(n.selected=n.options.selected=!1,f.options.data[ri(n,f.data)]=n.options,n.setState(""),n.firePointEvent("unselect"))})})},onMouseOver:function(n){var u=this.series,t=u.chart,i=t.tooltip,r=t.hoverPoint;r&&r!==this&&r.onMouseOut();this.firePointEvent("mouseOver");i&&(!i.shared||u.noSharedTooltip)&&i.refresh(this,n);this.setState("hover");t.hoverPoint=this},onMouseOut:function(){var n=this.series.chart,t=n.hoverPoints;t&&ri(this,t)!==-1||(this.firePointEvent("mouseOut"),this.setState(),n.hoverPoint=null)},tooltipFormatter:function(i){var u=this.series,r=u.tooltipOptions,o=n(r.valueDecimals,""),f=r.valuePrefix||"",e=r.valueSuffix||"";return t(u.pointArrayMap||["y"],function(n){n="{point."+n;(f||e)&&(i=i.replace(n+"}",f+n+"}"+e));i=i.replace(n+"}",n+":,."+o+"f}")}),vi(i,{point:this,series:this.series})},update:function(t,i,r){var f=this,u=f.series,o=f.graphic,e,s=u.data,h=u.chart,i=n(i,!0);f.firePointEvent("update",{options:t},function(){f.applyOptions(t);ot(t)&&(u.getAttribs(),o&&o.attr(f.pointAttr[u.state]));e=ri(f,s);u.xData[e]=f.x;u.yData[e]=u.toYData?u.toYData(f):f.y;u.zData[e]=f.z;u.options.data[e]=f.options;u.isDirty=!0;u.isDirtyData=!0;i&&h.redraw(r)})},remove:function(t,i){var f=this,r=f.series,e=r.chart,u,o=r.data;rr(i,e);t=n(t,!0);f.firePointEvent("remove",null,function(){u=ri(f,o);o.splice(u,1);r.options.data.splice(u,1);r.xData.splice(u,1);r.yData.splice(u,1);r.zData.splice(u,1);f.destroy();r.isDirty=!0;r.isDirtyData=!0;t&&e.redraw()})},firePointEvent:function(n,t,i){var r=this,u=this.series.options;(u.point.events[n]||r.options&&r.options.events&&r.options.events[n])&&this.importEvents();n==="click"&&u.allowPointSelect&&(i=function(n){r.select(null,n.ctrlKey||n.metaKey||n.shiftKey)});a(this,n,t,i)},importEvents:function(){if(!this.hasImportedEvents){var n=o(this.series.options.point,this.options).events,t;this.events=n;for(t in n)k(this,t,n[t]);this.hasImportedEvents=!0}},setState:function(n){var s=this.plotX,h=this.plotY,r=this.series,t=r.options.states,u=et[r.type].marker&&r.options.marker,a=u&&!u.enabled,f=u&&u.states[n],v=f&&f.enabled===!1,i=r.stateMarkerGraphic,e=this.marker||{},l=r.chart,c=this.pointAttr,n=n||"";n===this.state||this.selected&&n!=="select"||t[n]&&t[n].enabled===!1||n&&(v||a&&!f.enabled)||(this.graphic?(t=u&&this.graphic.symbolName&&c[n].r,this.graphic.attr(o(c[n],t?{x:s-t,y:h-t,width:2*t,height:2*t}:{}))):(n&&f&&(t=f.radius,e=e.symbol||r.symbol,i&&i.currentSymbol!==e&&(i=i.destroy()),i?i.attr({x:s-t,y:h-t}):(r.stateMarkerGraphic=i=l.renderer.symbol(e,s-t,h-t,2*t,2*t).attr(c[n]).add(r.markerGroup),i.currentSymbol=e)),i&&i[n&&l.isInsidePlot(s,h)?"show":"hide"]()),this.state=n)}};tt=function(){};tt.prototype={isCartesian:!0,type:"line",pointClass:di,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},colorCounter:0,init:function(i,r){var u,f,o=i.series;this.chart=i;this.options=r=this.setOptions(r);this.bindAxes();e(this,{name:r.name,state:"",pointAttr:{},visible:r.visible!==!1,selected:r.selected===!0});ct&&(r.animation=!1);f=r.events;for(u in f)k(this,u,f[u]);(f&&f.click||r.point&&r.point.events&&r.point.events.click||r.allowPointSelect)&&(i.runTrackerClick=!0);this.getColor();this.getSymbol();this.setData(r.data,!1);this.isCartesian&&(i.hasCartesianSeries=!0);o.push(this);this._i=o.length-1;ef(o,function(t,i){return n(t.options.index,t._i)-n(i.options.index,t._i)});t(o,function(n,t){n.index=t;n.name=n.name||"Series "+(t+1)});u=r.linkedTo;this.linkedSeries=[];wt(u)&&(u=u===":previous"?o[this.index-1]:i.get(u))&&(u.linkedSeries.push(this),this.linkedParent=u)},bindAxes:function(){var n=this,i=n.options,u=n.chart,r;n.isCartesian&&t(["xAxis","yAxis"],function(e){t(u[e],function(t){r=t.options;(i[e]===r.index||i[e]!==f&&i[e]===r.id||i[e]===f&&r.index===0)&&(t.series.push(n),n[e]=t,t.isDirty=!0)});n[e]||fi(18,!0)})},autoIncrement:function(){var i=this.options,t=this.xIncrement,t=n(t,i.pointStart,0);return this.pointInterval=n(this.pointInterval,i.pointInterval,1),this.xIncrement=t+this.pointInterval,t},getSegments:function(){var i=-1,r=[],u,n=this.points,f=n.length;if(f)if(this.options.connectNulls){for(u=f;u--;)n[u].y===null&&n.splice(u,1);n.length&&(r=[n])}else t(n,function(t,u){t.y===null?(u>i+1&&r.push(n.slice(i+1,u)),i=u):u===f-1&&r.push(n.slice(i+1,u+1))});this.segments=r},setOptions:function(n){var t=this.chart.options,i=t.plotOptions,r=i[this.type];return this.userOptions=n,n=o(r,i.series,n),this.tooltipOptions=o(t.tooltip,n.tooltip),r.marker===null&&delete n.marker,n},getColor:function(){var n=this.options,i=this.userOptions,f=this.chart.options.colors,u=this.chart.counters,t;t=n.color||et[this.type].color;t||n.colorByPoint||(r(i._colorIndex)?n=i._colorIndex:(i._colorIndex=u.color,n=u.color++),t=f[n]);this.color=t;u.wrapColor(f.length)},getSymbol:function(){var n=this.userOptions,i=this.options.marker,t=this.chart,u=t.options.symbols,t=t.counters;this.symbol=i.symbol;this.symbol||(r(n._symbolIndex)?n=n._symbolIndex:(n._symbolIndex=t.symbol,n=t.symbol++),this.symbol=u[n]);/^url/.test(this.symbol)&&(i.radius=0);t.wrapSymbol(u.length)},drawLegendSymbol:function(n){var t=this.options,i=t.marker,u=n.options.symbolWidth,f=this.chart.renderer,e=this.legendGroup,n=n.baseline,r;t.lineWidth&&(r={"stroke-width":t.lineWidth},t.dashStyle&&(r.dashstyle=t.dashStyle),this.legendLine=f.path(["M",0,n-4,"L",u,n-4]).attr(r).add(e));i&&i.enabled&&(t=i.radius,this.legendSymbol=f.symbol(this.symbol,u/2-t,n-4-t,2*t,2*t).add(e))},addPoint:function(t,i,r,u){var s=this.options,f=this.data,e=this.graph,o=this.area,h=this.chart,c=this.xData,l=this.yData,a=this.zData,v=this.names,y=e&&e.shift||0,p=s.data;rr(u,h);e&&r&&(e.shift=y+1);o&&(r&&(o.shift=y+1),o.isArea=!0);i=n(i,!0);u={series:this};this.pointClass.prototype.applyOptions.apply(u,[t]);c.push(u.x);l.push(this.toYData?this.toYData(u):u.y);a.push(u.z);v&&(v[u.x]=u.name);p.push(t);s.legendType==="point"&&this.generatePoints();r&&(f[0]&&f[0].remove?f[0].remove(!1):(f.shift(),c.shift(),l.shift(),a.shift(),p.shift()));this.getAttribs();this.isDirtyData=this.isDirty=!0;i&&h.redraw()},setData:function(t,i){var l=this.points,u=this.options,v=this.chart,e=null,o=this.xAxis,a=o&&o.categories&&!o.categories.length?[]:null,r;this.xIncrement=null;this.pointRange=o&&o.categories?1:u.pointRange;this.colorCounter=0;var s=[],h=[],y=[],c=t?t.length:[],p=(r=this.pointArrayMap)&&r.length,w=!!this.toYData;if(c>(u.turboThreshold||1e3)){for(r=0;e===null&&r<c;)e=t[r],r++;if(nr(e)){for(e=n(u.pointStart,0),u=n(u.pointInterval,1),r=0;r<c;r++)s[r]=e,h[r]=t[r],e+=u;this.xIncrement=e}else if(gi(e))if(p)for(r=0;r<c;r++)u=t[r],s[r]=u[0],h[r]=u.slice(1,p+1);else for(r=0;r<c;r++)u=t[r],s[r]=u[0],h[r]=u[1]}else for(r=0;r<c;r++)t[r]!==f&&(u={series:this},this.pointClass.prototype.applyOptions.apply(u,[t[r]]),s[r]=u.x,h[r]=w?this.toYData(u):u.y,y[r]=u.z,a&&u.name)&&(a[r]=u.name);for(this.requireSorting&&s.length>1&&s[1]<s[0]&&fi(15),wt(h[0])&&fi(14,!0),this.data=[],this.options.data=t,this.xData=s,this.yData=h,this.zData=y,this.names=a,r=l&&l.length||0;r--;)l[r]&&l[r].destroy&&l[r].destroy();o&&(o.minRange=o.userMinRange);this.isDirty=this.isDirtyData=v.isDirtyBox=!0;n(i,!0)&&v.redraw(!1)},remove:function(t,i){var r=this,u=r.chart,t=n(t,!0);r.isRemoving||(r.isRemoving=!0,a(r,"remove",null,function(){r.destroy();u.isDirtyLegend=u.isDirtyBox=!0;t&&u.redraw(i)}));r.isRemoving=!1},processData:function(n){var t=this.xData,s=this.yData,r=t.length,h=0,c=r,l,o,u=this.xAxis,a=this.options,e=a.cropThreshold,v=this.isCartesian;if(v&&!this.isDirty&&!u.isDirty&&!this.yAxis.isDirty&&!n)return!1;if(v&&this.sorted&&(!e||r>e||this.forceCrop))if(n=u.getExtremes(),u=n.min,e=n.max,t[r-1]<u||t[0]>e)t=[],s=[];else if(t[0]<u||t[r-1]>e){for(n=0;n<r;n++)if(t[n]>=u){h=i(0,n-1);break}for(;n<r;n++)if(t[n]>e){c=n+1;break}t=t.slice(h,c);s=s.slice(h,c);l=!0}for(n=t.length-1;n>0;n--)(r=t[n]-t[n-1],r>0&&(o===f||r<o))&&(o=r);this.cropped=l;this.cropStart=h;this.processedXData=t;this.processedYData=s;a.pointRange===null&&(this.pointRange=o||1);this.closestPointRange=o},generatePoints:function(){var u=this.options.data,t=this.data,c,e=this.processedXData,v=this.processedYData,l=this.pointClass,o=e.length,a=this.cropStart||0,i,r=this.hasGroupedData,s,h=[],n;for(t||r||(t=[],t.length=u.length,t=this.data=t),n=0;n<o;n++)i=a+n,r?h[n]=(new l).init(this,[e[n]].concat(kt(v[n]))):(t[i]?s=t[i]:u[i]!==f&&(t[i]=s=(new l).init(this,u[i],e[n])),h[n]=s);if(t&&(o!==(c=t.length)||r))for(n=0;n<c;n++)(n===a&&!r&&(n+=o),t[n])&&(t[n].destroyElements(),t[n].plotX=f);this.data=t;this.points=h},translate:function(){this.processedXData||this.processData();this.generatePoints();for(var o=this.options,y=o.stacking,l=this.xAxis,a=l.categories,h=this.yAxis,p=this.points,k=p.length,d=!!this.modifyValue,w,b=o.pointPlacement==="between",v=o.threshold,t=h.series.sort(function(n,t){return n.index-t.index}),o=t.length;o--;)if(t[o].visible){t[o]===this&&(w=!0);break}for(o=0;o<k;o++){t=p[o];var c=t.x,i=t.y,e=t.low,s=h.stacks[(i<v?"-":"")+this.stackKey];h.isLog&&i<=0&&(t.y=i=null);t.plotX=l.translate(c,0,0,0,1,b);y&&this.visible&&s&&s[c]&&(e=s[c],s=e.total,e.cum=e=e.cum-i,i=e+i,w&&(e=n(v,h.min)),h.isLog&&e<=0&&(e=null),y==="percent"&&(e=s?e*100/s:0,i=s?i*100/s:0),t.percentage=s?t.y*100/s:0,t.total=t.stackTotal=s,t.stackY=i);t.yBottom=r(e)?h.translate(e,0,1,0,1):null;d&&(i=this.modifyValue(i,t));t.plotY=typeof i=="number"&&i!==Infinity?u(h.translate(i,0,1,0,1)*10)/10:f;t.clientX=b?l.translate(c,0,0,0,1):t.plotX;t.negative=t.y<(v||0);t.category=a&&a[t.x]!==f?a[t.x]:t.x}this.getSegments()},setTooltipPoints:function(n){var r=[],u,e,s=(u=this.xAxis)?u.tooltipLen||u.len:this.chart.plotSizeX,o,f,h=[];if(this.options.enableMouseTracking!==!1){for(n&&(this.tooltipPoints=null),t(this.segments||this.points,function(n){r=r.concat(n)}),u&&u.reversed&&(r=r.reverse()),n=r.length,f=0;f<n;f++)for(o=r[f],u=r[f-1]?e+1:0,e=r[f+1]?i(0,it((o.clientX+(r[f+1]?r[f+1].clientX:s))/2)):s;u>=0&&u<=e;)h[u++]=o;this.tooltipPoints=h}},tooltipHeaderFormatter:function(n){var t=this.tooltipOptions,r=t.xDateFormat,f=t.dateTimeLabelFormats,i=this.xAxis,e=i&&i.options.type==="datetime",t=t.headerFormat,i=i&&i.closestPointRange,u;if(e&&!r)if(i){for(u in l)if(l[u]>=i){r=f[u];break}}else r=f.day;return e&&r&&nr(n.key)&&(t=t.replace("{point.key}","{point.key:"+r+"}")),vi(t,{point:n,series:this})},onMouseOver:function(){var t=this.chart,n=t.hoverSeries;n&&n!==this&&n.onMouseOut();this.options.events.mouseOver&&a(this,"mouseOver");this.setState("hover");t.hoverSeries=this},onMouseOut:function(){var i=this.options,n=this.chart,t=n.tooltip,r=n.hoverPoint;r&&r.onMouseOut();this&&i.events.mouseOut&&a(this,"mouseOut");t&&!i.stickyTracking&&(!t.shared||this.noSharedTooltip)&&t.hide();this.setState();n.hoverSeries=null},animate:function(n){var r=this,t=r.chart,o=t.renderer,i,s,f,u;i=r.options.animation;s=t.clipBox;f=t.inverted;i&&!ot(i)&&(i=et[r.type].animation);u="_sharedClip"+i.duration+i.easing;n?(n=t[u],i=t[u+"m"],n||(t[u]=n=o.clipRect(e(s,{width:0})),t[u+"m"]=i=o.clipRect(-99,f?-t.plotLeft:-t.plotTop,99,f?t.chartWidth:t.chartHeight)),r.group.clip(n),r.markerGroup.clip(i),r.sharedClipKey=u):((n=t[u])&&(n.animate({width:t.plotSizeX},i),t[u+"m"].animate({width:t.plotSizeX+99},i)),r.animate=null,r.animationTimeout=setTimeout(function(){r.afterAnimate()},i.duration))},afterAnimate:function(){var n=this.chart,t=this.sharedClipKey,i=this.group;i&&this.options.clip!==!1&&(i.clip(n.clipRect),this.markerGroup.clip());setTimeout(function(){t&&n[t]&&(n[t]=n[t].destroy(),n[t+"m"]=n[t+"m"].destroy())},100)},drawPoints:function(){var h,y=this.points,l=this.chart,c,o,a,t,i,r,p,s,w=this.options.marker,v,b=this.markerGroup;if(w.enabled||this._hasPointMarkers)for(a=y.length;a--;)(t=y[a],c=t.plotX,o=t.plotY,s=t.graphic,r=t.marker||{},h=w.enabled&&r.enabled===f||r.enabled,v=l.isInsidePlot(u(c),o,l.inverted),h&&o!==f&&!isNaN(o)&&t.y!==null)?(h=t.pointAttr[t.selected?"select":""],i=h.r,r=n(r.symbol,this.symbol),p=r.indexOf("url")===0,s)?s.attr({visibility:v?ht?"inherit":"visible":"hidden"}).animate(e({x:c-i,y:o-i},s.symbolName?{width:2*i,height:2*i}:{})):v&&(i>0||p)&&(t.graphic=l.renderer.symbol(r,c-i,o-i,2*i,2*i).attr(h).add(b)):s&&(t.graphic=s.destroy())},convertAttribs:function(t,i,r,u){var e=this.pointAttrToOptions,f,o,s={},t=t||{},i=i||{},r=r||{},u=u||{};for(f in e)o=e[f],s[f]=n(t[o],i[f],r[f],u[f]);return s},getAttribs:function(){var i=this,h=i.options,u=et[i.type].marker?h.marker:h,c=u.states,o=c.hover,l,a=i.color,n={stroke:a,fill:a},y=i.points||[],s=[],f,p=i.pointAttrToOptions,v=h.negativeColor,w;for(h.marker?(o.radius=o.radius||u.radius+2,o.lineWidth=o.lineWidth||u.lineWidth+1):o.color=o.color||ni(o.color||a).brighten(o.brightness).get(),s[""]=i.convertAttribs(u,n),t(["hover","select"],function(n){s[n]=i.convertAttribs(c[n],s[""])}),i.pointAttr=s,a=y.length;a--;){if(n=y[a],(u=n.options&&n.options.marker||n.options)&&u.enabled===!1&&(u.radius=0),n.negative&&v&&(n.color=n.fillColor=v),l=h.colorByPoint||n.color,n.options)for(w in p)r(u[p[w]])&&(l=!0);l?(u=u||{},f=[],c=u.states||{},l=c.hover=c.hover||{},h.marker||(l.color=ni(l.color||n.color).brighten(l.brightness||o.brightness).get()),f[""]=i.convertAttribs(e({color:n.color},u),s[""]),f.hover=i.convertAttribs(c.hover,s.hover,f[""]),f.select=i.convertAttribs(c.select,s.select,f[""]),n.negative&&h.marker&&v&&(f[""].fill=f.hover.fill=f.select.fill=i.convertAttribs({fillColor:v}).fill)):f=s;n.pointAttr=f}},update:function(t,i){var r=this.chart,u=this.type,t=o(this.userOptions,{animation:!1,index:this.index,pointStart:this.xData[0]},t);this.remove(!1);e(this,lt[t.type||u].prototype);this.init(r,t);n(i,!0)&&r.redraw(!1)},destroy:function(){var n=this,r=n.chart,h=/AppleWebKit\/533/.test(yi),e,u,o=n.data||[],f,s,i;for(a(n,"destroy"),at(n),t(["xAxis","yAxis"],function(t){(i=n[t])&&(bt(i.series,n),i.isDirty=i.forceRedraw=!0)}),n.legendItem&&n.chart.legend.destroyItem(n),u=o.length;u--;)(f=o[u])&&f.destroy&&f.destroy();n.points=null;clearTimeout(n.animationTimeout);t("area,graph,dataLabelsGroup,group,markerGroup,tracker,graphNeg,areaNeg,posClip,negClip".split(","),function(t){n[t]&&(e=h&&t==="group"?"hide":"destroy",n[t][e]())});r.hoverSeries===n&&(r.hoverSeries=null);bt(r.series,n);for(s in n)delete n[s]},drawDataLabels:function(){var u=this,i=u.options.dataLabels,l=u.points,s,h,e,c;(i.enabled||u._hasPointLabels)&&(u.dlProcessOptions&&u.dlProcessOptions(i),c=u.plotGroup("dataLabelsGroup","data-labels",u.visible?"visible":"hidden",i.zIndex||6),h=i,t(l,function(t){var a,l=t.dataLabel,v,y,p=t.connector,w=!0;if(s=t.options&&t.options.dataLabels,a=h.enabled||s&&s.enabled,l&&!a)t.dataLabel=l.destroy();else if(a){if(a=i.rotation,i=o(h,s),v=t.getLabelConfig(),e=i.format?vi(i.format,v):i.formatter.call(v,i),i.style.color=n(i.color,i.style.color,u.color,"black"),l)r(e)?(l.attr({text:e}),w=!1):(t.dataLabel=l=l.destroy(),p)&&(t.connector=p.destroy());else if(r(e)){l={fill:i.backgroundColor,stroke:i.borderColor,"stroke-width":i.borderWidth,r:i.borderRadius||0,rotation:a,padding:i.padding,zIndex:1};for(y in l)l[y]===f&&delete l[y];l=t.dataLabel=u.chart.renderer[a?"text":"label"](e,0,-999,null,null,null,i.useHTML).attr(l).css(i.style).add(c).shadow(i.shadow)}l&&u.alignDataLabel(t,l,i,null,w)}}))},alignDataLabel:function(t,i,r,f,o){var s=this.chart,h=s.inverted,c=n(t.plotX,-999),t=n(t.plotY,-999),l=i.getBBox(),f=e({x:h?s.plotWidth-t:c,y:u(h?s.plotHeight-c:t),width:0,height:0},f);e(r,{width:l.width,height:l.height});r.rotation?(f={align:r.align,x:f.x+r.x+f.width/2,y:f.y+r.y+f.height/2},i[o?"attr":"animate"](f)):i.align(r,null,f);i.attr({visibility:r.crop===!1||s.isInsidePlot(c,t,h)?s.renderer.isSVG?"inherit":"visible":"hidden"})},getSegmentPath:function(n){var r=this,i=[],u=r.options.step;return t(n,function(t,f){var o=t.plotX,s=t.plotY,e;r.getPointSpline?i.push.apply(i,r.getPointSpline(n,t,f)):(i.push(f?"L":"M"),u&&f&&(e=n[f-1],u==="right"?i.push(e.plotX,s):u==="center"?i.push((e.plotX+o)/2,e.plotY,(e.plotX+o)/2,s):i.push(o,e.plotY)),i.push(t.plotX,t.plotY))}),i},getGraphPath:function(){var n=this,i=[],r,u=[];return t(n.segments,function(t){r=n.getSegmentPath(t);t.length>1?i=i.concat(r):u.push(t[0])}),n.singlePoints=u,n.graphPath=i},drawGraph:function(){var i=this,n=this.options,u=[["graph",n.lineColor||this.color]],f=n.lineWidth,e=n.dashStyle,r=this.getGraphPath(),o=n.negativeColor;o&&u.push(["graphNeg",o]);t(u,function(t,u){var s=t[0],o=i[s];o?(vr(o),o.animate({d:r})):f&&r.length&&(o={stroke:t[1],"stroke-width":f,zIndex:1},e&&(o.dashstyle=e),i[s]=i.chart.renderer.path(r).attr(o).add(i.group).shadow(!u&&n.shadow))})},clipNeg:function(){var f=this.options,n=this.chart,s=n.renderer,r=f.negativeColor,t,h=this.graph,c=this.area,e=this.posClip,o=this.negClip,l,u;t=n.chartWidth;l=n.chartHeight;u=i(t,l);r&&(h||c)&&(r=gt(this.yAxis.len-this.yAxis.translate(f.threshold||0)),f={x:0,y:0,width:u,height:r},u={x:0,y:r,width:u,height:u-r},n.inverted&&s.isVML&&(f={x:n.plotWidth-r-n.plotLeft,y:0,width:t,height:l},u={x:r+n.plotLeft-t,y:0,width:n.plotLeft+r,height:t}),this.yAxis.reversed?(n=u,t=f):(n=f,t=u),e?(e.animate(n),o.animate(t)):(this.posClip=e=s.clipRect(n),this.negClip=o=s.clipRect(t),h&&(h.clip(e),this.graphNeg.clip(o)),c&&(c.clip(e),this.areaNeg.clip(o))))},invertGroups:function(){function i(){var i={width:n.yAxis.len,height:n.xAxis.len};t(["group","markerGroup"],function(t){n[t]&&n[t].attr(i).invert()})}var n=this,r=n.chart;n.xAxis&&(k(r,"resize",i),k(n,"destroy",function(){at(r,"resize",i)}),i(),n.invertGroups=i)},plotGroup:function(n,t,i,r,u){var f=this[n],o=!f,e=this.chart,s=this.xAxis,h=this.yAxis;return o&&(this[n]=f=e.renderer.g(t).attr({visibility:i,zIndex:r||.1}).add(u)),f[o?"attr":"animate"]({translateX:s?s.left:e.plotLeft,translateY:h?h.top:e.plotTop,scaleX:1,scaleY:1}),f},render:function(){var n=this.chart,t,i=this.options,r=i.animation&&!!this.animate&&n.renderer.isSVG,u=this.visible?"visible":"hidden",f=i.zIndex,e=this.hasRendered,o=n.seriesGroup;t=this.plotGroup("group","series",u,f,o);this.markerGroup=this.plotGroup("markerGroup","markers",u,f,o);r&&this.animate(!0);this.getAttribs();t.inverted=this.isCartesian?n.inverted:!1;this.drawGraph&&(this.drawGraph(),this.clipNeg());this.drawDataLabels();this.drawPoints();this.options.enableMouseTracking!==!1&&this.drawTracker();n.inverted&&this.invertGroups();i.clip===!1||this.sharedClipKey||e||t.clip(n.clipRect);r?this.animate():e||this.afterAnimate();this.isDirty=this.isDirtyData=!1;this.hasRendered=!0},redraw:function(){var t=this.chart,f=this.isDirtyData,i=this.group,r=this.xAxis,u=this.yAxis;i&&(t.inverted&&i.attr({width:t.plotWidth,height:t.plotHeight}),i.animate({translateX:n(r&&r.left,t.plotLeft),translateY:n(u&&u.top,t.plotTop)}));this.translate();this.setTooltipPoints(!0);this.render();f&&a(this,"updatedData")},setState:function(n){var t=this.options,i=this.graph,u=this.graphNeg,r=t.states,t=t.lineWidth,n=n||"";this.state!==n&&(this.state=n,r[n]&&r[n].enabled===!1||(n&&(t=r[n].lineWidth||t+1),i&&!i.dashstyle&&(n={"stroke-width":t},i.attr(n),u&&u.attr(n))))},setVisible:function(n,i){var r=this,u=r.chart,o=r.legendItem,e,s=u.options.chart.ignoreHiddenSeries,h=r.visible;e=(r.visible=n=r.userOptions.visible=n===f?!h:n)?"show":"hide";t(["group","dataLabelsGroup","markerGroup","tracker"],function(n){r[n]&&r[n][e]()});u.hoverSeries===r&&r.onMouseOut();o&&u.legend.colorizeItem(r,n);r.isDirty=!0;r.options.stacking&&t(u.series,function(n){n.options.stacking&&n.visible&&(n.isDirty=!0)});t(r.linkedSeries,function(t){t.setVisible(n,!1)});s&&(u.isDirtyBox=!0);i!==!1&&u.redraw();a(r,e)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(n){this.selected=n=n===f?!this.selected:n;this.checkbox&&(this.checkbox.checked=n);a(this,n?"select":"unselect")},drawTracker:function(){var i=this,s=i.options,f=s.trackByArea,t=[].concat(f?i.areaPath:i.graphPath),r=t.length,e=i.chart,a=e.pointer,v=e.renderer,u=e.options.tooltip.snap,o=i.tracker,h=s.cursor,h=h&&{cursor:h},c=i.singlePoints,n,l=function(){e.hoverSeries!==i&&i.onMouseOver()};if(r&&!f)for(n=r+1;n--;)t[n]==="M"&&t.splice(n+1,0,t[n+1]-u,t[n+2],"L"),(n&&t[n]==="M"||n===r)&&t.splice(n,0,"L",t[n-2]+u,t[n-1]);for(n=0;n<c.length;n++)r=c[n],t.push("M",r.plotX-u,r.plotY,"L",r.plotX+u,r.plotY);if(o)o.attr({d:t});else if(i.tracker=o=v.path(t).attr({"class":"highcharts-tracker","stroke-linejoin":"round",visibility:i.visible?"visible":"hidden",stroke:af,fill:f?af:rt,"stroke-width":s.lineWidth+(f?0:2*u),zIndex:2}).addClass("highcharts-tracker").on("mouseover",l).on("mouseout",function(n){a.onTrackerMouseOut(n)}).css(h).add(i.markerGroup),dr)o.on("touchstart",l)}};y=pt(tt);lt.line=y;et.area=o(ft,{threshold:0});y=pt(tt,{type:"area",getSegments:function(){var r=[],i=[],u=[],a=this.xAxis,h=this.yAxis,c=h.stacks[this.stackKey],f={},e,o,s=this.points,n,l;if(this.options.stacking&&!this.cropped){for(n=0;n<s.length;n++)f[s[n].x]=s[n];for(l in c)u.push(+l);u.sort(function(n,t){return n-t});t(u,function(n){f[n]?i.push(f[n]):(e=a.translate(n),o=h.toPixels(c[n].cum,!0),i.push({y:null,plotX:e,clientX:e,plotY:o,yBottom:o,onMouseOver:si}))});i.length&&r.push(i)}else tt.prototype.getSegments.call(this),r=this.segments;this.segments=r},getSegmentPath:function(n){var i=tt.prototype.getSegmentPath.call(this,n),r=[].concat(i),t,u=this.options;if(i.length===3&&r.push("L",i[1],i[2]),u.stacking&&!this.closedStacks)for(t=n.length-1;t>=0;t--)t<n.length-1&&u.step&&r.push(n[t+1].plotX,n[t].yBottom),r.push(n[t].plotX,n[t].yBottom);else this.closeSegment(r,n);return this.areaPath=this.areaPath.concat(r),i},closeSegment:function(n,t){var i=this.yAxis.getThreshold(this.options.threshold);n.push("L",t[t.length-1].plotX,i,"L",t[0].plotX,i)},drawGraph:function(){this.areaPath=[];tt.prototype.drawGraph.apply(this);var r=this,u=this.areaPath,i=this.options,f=[["area",this.color,i.fillColor]];i.negativeColor&&f.push(["areaNeg",i.negativeColor,i.negativeFillColor]);t(f,function(t){var f=t[0],e=r[f];e?e.animate({d:u}):r[f]=r.chart.renderer.path(u).attr({fill:n(t[2],ni(t[1]).setOpacity(i.fillOpacity||.75).get()),zIndex:0}).add(r.group)})},drawLegendSymbol:function(n,t){t.legendSymbol=this.chart.renderer.rect(0,n.baseline-11,n.options.symbolWidth,12,2).attr({zIndex:3}).add(t.legendGroup)}});lt.area=y;et.spline=o(ft);d=pt(tt,{type:"spline",getPointSpline:function(n,t,r){var h=t.plotX,u=t.plotY,o=n[r-1],s=n[r+1],l,e,c,f,a;return o&&s&&(n=o.plotY,c=s.plotX,s=s.plotY,l=(1.5*h+o.plotX)/2.5,e=(1.5*u+n)/2.5,c=(1.5*h+c)/2.5,f=(1.5*u+s)/2.5,a=(f-e)*(c-h)/(c-l)+u-f,e+=a,f+=a,e>n&&e>u?(e=i(n,u),f=2*u-e):e<n&&e<u&&(e=v(n,u),f=2*u-e),f>s&&f>u?(f=i(s,u),e=2*u-f):f<s&&f<u&&(f=v(s,u),e=2*u-f),t.rightContX=c,t.rightContY=f),r?(t=["C",o.rightContX||o.plotX,o.rightContY||o.plotY,l||h,e||u,h,u],o.rightContX=o.rightContY=null):t=["M",h,u],t}});lt.spline=d;et.areaspline=o(et.area);ti=y.prototype;d=pt(d,{type:"areaspline",closedStacks:!0,getSegmentPath:ti.getSegmentPath,closeSegment:ti.closeSegment,drawGraph:ti.drawGraph});lt.areaspline=d;et.column=o(ft,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,threshold:0});d=pt(tt,{type:"column",tooltipOutsidePlot:!0,requireSorting:!1,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},trackerGroups:["group","dataLabelsGroup"],init:function(){tt.prototype.init.apply(this,arguments);var n=this,i=n.chart;i.hasRendered&&t(i.series,function(t){t.type===n.type&&(t.isDirty=!0)})},getColumnMetrics:function(){var i=this,s=i.chart,u=i.options,e=this.xAxis,p=e.reversed,h,a={},y,o=0;u.grouping===!1?o=1:t(s.series,function(n){var t=n.options;n.type===i.type&&n.visible&&i.options.group===t.group&&(t.stacking?(h=n.stackKey,a[h]===f&&(a[h]=o++),y=a[h]):t.grouping!==!1&&(y=o++),n.columnIndex=y)});var s=v(b(e.transA)*(e.ordinalSlope||u.pointRange||e.closestPointRange||1),e.len),e=s*u.groupPadding,c=(s-2*e)/o,l=u.pointWidth,u=r(l)?(c-l)/2:c*u.pointPadding,l=n(l,c-2*u);return i.columnMetrics={width:l,offset:u+(e+((p?o-(i.columnIndex||0):i.columnIndex)||0)*c-s/2)*(p?-1:1)}},translate:function(){var r=this,a=r.chart,u=r.options,y=u.stacking,s=u.borderWidth,e=r.yAxis,o=r.translatedThreshold=e.getThreshold(u.threshold),f=n(u.minPointLength,5),u=r.getColumnMetrics(),h=u.width,c=gt(i(h,1+2*s)),l=u.offset;tt.prototype.translate.apply(r);t(r.points,function(t){var u=v(i(-999,t.plotY),e.len+999),w=n(t.yBottom,o),d=t.plotX+l,p=gt(v(u,w)),u=gt(i(u,w)-p),k=e.stacks[(t.y<0?"-":"")+r.stackKey];y&&r.visible&&k&&k[t.x]&&k[t.x].setOffset(l,c);b(u)<f&&f&&(u=f,p=b(p-o)>f?w-f:o-(e.translate(t.y,0,1,0,1)<=o?f:0));t.barX=d;t.pointWidth=h;t.shapeType="rect";t.shapeArgs=t=a.renderer.Element.prototype.crisp.call(0,s,d,p,c,u);s%2&&(t.y-=1,t.height+=1)})},getSymbol:si,drawLegendSymbol:y.prototype.drawLegendSymbol,drawGraph:si,drawPoints:function(){var n=this,i=n.options,u=n.chart.renderer,r;t(n.points,function(t){var s=t.plotY,e=t.graphic;s===f||isNaN(s)||t.y===null?e&&(t.graphic=e.destroy()):(r=t.shapeArgs,e?(vr(e),e.animate(o(r))):t.graphic=u[t.shapeType](r).attr(t.pointAttr[t.selected?"select":""]).add(n.group).shadow(i.shadow,null,i.stacking&&!i.borderRadius))})},drawTracker:function(){var n=this,u=n.chart.pointer,i=n.options.cursor,e=i&&{cursor:i},r=function(t){var i=t.target,r;for(n.onMouseOver();i&&!r;)r=i.point,i=i.parentNode;if(r!==f)r.onMouseOver(t)};t(n.points,function(n){n.graphic&&(n.graphic.element.point=n);n.dataLabel&&(n.dataLabel.element.point=n)});n._hasTracking?n._hasTracking=!0:t(n.trackerGroups,function(t){if(n[t]&&(n[t].addClass("highcharts-tracker").on("mouseover",r).on("mouseout",function(n){u.onTrackerMouseOut(n)}).css(e),dr))n[t].on("touchstart",r)})},alignDataLabel:function(t,i,r,u,f){var e=this.chart,s=e.inverted,l=t.dlBox||t.shapeArgs,h=t.below||t.plotY>n(this.translatedThreshold,e.plotSizeY),c=n(r.inside,!!this.options.stacking);l&&(u=o(l),s&&(u={x:e.plotWidth-u.y-u.height,y:e.plotHeight-u.x-u.width,width:u.height,height:u.width}),!c)&&(s?(u.x+=h?0:u.width,u.width=0):(u.y+=h?u.height:0,u.height=0));r.align=n(r.align,!s||c?"center":h?"right":"left");r.verticalAlign=n(r.verticalAlign,s||c?"middle":h?"top":"bottom");tt.prototype.alignDataLabel.call(this,t,i,r,u,f)},animate:function(n){var r=this.yAxis,f=this.options,u=this.chart.inverted,t={};ht&&(n?(t.scaleY=.001,n=v(r.pos+r.len,i(r.pos,r.toPixels(f.threshold))),u?t.translateX=n-r.len:t.translateY=n,this.group.attr(t)):(t.scaleY=1,t[u?"translateX":"translateY"]=r.pos,this.group.animate(t,this.options.animation),this.animate=null))},remove:function(){var n=this,i=n.chart;i.hasRendered&&t(i.series,function(t){t.type===n.type&&(t.isDirty=!0)});tt.prototype.remove.apply(n,arguments)}});lt.column=d;et.bar=o(et.column);ti=pt(d,{type:"bar",inverted:!0});lt.bar=ti;et.scatter=o(ft,{lineWidth:0,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}<\/span><br/>',pointFormat:"x: <b>{point.x}<\/b><br/>y: <b>{point.y}<\/b><br/>",followPointer:!0},stickyTracking:!1});ti=pt(tt,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup"],drawTracker:d.prototype.drawTracker,setTooltipPoints:si});lt.scatter=ti;et.pie=o(ft,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});ft={type:"pie",isCartesian:!1,pointClass:pt(di,{init:function(){di.prototype.init.apply(this,arguments);var t=this,i;return t.y<0&&(t.y=null),e(t,{visible:t.visible!==!1,name:n(t.name,"Slice")}),i=function(){t.slice()},k(t,"select",i),k(t,"unselect",i),t},setVisible:function(n){var i=this,r=i.series,u=r.chart,e;i.visible=i.options.visible=n=n===f?!i.visible:n;r.options.data[ri(i,r.data)]=i.options;e=n?"show":"hide";t(["graphic","dataLabel","connector","shadowGroup"],function(n){i[n]&&i[n][e]()});i.legendItem&&u.legend.colorizeItem(i,n);!r.isDirty&&r.options.ignoreHiddenPoint&&(r.isDirty=!0,u.redraw())},slice:function(t,i,u){var f=this.series;rr(u,f.chart);n(i,!0);this.sliced=this.options.sliced=t=r(t)?t:!this.sliced;f.options.data[ri(this,f.data)]=this.options;t=t?this.slicedTranslation:{translateX:0,translateY:0};this.graphic.animate(t);this.shadowGroup&&this.shadowGroup.animate(t)}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:si,animate:function(n){var i=this,u=i.points,r=i.startAngleRad;n||(t(u,function(n){var t=n.graphic,n=n.shapeArgs;t&&(t.attr({r:i.center[3]/2,start:r,end:r}),t.animate({r:n.r,start:n.start,end:n.end},i.options.animation))}),i.animate=null)},setData:function(t,i){tt.prototype.setData.call(this,t,!1);this.processData();this.generatePoints();n(i,!0)&&this.chart.redraw()},getCenter:function(){var t=this.options,i=this.chart,r=2*(t.slicedOffset||0),f,e=i.plotWidth-2*r,o=i.plotHeight-2*r,i=t.center,t=[n(i[0],"50%"),n(i[1],"50%"),t.size||"100%",t.innerSize||0],h=v(e,o),u;return or(t,function(n,t){return u=/%$/.test(n),f=t<2||t===2&&u,(u?[e,o,h,h][t]*s(n)/100:n)+(f?r:0)})},translate:function(n){this.generatePoints();var h=0,a=0,r=this.options,y=r.slicedOffset,c=y+r.borderWidth,f,e,t,b=this.startAngleRad=fr/180*((r.startAngle||0)%360-90),p=this.points,l=2*fr,s=r.dataLabels.distance,k=r.ignoreHiddenPoint,o,d=p.length,i;for(n||(this.center=n=this.getCenter()),this.getX=function(i,r){return t=w.asin((i-n[1])/(n[2]/2+s)),n[0]+(r?-1:1)*st(t)*(n[2]/2+s)},o=0;o<d;o++)i=p[o],h+=k&&!i.visible?0:i.y;for(o=0;o<d;o++)i=p[o],r=h?i.y/h:0,f=u((b+a*l)*1e3)/1e3,(!k||i.visible)&&(a+=r),e=u((b+a*l)*1e3)/1e3,i.shapeType="arc",i.shapeArgs={x:n[0],y:n[1],r:n[2]/2,innerR:n[3]/2,start:f,end:e},t=(e+f)/2,t>.75*l&&(t-=2*fr),i.slicedTranslation={translateX:u(st(t)*y),translateY:u(vt(t)*y)},f=st(t)*n[2]/2,e=vt(t)*n[2]/2,i.tooltipPos=[n[0]+f*.7,n[1]+e*.7],i.half=t<l/4?0:1,i.angle=t,c=v(c,s/2),i.labelPos=[n[0]+f+st(t)*s,n[1]+e+vt(t)*s,n[0]+f+st(t)*c,n[1]+e+vt(t)*c,n[0]+f,n[1]+e,s<0?"center":i.half?"right":"left",t],i.percentage=r*100,i.total=h;this.setTooltipPoints()},drawGraph:null,drawPoints:function(){var n=this,f=n.chart.renderer,r,u,o=n.options.shadow,i,s;o&&!n.shadowGroup&&(n.shadowGroup=f.g("shadow").add(n.group));t(n.points,function(t){u=t.graphic;s=t.shapeArgs;i=t.shadowGroup;o&&!i&&(i=t.shadowGroup=f.g("shadow").add(n.shadowGroup));r=t.sliced?t.slicedTranslation:{translateX:0,translateY:0};i&&i.attr(r);u?u.animate(e(s,r)):t.graphic=u=f.arc(s).setRadialReference(n.center).attr(t.pointAttr[t.selected?"select":""]).attr({"stroke-linejoin":"round"}).attr(r).add(n.group).shadow(o,i);t.visible===!1&&t.setVisible(!1)})},drawDataLabels:function(){var p=this,o=p.data,e,et=p.chart,w=p.options.dataLabels,it=n(w.connectorPadding,10),at=n(w.connectorWidth,1),vt=et.plotWidth,et=et.plotHeight,g,ot,bt=n(w.softConnector,!0),rt=w.distance,st=p.center,ht=st[2]/2,yt=st[1],kt=rt>0,a,c,f,nt,pt=[[],[]],v,s,ut,l,r,y=[0,0,0,0],wt=function(n,t){return t.y-n.y},dt=function(n,t){n.sort(function(n,i){return n.angle!==void 0&&(i.angle-n.angle)*t})},lt,ft;if(w.enabled||p._hasPointLabels){for(tt.prototype.drawDataLabels.apply(p),t(o,function(n){n.dataLabel&&pt[n.half].push(n)}),l=0;!nt&&o[l];)nt=o[l]&&o[l].dataLabel&&(o[l].dataLabel.getBBox().height||21),l++;for(l=2;l--;){var o=[],ct=[],k=pt[l],d=k.length,h;if(dt(k,l-.5),rt>0){for(r=yt-ht-rt;r<=yt+ht+rt;r+=nt)o.push(r);if(c=o.length,d>c){for(e=[].concat(k),e.sort(wt),r=d;r--;)e[r].rank=r;for(r=d;r--;)k[r].rank>=c&&k.splice(r,1);d=k.length}for(r=0;r<d;r++){for(e=k[r],f=e.labelPos,e=9999,ft=0;ft<c;ft++)lt=b(o[ft]-f[1]),lt<e&&(e=lt,h=ft);if(h<r&&o[r]!==null)h=r;else for(c<d-r+h&&o[r]!==null&&(h=c-d+r);o[h]===null;)h++;ct.push({i:h,y:o[h]});o[h]=null}ct.sort(wt)}for(r=0;r<d;r++)e=k[r],f=e.labelPos,a=e.dataLabel,ut=e.visible===!1?"hidden":"visible",e=f[1],rt>0?(c=ct.pop(),h=c.i,s=c.y,e>s&&o[h+1]!==null||e<s&&o[h-1]!==null)&&(s=e):s=e,v=w.justify?st[0]+(l?-1:1)*(ht+rt):p.getX(h===0||h===o.length-1?e:s,l),a._attr={visibility:ut,align:f[6]},a._pos={x:v+w.x+({left:it,right:-it}[f[6]]||0),y:s+w.y-10},a.connX=v,a.connY=s,this.options.size===null&&(c=a.width,v-c<it?y[3]=i(u(c-v+it),y[3]):v+c>vt-it&&(y[1]=i(u(v+c-vt+it),y[1])),s-nt/2<0?y[0]=i(u(-s+nt/2),y[0]):s+nt/2>et&&(y[2]=i(u(s+nt/2-et),y[2])))}(ui(y)===0||this.verifyDataLabelOverflow(y))&&(this.placeDataLabels(),kt&&at&&t(this.points,function(n){g=n.connector;f=n.labelPos;(a=n.dataLabel)&&a._pos?(ut=a._attr.visibility,v=a.connX,s=a.connY,ot=bt?["M",v+(f[6]==="left"?5:-5),s,"C",v,s,2*f[2]-f[4],2*f[3]-f[5],f[2],f[3],"L",f[4],f[5]]:["M",v+(f[6]==="left"?5:-5),s,"L",f[2],f[3],"L",f[4],f[5]],g?(g.animate({d:ot}),g.attr("visibility",ut)):n.connector=g=p.chart.renderer.path(ot).attr({"stroke-width":at,stroke:w.connectorColor||n.color||"#606060",visibility:ut}).add(p.group)):g&&(n.connector=g.destroy())}))}},verifyDataLabelOverflow:function(n){var r=this.center,f=this.options,e=f.center,u=f=f.minSize||80,o;return e[0]!==null?u=i(r[2]-i(n[1],n[3]),f):(u=i(r[2]-n[1]-n[3],f),r[0]+=(n[3]-n[1])/2),e[1]!==null?u=i(v(u,r[2]-i(n[0],n[2])),f):(u=i(v(u,r[2]-n[0]-n[2]),f),r[1]+=(n[0]-n[2])/2),u<r[2]?(r[2]=u,this.translate(r),t(this.points,function(n){n.dataLabel&&(n.dataLabel._pos=null)}),this.drawDataLabels()):o=!0,o},placeDataLabels:function(){t(this.points,function(n){var n=n.dataLabel,t;n&&((t=n._pos)?(n.attr(n._attr),n[n.moved?"animate":"attr"](t),n.moved=!0):n&&n.attr({y:-999}))})},alignDataLabel:si,drawTracker:d.prototype.drawTracker,drawLegendSymbol:y.prototype.drawLegendSymbol,getSymbol:si};ft=pt(tt,ft);lt.pie=ft;e(Highcharts,{Axis:yr,Chart:au,Color:ni,Legend:lu,Pointer:cu,Point:di,Tick:ur,Tooltip:hu,Renderer:hr,Series:tt,SVGElement:ei,SVGRenderer:ci,arrayMin:tr,arrayMax:ui,charts:wi,dateFormat:nu,format:vi,pathAnim:yu,getOptions:function(){return nt},hasBidiBug:ne,isTouchDevice:cf,numberFormat:li,seriesTypes:lt,setOptions:function(n){return nt=o(nt,n),of(),nt},addEvent:k,removeEvent:at,createElement:ut,discardElement:sr,css:p,each:t,extend:e,map:or,merge:o,pick:n,splat:kt,extendClass:pt,pInt:s,wrap:tf,svg:ht,canvas:ct,vml:!ht&&!ct,product:"Highcharts",version:"3.0.2"})}();var chart_text_color="#333333",bar_balance_color="#000000",bar_principal_color="#55a216",bar_pmi_color="#979797",bar_interest_color="#60c30f",pie_principal_color="#55a216",pie_pmi_color="#404040",pie_interest_color="#60c30f",pie_tax_color="#979797",pie_insurance_color="#737373";$(document).ready(function(){$("input[type=text]").focus(function(){this.select()});$("#amortization_tables a").click(function(n){n.preventDefault();$(this).tab("show")});var n=Date.parse("today");$("#start_date").val(n.toString("MM/dd"));$("#start_date").datepicker({autoclose:!0});$("#mortgage-form").submit(function(n){n.preventDefault();calculate();scroll_to_results()});set_tool_tip_formatter();calculate()})